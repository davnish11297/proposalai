{"ast":null,"code":"import React,{useState,useEffect}from'react';import{toast}from'react-hot-toast';import ReactMarkdown from'react-markdown';import{PaperAirplaneIcon,EnvelopeIcon,SparklesIcon,DocumentArrowUpIcon,EyeIcon,PencilIcon}from'@heroicons/react/24/outline';import{generateProposalSuggestions}from'../services/aiService';import{sendProposalEmail}from'../services/emailService';import{getOpenRouterChatCompletion}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Dashboard(){const[inputText,setInputText]=useState('');const[selectedFile,setSelectedFile]=useState(null);const[generatedContent,setGeneratedContent]=useState('');const[showContent,setShowContent]=useState(false);const[loading,setLoading]=useState(false);const[suggestions,setSuggestions]=useState([]);const[selectedSuggestions,setSelectedSuggestions]=useState([]);const[showEmailModal,setShowEmailModal]=useState(false);const[emailData,setEmailData]=useState({to:'',clientName:'',clientEmail:'',subject:'',message:''});const[previewMode,setPreviewMode]=useState(false);const[editableContent,setEditableContent]=useState('');useEffect(()=>{loadSuggestions();},[]);const loadSuggestions=async()=>{try{const newSuggestions=await generateProposalSuggestions();setSuggestions(newSuggestions);}catch(error){console.error('Failed to load suggestions:',error);}};const handleFileChange=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(file&&file.type==='application/pdf'){setSelectedFile(file);toast.success('PDF file selected successfully!');}else if(file){toast.error('Please select a PDF file');}};const handleGenerateWithAI=async()=>{if(!selectedFile&&!inputText.trim()){toast.error('Please enter some text or upload a PDF file');return;}setLoading(true);console.log('ðŸš€ Dashboard AI generation started!');try{console.log('ðŸ“ Input text:',inputText);console.log('ðŸ“„ Selected file:',selectedFile===null||selectedFile===void 0?void 0:selectedFile.name);// Create the AI prompt based on input\nconst prompt=inputText.trim()||'Generate a professional business proposal';const messages=[{role:'system',content:'You are an expert business proposal writer with 15+ years of experience. Write detailed, specific, and professional proposal content. Never use generic placeholder text like \"Feature 1\" or \"Benefit 1\". Always provide concrete, actionable content with specific details, industry insights, and persuasive language.'},{role:'user',content:`Create a comprehensive business proposal based on this information: ${prompt}\n\nPlease include these sections:\n\n# Executive Summary\n[Compelling overview of the project and its value]\n\n# Project Overview\n[Detailed analysis of requirements and objectives]\n\n# Our Approach & Methodology\n[Step-by-step methodology and processes]\n\n# Project Deliverables\nCreate a detailed list of specific deliverables with descriptions and timelines. Format as:\n- **Deliverable Name**: Brief description. Timeline: X weeks/days\n\n# Project Timeline\nCreate a detailed timeline with specific phases, dates, and milestones. Format exactly as:\n1. **Phase Name** (YYYY-MM-DD)\n   Description of what will be completed in this phase.\n\n2. **Phase Name** (YYYY-MM-DD)\n   Description of what will be completed in this phase.\n\n3. **Phase Name** (YYYY-MM-DD)\n   Description of what will be completed in this phase.\n\nIMPORTANT: Each timeline item must be on a new line with the number, then the phase name in bold, then the date in parentheses, then the description on the next line.\n\n# Investment & Pricing\n[Pricing structure and payment terms]\n\n# Why Choose Us\n[Experience, expertise, and competitive advantages]\n\n# Next Steps\n[Clear action items and contact information]\n\nIMPORTANT: \n- Write specific, detailed content for each section\n- Do not use generic text like \"Feature 1\"\n- Make it professional, compelling, and tailored to the project description\n- Include realistic timelines and deliverables based on the project scope\n- Use specific dates and milestones for the timeline section`}];console.log('ðŸŒ Sending request to OpenRouter...');const response=await getOpenRouterChatCompletion(messages);console.log('âœ… AI response received:',response);if(response&&response.choices&&response.choices[0]&&response.choices[0].message){const aiContent=response.choices[0].message.content;console.log('ðŸ“ AI generated content length:',aiContent.length);const cleanContent=content=>{return content.replace(/```markdown/g,'').replace(/```/g,'').trim();};const cleanedContent=cleanContent(aiContent);console.log('ðŸ§¹ Content cleaned and ready');setGeneratedContent(cleanedContent);setShowContent(true);toast.success('Proposal generated successfully!');}else{console.error('âŒ Invalid response structure:',response);toast.error('Invalid response from AI service');}}catch(error){console.error('âŒ Error generating content:',error);toast.error('Failed to generate proposal. Please try again.');}finally{setLoading(false);}};const handleSuggestionClick=suggestion=>{if(selectedSuggestions.includes(suggestion.id)){setSelectedSuggestions(selectedSuggestions.filter(id=>id!==suggestion.id));}else{setSelectedSuggestions([...selectedSuggestions,suggestion.id]);}};const handleSendEmail=async()=>{try{await sendProposalEmail({to:emailData.clientEmail,clientName:emailData.clientName,clientEmail:emailData.clientEmail,subject:emailData.subject,message:emailData.message});toast.success('Email sent successfully!');setShowEmailModal(false);}catch(error){toast.error('Failed to send email');}};const handleClear=()=>{setInputText('');setSelectedFile(null);setGeneratedContent('');setEditableContent('');setShowContent(false);setSelectedSuggestions([]);setPreviewMode(false);};const handleSaveAsDraft=async()=>{const contentToSave=editableContent||generatedContent;if(!contentToSave.trim()){toast.error('No content to save');return;}try{const token=localStorage.getItem('token');if(!token){toast.error('Please log in to save drafts');return;}const response=await fetch('/api/proposals',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({title:'Draft Proposal',content:contentToSave,status:'DRAFT'})});if(!response.ok){throw new Error('Failed to save draft');}toast.success('Draft saved successfully!');// Optionally redirect to the draft or clear the form\nsetShowContent(false);setGeneratedContent('');setEditableContent('');setInputText('');setSelectedFile(null);setSelectedSuggestions([]);setPreviewMode(false);}catch(error){console.error('Error saving draft:',error);toast.error('Failed to save draft');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto px-6 py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-16 animate-fade-in-up\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl shadow-lg mb-6\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-4 tracking-tight\",children:\"Create your next winning proposal\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-base text-gray-600 max-w-2xl mx-auto leading-relaxed\",children:\"Transform your ideas into compelling proposals with AI-powered assistance\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-elevated p-6 mb-8 animate-fade-in-up\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:inputText,onChange:e=>setInputText(e.target.value),className:\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none text-gray-900 placeholder-gray-400 font-medium shadow-sm focus:shadow-md transition-all duration-200\",placeholder:\"Describe your project, requirements, or ask ProposalAI to help you create a winning proposal...\",rows:5}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-4 right-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pdf-upload\",className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gradient-to-r from-primary-50 to-primary-100 hover:from-primary-100 hover:to-primary-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md border border-primary-200\",children:/*#__PURE__*/_jsx(DocumentArrowUpIcon,{className:\"h-5 w-5 text-primary-600\"})})}),/*#__PURE__*/_jsx(\"input\",{id:\"pdf-upload\",type:\"file\",accept:\".pdf\",onChange:handleFileChange,className:\"hidden\"})]}),selectedFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 bg-gradient-to-r from-emerald-50 to-emerald-100 border border-emerald-200 rounded-xl flex items-center\",children:[/*#__PURE__*/_jsx(DocumentArrowUpIcon,{className:\"h-4 w-4 mr-2 text-emerald-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-emerald-700\",children:selectedFile.name})]})]}),suggestions.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:suggestions.slice(0,6).map(suggestion=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSuggestionClick(suggestion),className:`px-4 py-2.5 text-sm font-medium rounded-xl border-2 transition-all duration-200 shadow-sm hover:shadow-md ${selectedSuggestions.includes(suggestion.id)?'bg-gradient-to-r from-primary-100 to-primary-200 text-primary-800 border-primary-300 shadow-md':'bg-white text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-gray-300'}`,children:suggestion.title},suggestion.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-end mt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateWithAI,disabled:!selectedFile&&!inputText.trim()||loading,className:\"btn-primary flex items-center space-x-3 px-8 py-3 text-base font-semibold\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Generating...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Generate with AI\"})]})})})]}),showContent&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-elevated p-6 animate-fade-in-up\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Generated Proposal\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setPreviewMode(!previewMode),className:\"btn-secondary flex items-center gap-2\",children:[previewMode?/*#__PURE__*/_jsx(PencilIcon,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(EyeIcon,{className:\"w-4 h-4\"}),previewMode?'Edit Mode':'Preview Mode']}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-emerald-600\",children:\"AI Generated\"})]})]})]}),previewMode?/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-base max-w-none text-gray-700 mb-6 leading-relaxed\",children:/*#__PURE__*/_jsx(\"div\",{className:\"proposal-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:editableContent||generatedContent})})}):/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"textarea\",{value:editableContent||generatedContent,onChange:e=>setEditableContent(e.target.value),rows:25,className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none transition-all duration-200 bg-gray-50 font-mono text-sm leading-relaxed hover:bg-white\",placeholder:\"Edit your proposal content here...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSaveAsDraft,className:\"btn-primary flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Save as Draft\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowEmailModal(true),className:\"btn-secondary flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(EnvelopeIcon,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Send Email\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClear,className:\"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors\",children:\"Clear\"})]})]})]}),showEmailModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Send Proposal Email\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Client Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:emailData.clientName,onChange:e=>setEmailData(prev=>({...prev,clientName:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Enter client name\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Client Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:emailData.clientEmail,onChange:e=>setEmailData(prev=>({...prev,clientEmail:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Enter client email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Subject *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:emailData.subject,onChange:e=>setEmailData(prev=>({...prev,subject:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Enter email subject\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Message *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:emailData.message,onChange:e=>setEmailData(prev=>({...prev,message:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]\",placeholder:\"Enter your message\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSendEmail,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex-1\",children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-4 w-4 inline mr-1\"}),\"Send Email\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowEmailModal(false),className:\"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300\",children:\"Cancel\"})]})]})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900\",children:\"Generating proposal...\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","toast","ReactMarkdown","PaperAirplaneIcon","EnvelopeIcon","SparklesIcon","DocumentArrowUpIcon","EyeIcon","PencilIcon","generateProposalSuggestions","sendProposalEmail","getOpenRouterChatCompletion","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","inputText","setInputText","selectedFile","setSelectedFile","generatedContent","setGeneratedContent","showContent","setShowContent","loading","setLoading","suggestions","setSuggestions","selectedSuggestions","setSelectedSuggestions","showEmailModal","setShowEmailModal","emailData","setEmailData","to","clientName","clientEmail","subject","message","previewMode","setPreviewMode","editableContent","setEditableContent","loadSuggestions","newSuggestions","error","console","handleFileChange","event","_event$target$files","file","target","files","type","success","handleGenerateWithAI","trim","log","name","prompt","messages","role","content","response","choices","aiContent","length","cleanContent","replace","cleanedContent","handleSuggestionClick","suggestion","includes","id","filter","handleSendEmail","handleClear","handleSaveAsDraft","contentToSave","token","localStorage","getItem","fetch","method","headers","body","JSON","stringify","title","status","ok","Error","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","value","onChange","e","placeholder","rows","htmlFor","accept","slice","map","onClick","disabled","prev","required"],"sources":["/Users/davnishsingh/Documents/proposalai-main/proposalai/client/src/pages/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { toast } from 'react-hot-toast';\nimport ReactMarkdown from 'react-markdown';\nimport {\n  PaperAirplaneIcon,\n  EnvelopeIcon,\n  SparklesIcon,\n  DocumentArrowUpIcon,\n  EyeIcon,\n  PencilIcon\n} from '@heroicons/react/24/outline';\nimport { generateProposalSuggestions } from '../services/aiService';\nimport { sendProposalEmail } from '../services/emailService';\nimport { getOpenRouterChatCompletion } from '../services/api';\n\ninterface Suggestion {\n  id: string;\n  title: string;\n  content: string;\n  category: string;\n}\n\ninterface EmailData {\n  to: string;\n  clientName: string;\n  clientEmail: string;\n  subject: string;\n  message: string;\n}\n\nexport default function Dashboard() {\n  const [inputText, setInputText] = useState('');\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [generatedContent, setGeneratedContent] = useState('');\n  const [showContent, setShowContent] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [suggestions, setSuggestions] = useState<Suggestion[]>([]);\n  const [selectedSuggestions, setSelectedSuggestions] = useState<string[]>([]);\n  const [showEmailModal, setShowEmailModal] = useState(false);\n  const [emailData, setEmailData] = useState<EmailData>({\n    to: '',\n    clientName: '',\n    clientEmail: '',\n    subject: '',\n    message: ''\n  });\n  const [previewMode, setPreviewMode] = useState(false);\n  const [editableContent, setEditableContent] = useState('');\n\n  useEffect(() => {\n    loadSuggestions();\n  }, []);\n\n  const loadSuggestions = async () => {\n    try {\n      const newSuggestions = await generateProposalSuggestions();\n      setSuggestions(newSuggestions);\n    } catch (error) {\n      console.error('Failed to load suggestions:', error);\n    }\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file && file.type === 'application/pdf') {\n      setSelectedFile(file);\n      toast.success('PDF file selected successfully!');\n    } else if (file) {\n      toast.error('Please select a PDF file');\n    }\n  };\n\n  const handleGenerateWithAI = async () => {\n    if (!selectedFile && !inputText.trim()) {\n      toast.error('Please enter some text or upload a PDF file');\n      return;\n    }\n\n    setLoading(true);\n    console.log('ðŸš€ Dashboard AI generation started!');\n    \n    try {\n      console.log('ðŸ“ Input text:', inputText);\n      console.log('ðŸ“„ Selected file:', selectedFile?.name);\n      \n      // Create the AI prompt based on input\n      const prompt = inputText.trim() || 'Generate a professional business proposal';\n      \n      const messages = [\n        {\n          role: 'system',\n          content: 'You are an expert business proposal writer with 15+ years of experience. Write detailed, specific, and professional proposal content. Never use generic placeholder text like \"Feature 1\" or \"Benefit 1\". Always provide concrete, actionable content with specific details, industry insights, and persuasive language.'\n        },\n        {\n          role: 'user',\n          content: `Create a comprehensive business proposal based on this information: ${prompt}\n\nPlease include these sections:\n\n# Executive Summary\n[Compelling overview of the project and its value]\n\n# Project Overview\n[Detailed analysis of requirements and objectives]\n\n# Our Approach & Methodology\n[Step-by-step methodology and processes]\n\n# Project Deliverables\nCreate a detailed list of specific deliverables with descriptions and timelines. Format as:\n- **Deliverable Name**: Brief description. Timeline: X weeks/days\n\n# Project Timeline\nCreate a detailed timeline with specific phases, dates, and milestones. Format exactly as:\n1. **Phase Name** (YYYY-MM-DD)\n   Description of what will be completed in this phase.\n\n2. **Phase Name** (YYYY-MM-DD)\n   Description of what will be completed in this phase.\n\n3. **Phase Name** (YYYY-MM-DD)\n   Description of what will be completed in this phase.\n\nIMPORTANT: Each timeline item must be on a new line with the number, then the phase name in bold, then the date in parentheses, then the description on the next line.\n\n# Investment & Pricing\n[Pricing structure and payment terms]\n\n# Why Choose Us\n[Experience, expertise, and competitive advantages]\n\n# Next Steps\n[Clear action items and contact information]\n\nIMPORTANT: \n- Write specific, detailed content for each section\n- Do not use generic text like \"Feature 1\"\n- Make it professional, compelling, and tailored to the project description\n- Include realistic timelines and deliverables based on the project scope\n- Use specific dates and milestones for the timeline section`\n        }\n      ];\n\n      console.log('ðŸŒ Sending request to OpenRouter...');\n      const response = await getOpenRouterChatCompletion(messages);\n      \n      console.log('âœ… AI response received:', response);\n      \n      if (response && response.choices && response.choices[0] && response.choices[0].message) {\n        const aiContent = response.choices[0].message.content;\n        console.log('ðŸ“ AI generated content length:', aiContent.length);\n        \n        const cleanContent = (content: string) => {\n          return content\n            .replace(/```markdown/g, '')\n            .replace(/```/g, '')\n            .trim();\n        };\n\n        const cleanedContent = cleanContent(aiContent);\n        console.log('ðŸ§¹ Content cleaned and ready');\n        \n        setGeneratedContent(cleanedContent);\n        setShowContent(true);\n        toast.success('Proposal generated successfully!');\n      } else {\n        console.error('âŒ Invalid response structure:', response);\n        toast.error('Invalid response from AI service');\n      }\n    } catch (error) {\n      console.error('âŒ Error generating content:', error);\n      toast.error('Failed to generate proposal. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSuggestionClick = (suggestion: Suggestion) => {\n    if (selectedSuggestions.includes(suggestion.id)) {\n      setSelectedSuggestions(selectedSuggestions.filter(id => id !== suggestion.id));\n    } else {\n      setSelectedSuggestions([...selectedSuggestions, suggestion.id]);\n    }\n  };\n\n  const handleSendEmail = async () => {\n    try {\n      await sendProposalEmail({\n        to: emailData.clientEmail,\n        clientName: emailData.clientName,\n        clientEmail: emailData.clientEmail,\n        subject: emailData.subject,\n        message: emailData.message\n      });\n      toast.success('Email sent successfully!');\n      setShowEmailModal(false);\n    } catch (error) {\n      toast.error('Failed to send email');\n    }\n  };\n\n  const handleClear = () => {\n    setInputText('');\n    setSelectedFile(null);\n    setGeneratedContent('');\n    setEditableContent('');\n    setShowContent(false);\n    setSelectedSuggestions([]);\n    setPreviewMode(false);\n  };\n\n  const handleSaveAsDraft = async () => {\n    const contentToSave = editableContent || generatedContent;\n    if (!contentToSave.trim()) {\n      toast.error('No content to save');\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        toast.error('Please log in to save drafts');\n        return;\n      }\n\n      const response = await fetch('/api/proposals', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          title: 'Draft Proposal',\n          content: contentToSave,\n          status: 'DRAFT'\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to save draft');\n      }\n\n      toast.success('Draft saved successfully!');\n      \n      // Optionally redirect to the draft or clear the form\n      setShowContent(false);\n      setGeneratedContent('');\n      setEditableContent('');\n      setInputText('');\n      setSelectedFile(null);\n      setSelectedSuggestions([]);\n      setPreviewMode(false);\n    } catch (error) {\n      console.error('Error saving draft:', error);\n      toast.error('Failed to save draft');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50\">\n      {/* Main Content */}\n      <div className=\"max-w-5xl mx-auto px-6 py-12\">\n        {/* Header */}\n        <div className=\"text-center mb-16 animate-fade-in-up\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl shadow-lg mb-6\">\n            <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n            </svg>\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-4 tracking-tight\">\n            Create your next winning proposal\n          </h1>\n          <p className=\"text-base text-gray-600 max-w-2xl mx-auto leading-relaxed\">\n            Transform your ideas into compelling proposals with AI-powered assistance\n          </p>\n        </div>\n\n        {/* Input Area */}\n        <div className=\"card-elevated p-6 mb-8 animate-fade-in-up\">\n          <div className=\"relative\">\n            <textarea\n              value={inputText}\n              onChange={(e) => setInputText(e.target.value)}\n              className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none text-gray-900 placeholder-gray-400 font-medium shadow-sm focus:shadow-md transition-all duration-200\"\n              placeholder=\"Describe your project, requirements, or ask ProposalAI to help you create a winning proposal...\"\n              rows={5}\n            />\n            \n            {/* PDF Upload inside textbox */}\n            <div className=\"absolute bottom-4 right-4\">\n              <label htmlFor=\"pdf-upload\" className=\"cursor-pointer\">\n                <div className=\"p-3 bg-gradient-to-r from-primary-50 to-primary-100 hover:from-primary-100 hover:to-primary-200 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md border border-primary-200\">\n                  <DocumentArrowUpIcon className=\"h-5 w-5 text-primary-600\" />\n                </div>\n              </label>\n              <input\n                id=\"pdf-upload\"\n                type=\"file\"\n                accept=\".pdf\"\n                onChange={handleFileChange}\n                className=\"hidden\"\n              />\n            </div>\n            \n            {selectedFile && (\n              <div className=\"mt-3 p-3 bg-gradient-to-r from-emerald-50 to-emerald-100 border border-emerald-200 rounded-xl flex items-center\">\n                <DocumentArrowUpIcon className=\"h-4 w-4 mr-2 text-emerald-600\" />\n                <span className=\"text-sm font-medium text-emerald-700\">{selectedFile.name}</span>\n              </div>\n            )}\n          </div>\n\n          {/* Suggestion Bubbles */}\n          {suggestions.length > 0 && (\n            <div className=\"mt-6\">\n              <div className=\"flex flex-wrap gap-3\">\n                {suggestions.slice(0, 6).map((suggestion) => (\n                  <button\n                    key={suggestion.id}\n                    onClick={() => handleSuggestionClick(suggestion)}\n                    className={`px-4 py-2.5 text-sm font-medium rounded-xl border-2 transition-all duration-200 shadow-sm hover:shadow-md ${\n                      selectedSuggestions.includes(suggestion.id)\n                        ? 'bg-gradient-to-r from-primary-100 to-primary-200 text-primary-800 border-primary-300 shadow-md'\n                        : 'bg-white text-gray-700 border-gray-200 hover:bg-gray-50 hover:border-gray-300'\n                    }`}\n                  >\n                    {suggestion.title}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Action Row */}\n          <div className=\"flex items-center justify-end mt-6\">\n            <button\n              onClick={handleGenerateWithAI}\n              disabled={(!selectedFile && !inputText.trim()) || loading}\n              className=\"btn-primary flex items-center space-x-3 px-8 py-3 text-base font-semibold\"\n            >\n              {loading ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\n                  <span>Generating...</span>\n                </>\n              ) : (\n                <>\n                  <SparklesIcon className=\"h-5 w-5\" />\n                  <span>Generate with AI</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Generated Content Display */}\n        {showContent && (\n          <div className=\"card-elevated p-6 animate-fade-in-up\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Generated Proposal</h2>\n              <div className=\"flex items-center space-x-4\">\n                <button\n                  onClick={() => setPreviewMode(!previewMode)}\n                  className=\"btn-secondary flex items-center gap-2\"\n                >\n                  {previewMode ? <PencilIcon className=\"w-4 h-4\" /> : <EyeIcon className=\"w-4 h-4\" />}\n                  {previewMode ? 'Edit Mode' : 'Preview Mode'}\n                </button>\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse\"></div>\n                  <span className=\"text-sm font-medium text-emerald-600\">AI Generated</span>\n                </div>\n              </div>\n            </div>\n            {previewMode ? (\n              <div className=\"prose prose-base max-w-none text-gray-700 mb-6 leading-relaxed\">\n                <div className=\"proposal-content\">\n                  <ReactMarkdown>{editableContent || generatedContent}</ReactMarkdown>\n                </div>\n              </div>\n            ) : (\n              <div className=\"mb-6\">\n                <textarea\n                  value={editableContent || generatedContent}\n                  onChange={(e) => setEditableContent(e.target.value)}\n                  rows={25}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none transition-all duration-200 bg-gray-50 font-mono text-sm leading-relaxed hover:bg-white\"\n                  placeholder=\"Edit your proposal content here...\"\n                />\n              </div>\n            )}\n            <div className=\"flex gap-4\">\n              <button \n                onClick={handleSaveAsDraft}\n                className=\"btn-primary flex items-center space-x-2\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\n                </svg>\n                <span>Save as Draft</span>\n              </button>\n              <button \n                onClick={() => setShowEmailModal(true)}\n                className=\"btn-secondary flex items-center space-x-2\"\n              >\n                <EnvelopeIcon className=\"h-5 w-5\" />\n                <span>Send Email</span>\n              </button>\n              <button\n                onClick={handleClear}\n                className=\"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors\"\n              >\n                Clear\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Email Modal */}\n      {showEmailModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Send Proposal Email</h2>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Client Name\n                </label>\n                <input\n                  type=\"text\"\n                  value={emailData.clientName}\n                  onChange={(e) => setEmailData(prev => ({ ...prev, clientName: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Enter client name\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Client Email *\n                </label>\n                <input\n                  type=\"email\"\n                  value={emailData.clientEmail}\n                  onChange={(e) => setEmailData(prev => ({ ...prev, clientEmail: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Enter client email\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Subject *\n                </label>\n                <input\n                  type=\"text\"\n                  value={emailData.subject}\n                  onChange={(e) => setEmailData(prev => ({ ...prev, subject: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"Enter email subject\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Message *\n                </label>\n                <textarea\n                  value={emailData.message}\n                  onChange={(e) => setEmailData(prev => ({ ...prev, message: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]\"\n                  placeholder=\"Enter your message\"\n                  required\n                />\n              </div>\n            </div>\n            \n            <div className=\"flex gap-3 mt-6\">\n              <button\n                onClick={handleSendEmail}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex-1\"\n              >\n                <PaperAirplaneIcon className=\"h-4 w-4 inline mr-1\" />\n                Send Email\n              </button>\n              <button\n                onClick={() => setShowEmailModal(false)}\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Loading Overlay */}\n      {loading && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 flex items-center space-x-3\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"></div>\n            <span className=\"text-gray-900\">Generating proposal...</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}