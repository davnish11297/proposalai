{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{toast}from'react-hot-toast';import{commentsAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Comments=_ref=>{let{proposalId,currentUser}=_ref;const[comments,setComments]=useState([]);const[loading,setLoading]=useState(true);const[submitting,setSubmitting]=useState(false);const[newComment,setNewComment]=useState('');const[editingComment,setEditingComment]=useState(null);const[editContent,setEditContent]=useState('');const[page,setPage]=useState(1);const[hasMore,setHasMore]=useState(true);const commentsEndRef=useRef(null);// Load comments\nconst loadComments=async function(){let pageNum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let append=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{setLoading(true);const response=await commentsAPI.getByProposal(proposalId,{page:pageNum,limit:10});if(response.data.success){const newComments=response.data.data;setComments(prev=>append?[...prev,...newComments]:newComments);setHasMore(response.data.pagination.page<response.data.pagination.totalPages);setPage(pageNum);}}catch(error){console.error('Failed to load comments:',error);toast.error('Failed to load comments');}finally{setLoading(false);}};// Load more comments\nconst loadMore=()=>{if(!loading&&hasMore){loadComments(page+1,true);}};// Submit new comment\nconst handleSubmitComment=async e=>{e.preventDefault();if(!newComment.trim())return;try{setSubmitting(true);const response=await commentsAPI.create(proposalId,{content:newComment.trim()});if(response.data.success){setComments(prev=>[response.data.data,...prev]);setNewComment('');toast.success('Comment added successfully');// Scroll to top to show new comment\nif(commentsEndRef.current){commentsEndRef.current.scrollIntoView({behavior:'smooth'});}}}catch(error){console.error('Failed to add comment:',error);toast.error('Failed to add comment');}finally{setSubmitting(false);}};// Start editing comment\nconst handleEditComment=comment=>{setEditingComment(comment.id);setEditContent(comment.content);};// Cancel editing\nconst handleCancelEdit=()=>{setEditingComment(null);setEditContent('');};// Submit edited comment\nconst handleSubmitEdit=async commentId=>{if(!editContent.trim())return;try{const response=await commentsAPI.update(commentId,{content:editContent.trim()});if(response.data.success){setComments(prev=>prev.map(comment=>comment.id===commentId?{...comment,content:editContent.trim(),updatedAt:new Date().toISOString()}:comment));setEditingComment(null);setEditContent('');toast.success('Comment updated successfully');}}catch(error){console.error('Failed to update comment:',error);toast.error('Failed to update comment');}};// Delete comment\nconst handleDeleteComment=async commentId=>{if(!window.confirm('Are you sure you want to delete this comment?'))return;try{const response=await commentsAPI.delete(commentId);if(response.data.success){setComments(prev=>prev.filter(comment=>comment.id!==commentId));toast.success('Comment deleted successfully');}}catch(error){console.error('Failed to delete comment:',error);toast.error('Failed to delete comment');}};// Format date\nconst formatDate=dateString=>{const date=new Date(dateString);const now=new Date();const diffInHours=(now.getTime()-date.getTime())/(1000*60*60);if(diffInHours<1){const diffInMinutes=Math.floor(diffInHours*60);return`${diffInMinutes} minute${diffInMinutes!==1?'s':''} ago`;}else if(diffInHours<24){const hours=Math.floor(diffInHours);return`${hours} hour${hours!==1?'s':''} ago`;}else if(diffInHours<168){// 7 days\nconst days=Math.floor(diffInHours/24);return`${days} day${days!==1?'s':''} ago`;}else{return date.toLocaleDateString();}};// Get user initials\nconst getUserInitials=(firstName,lastName)=>{return`${firstName.charAt(0)}${lastName.charAt(0)}`.toUpperCase();};// Get user avatar\nconst getUserAvatar=comment=>{if(comment.user.avatar){return/*#__PURE__*/_jsx(\"img\",{src:comment.user.avatar,alt:\"Avatar\",className:\"w-8 h-8 rounded-full\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold\",children:getUserInitials(comment.user.firstName,comment.user.lastName)});};useEffect(()=>{loadComments();},[proposalId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 flex items-center gap-2\",children:[\"\\uD83D\\uDCAC Comments (\",comments.length,\")\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Collaborate with your team on this proposal\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmitComment,className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[getUserAvatar({user:currentUser}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:\"Add a comment...\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\",rows:3,disabled:submitting}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Press Ctrl+Enter to submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!newComment.trim()||submitting,className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium\",children:submitting?'Posting...':'Post Comment'})]})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto\",children:loading&&comments.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"Loading comments...\"})]}):comments.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No comments yet. Be the first to comment!\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"divide-y divide-gray-100\",children:[comments.map(comment=>/*#__PURE__*/_jsx(\"div\",{className:\"p-6 hover:bg-gray-50 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[getUserAvatar(comment),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-gray-900\",children:[comment.user.firstName,\" \",comment.user.lastName]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:formatDate(comment.createdAt)}),comment.updatedAt!==comment.createdAt&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:\"(edited)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2\",children:comment.user.email===currentUser.email&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditComment(comment),className:\"text-xs text-gray-500 hover:text-blue-600 transition-colors\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteComment(comment.id),className:\"text-xs text-gray-500 hover:text-red-600 transition-colors\",children:\"Delete\"})]})})]}),editingComment===comment.id?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:editContent,onChange:e=>setEditContent(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\",rows:3}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSubmitEdit(comment.id),className:\"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancelEdit,className:\"px-3 py-1 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400\",children:\"Cancel\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700 whitespace-pre-wrap\",children:comment.content})]})]})},comment.id)),hasMore&&/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:loadMore,disabled:loading,className:\"px-4 py-2 text-blue-600 hover:text-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium\",children:loading?'Loading...':'Load More Comments'})}),/*#__PURE__*/_jsx(\"div\",{ref:commentsEndRef})]})})]});};export default Comments;","map":{"version":3,"names":["React","useState","useEffect","useRef","toast","commentsAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Comments","_ref","proposalId","currentUser","comments","setComments","loading","setLoading","submitting","setSubmitting","newComment","setNewComment","editingComment","setEditingComment","editContent","setEditContent","page","setPage","hasMore","setHasMore","commentsEndRef","loadComments","pageNum","arguments","length","undefined","append","response","getByProposal","limit","data","success","newComments","prev","pagination","totalPages","error","console","loadMore","handleSubmitComment","e","preventDefault","trim","create","content","current","scrollIntoView","behavior","handleEditComment","comment","id","handleCancelEdit","handleSubmitEdit","commentId","update","map","updatedAt","Date","toISOString","handleDeleteComment","window","confirm","delete","filter","formatDate","dateString","date","now","diffInHours","getTime","diffInMinutes","Math","floor","hours","days","toLocaleDateString","getUserInitials","firstName","lastName","charAt","toUpperCase","getUserAvatar","user","avatar","src","alt","className","children","onSubmit","value","onChange","target","placeholder","rows","disabled","type","createdAt","email","onClick","ref"],"sources":["/Users/davnishsingh/Documents/proposalai-main/client/src/components/Comments.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { toast } from 'react-hot-toast';\nimport { commentsAPI } from '../services/api';\n\ninterface Comment {\n  id: string;\n  content: string;\n  position?: any;\n  createdAt: string;\n  updatedAt: string;\n  user: {\n    firstName: string;\n    lastName: string;\n    email: string;\n    avatar?: string;\n  };\n}\n\ninterface CommentsProps {\n  proposalId: string;\n  currentUser: {\n    firstName: string;\n    lastName: string;\n    email: string;\n    avatar?: string;\n  };\n}\n\nconst Comments: React.FC<CommentsProps> = ({ proposalId, currentUser }) => {\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [newComment, setNewComment] = useState('');\n  const [editingComment, setEditingComment] = useState<string | null>(null);\n  const [editContent, setEditContent] = useState('');\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const commentsEndRef = useRef<HTMLDivElement>(null);\n\n  // Load comments\n  const loadComments = async (pageNum = 1, append = false) => {\n    try {\n      setLoading(true);\n      const response = await commentsAPI.getByProposal(proposalId, { page: pageNum, limit: 10 });\n      \n      if (response.data.success) {\n        const newComments = response.data.data;\n        setComments(prev => append ? [...prev, ...newComments] : newComments);\n        setHasMore(response.data.pagination.page < response.data.pagination.totalPages);\n        setPage(pageNum);\n      }\n    } catch (error) {\n      console.error('Failed to load comments:', error);\n      toast.error('Failed to load comments');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load more comments\n  const loadMore = () => {\n    if (!loading && hasMore) {\n      loadComments(page + 1, true);\n    }\n  };\n\n  // Submit new comment\n  const handleSubmitComment = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newComment.trim()) return;\n\n    try {\n      setSubmitting(true);\n      const response = await commentsAPI.create(proposalId, { content: newComment.trim() });\n      \n      if (response.data.success) {\n        setComments(prev => [response.data.data, ...prev]);\n        setNewComment('');\n        toast.success('Comment added successfully');\n        \n        // Scroll to top to show new comment\n        if (commentsEndRef.current) {\n          commentsEndRef.current.scrollIntoView({ behavior: 'smooth' });\n        }\n      }\n    } catch (error) {\n      console.error('Failed to add comment:', error);\n      toast.error('Failed to add comment');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Start editing comment\n  const handleEditComment = (comment: Comment) => {\n    setEditingComment(comment.id);\n    setEditContent(comment.content);\n  };\n\n  // Cancel editing\n  const handleCancelEdit = () => {\n    setEditingComment(null);\n    setEditContent('');\n  };\n\n  // Submit edited comment\n  const handleSubmitEdit = async (commentId: string) => {\n    if (!editContent.trim()) return;\n\n    try {\n      const response = await commentsAPI.update(commentId, { content: editContent.trim() });\n      \n      if (response.data.success) {\n        setComments(prev => \n          prev.map(comment => \n            comment.id === commentId \n              ? { ...comment, content: editContent.trim(), updatedAt: new Date().toISOString() }\n              : comment\n          )\n        );\n        setEditingComment(null);\n        setEditContent('');\n        toast.success('Comment updated successfully');\n      }\n    } catch (error) {\n      console.error('Failed to update comment:', error);\n      toast.error('Failed to update comment');\n    }\n  };\n\n  // Delete comment\n  const handleDeleteComment = async (commentId: string) => {\n    if (!window.confirm('Are you sure you want to delete this comment?')) return;\n\n    try {\n      const response = await commentsAPI.delete(commentId);\n      \n      if (response.data.success) {\n        setComments(prev => prev.filter(comment => comment.id !== commentId));\n        toast.success('Comment deleted successfully');\n      }\n    } catch (error) {\n      console.error('Failed to delete comment:', error);\n      toast.error('Failed to delete comment');\n    }\n  };\n\n  // Format date\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n    \n    if (diffInHours < 1) {\n      const diffInMinutes = Math.floor(diffInHours * 60);\n      return `${diffInMinutes} minute${diffInMinutes !== 1 ? 's' : ''} ago`;\n    } else if (diffInHours < 24) {\n      const hours = Math.floor(diffInHours);\n      return `${hours} hour${hours !== 1 ? 's' : ''} ago`;\n    } else if (diffInHours < 168) { // 7 days\n      const days = Math.floor(diffInHours / 24);\n      return `${days} day${days !== 1 ? 's' : ''} ago`;\n    } else {\n      return date.toLocaleDateString();\n    }\n  };\n\n  // Get user initials\n  const getUserInitials = (firstName: string, lastName: string) => {\n    return `${firstName.charAt(0)}${lastName.charAt(0)}`.toUpperCase();\n  };\n\n  // Get user avatar\n  const getUserAvatar = (comment: Comment) => {\n    if (comment.user.avatar) {\n      return <img src={comment.user.avatar} alt=\"Avatar\" className=\"w-8 h-8 rounded-full\" />;\n    }\n    return (\n      <div className=\"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold\">\n        {getUserInitials(comment.user.firstName, comment.user.lastName)}\n      </div>\n    );\n  };\n\n  useEffect(() => {\n    loadComments();\n  }, [proposalId]);\n\n  return (\n    <div className=\"bg-white rounded-lg border border-gray-200\">\n      {/* Header */}\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <h3 className=\"text-lg font-semibold text-gray-900 flex items-center gap-2\">\n          ðŸ’¬ Comments ({comments.length})\n        </h3>\n        <p className=\"text-sm text-gray-600 mt-1\">\n          Collaborate with your team on this proposal\n        </p>\n      </div>\n\n      {/* Comment Form */}\n      <div className=\"p-6 border-b border-gray-200\">\n        <form onSubmit={handleSubmitComment} className=\"space-y-4\">\n          <div className=\"flex gap-3\">\n            {getUserAvatar({ user: currentUser } as Comment)}\n            <div className=\"flex-1\">\n              <textarea\n                value={newComment}\n                onChange={(e) => setNewComment(e.target.value)}\n                placeholder=\"Add a comment...\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                rows={3}\n                disabled={submitting}\n              />\n              <div className=\"flex justify-between items-center mt-2\">\n                <p className=\"text-xs text-gray-500\">\n                  Press Ctrl+Enter to submit\n                </p>\n                <button\n                  type=\"submit\"\n                  disabled={!newComment.trim() || submitting}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium\"\n                >\n                  {submitting ? 'Posting...' : 'Post Comment'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n\n      {/* Comments List */}\n      <div className=\"max-h-96 overflow-y-auto\">\n        {loading && comments.length === 0 ? (\n          <div className=\"p-6 text-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n            <p className=\"text-gray-500 mt-2\">Loading comments...</p>\n          </div>\n        ) : comments.length === 0 ? (\n          <div className=\"p-6 text-center\">\n            <p className=\"text-gray-500\">No comments yet. Be the first to comment!</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-100\">\n            {comments.map((comment) => (\n              <div key={comment.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\n                <div className=\"flex gap-3\">\n                  {getUserAvatar(comment)}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-medium text-gray-900\">\n                          {comment.user.firstName} {comment.user.lastName}\n                        </span>\n                        <span className=\"text-xs text-gray-500\">\n                          {formatDate(comment.createdAt)}\n                        </span>\n                        {comment.updatedAt !== comment.createdAt && (\n                          <span className=\"text-xs text-gray-400\">(edited)</span>\n                        )}\n                      </div>\n                      \n                      {/* Comment Actions */}\n                      <div className=\"flex items-center gap-2\">\n                        {comment.user.email === currentUser.email && (\n                          <>\n                            <button\n                              onClick={() => handleEditComment(comment)}\n                              className=\"text-xs text-gray-500 hover:text-blue-600 transition-colors\"\n                            >\n                              Edit\n                            </button>\n                            <button\n                              onClick={() => handleDeleteComment(comment.id)}\n                              className=\"text-xs text-gray-500 hover:text-red-600 transition-colors\"\n                            >\n                              Delete\n                            </button>\n                          </>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Comment Content */}\n                    {editingComment === comment.id ? (\n                      <div className=\"space-y-3\">\n                        <textarea\n                          value={editContent}\n                          onChange={(e) => setEditContent(e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                          rows={3}\n                        />\n                        <div className=\"flex gap-2\">\n                          <button\n                            onClick={() => handleSubmitEdit(comment.id)}\n                            className=\"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700\"\n                          >\n                            Save\n                          </button>\n                          <button\n                            onClick={handleCancelEdit}\n                            className=\"px-3 py-1 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400\"\n                          >\n                            Cancel\n                          </button>\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"text-gray-700 whitespace-pre-wrap\">\n                        {comment.content}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n            \n            {/* Load More */}\n            {hasMore && (\n              <div className=\"p-6 text-center\">\n                <button\n                  onClick={loadMore}\n                  disabled={loading}\n                  className=\"px-4 py-2 text-blue-600 hover:text-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium\"\n                >\n                  {loading ? 'Loading...' : 'Load More Comments'}\n                </button>\n              </div>\n            )}\n            \n            <div ref={commentsEndRef} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Comments; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}