{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import{Bars3Icon,XMarkIcon,HomeIcon,DocumentTextIcon,UsersIcon,MagnifyingGlassIcon,DocumentIcon,UserIcon,SparklesIcon,ChartBarIcon,PlusIcon}from'@heroicons/react/24/outline';import{useAuth}from'../hooks/useAuth';import NotificationBell from'./NotificationBell';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Layout(_ref){var _user$firstName,_user$email;let{children}=_ref;const{user,logout}=useAuth();const location=useLocation();const navigate=useNavigate();const[sidebarOpen,setSidebarOpen]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[isSearching,setIsSearching]=useState(false);const[showSearchResults,setShowSearchResults]=useState(false);const[stats,setStats]=useState({successRate:0,activeProposals:0});const handleLogout=()=>{logout();};const fetchStats=async()=>{try{const token=localStorage.getItem('token');if(!token)return;const headers={'Authorization':`Bearer ${token}`};// Fetch all proposals to calculate stats\nconst proposalsRes=await fetch('/api/proposals',{headers});if(proposalsRes.ok){const proposalsData=await proposalsRes.json();const proposals=proposalsData.data||proposalsData;// Calculate active proposals (drafts + sent)\nconst activeProposals=proposals.filter(proposal=>proposal.status==='DRAFT'||proposal.status==='SENT').length;// Calculate success rate (sent proposals / total proposals)\nconst totalProposals=proposals.length;const sentProposals=proposals.filter(proposal=>proposal.status==='SENT').length;const successRate=totalProposals>0?Math.round(sentProposals/totalProposals*100):0;setStats({successRate,activeProposals});}}catch(error){console.error('Failed to fetch stats:',error);}};const isActive=href=>{return location.pathname===href;};const navigation=[{name:'Dashboard',href:'/dashboard',icon:HomeIcon,type:'nav'},{name:'Create Proposal',href:'/proposals/new',icon:PlusIcon,type:'action'},{name:'Proposals',href:'/drafts',icon:DocumentTextIcon,type:'nav'},{name:'Clients',href:'/clients',icon:UsersIcon,type:'nav'}];// Search functionality\nconst performSearch=async query=>{if(!query.trim()){setSearchResults([]);return;}setIsSearching(true);try{const token=localStorage.getItem('token');const headers={};if(token){headers['Authorization']=`Bearer ${token}`;}const[proposalsRes,clientsRes]=await Promise.all([fetch(`/api/proposals?search=${encodeURIComponent(query)}`,{headers}),fetch(`/api/clients?search=${encodeURIComponent(query)}`,{headers})]);const proposalsData=proposalsRes.ok?await proposalsRes.json():{data:[]};const clientsData=clientsRes.ok?await clientsRes.json():{data:[]};const proposals=proposalsData.data||proposalsData;const clients=clientsData.data||clientsData;const results=[...proposals.map(proposal=>{var _proposal$client;return{id:proposal.id,type:'proposal',title:proposal.title||'Untitled Proposal',subtitle:((_proposal$client=proposal.client)===null||_proposal$client===void 0?void 0:_proposal$client.name)||proposal.clientName||'No client assigned',href:`/proposals/${proposal.id}`};}),...clients.map(client=>({id:client.id,type:'client',title:client.name,subtitle:client.email,href:`/clients/${client.id}`}))];console.log('Search results:',results);console.log('Search query:',query);console.log('Show search results:',showSearchResults);setSearchResults(results.slice(0,8));// Limit to 8 results\n}catch(error){console.error('Search error:',error);setSearchResults([]);}finally{setIsSearching(false);}};useEffect(()=>{const timeoutId=setTimeout(()=>{performSearch(searchQuery);},300);return()=>clearTimeout(timeoutId);},[searchQuery,performSearch]);useEffect(()=>{fetchStats();},[]);const handleSearchResultClick=result=>{navigate(result.href);setSearchQuery('');setShowSearchResults(false);};const handleSearchFocus=()=>{if(searchResults.length>0){setShowSearchResults(true);}};const handleSearchChange=e=>{const value=e.target.value;setSearchQuery(value);if(value.trim()){setShowSearchResults(true);}else{setShowSearchResults(false);}};const handleSearchBlur=()=>{// Delay hiding results to allow clicking on them\nsetTimeout(()=>setShowSearchResults(false),200);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`fixed inset-0 z-50 lg:hidden ${sidebarOpen?'block':'hidden'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-75\",onClick:()=>setSidebarOpen(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-y-0 left-0 flex w-64 flex-col bg-gray-50 shadow-xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-6 py-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gray-900 rounded-xl flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-5 w-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold text-gray-900 tracking-tight\",children:\"ProposalAI\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Smart Proposal Engine\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(false),className:\"p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-colors focus-ring\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4\",children:\"NAVIGATION\"}),/*#__PURE__*/_jsx(\"nav\",{className:\"space-y-2\",children:navigation.map(item=>{const Icon=item.icon;if(item.type==='action'){return/*#__PURE__*/_jsxs(Link,{to:item.href,className:\"flex items-center px-4 py-3 bg-gray-900 text-white rounded-xl font-medium transition-all duration-200 hover:bg-gray-800 shadow-sm\",onClick:()=>setSidebarOpen(false),children:[/*#__PURE__*/_jsx(SparklesIcon,{className:\"mr-3 h-5 w-5\"}),item.name]},item.name);}return/*#__PURE__*/_jsxs(Link,{to:item.href,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${isActive(item.href)?'bg-white text-gray-900 shadow-sm border border-gray-200':'text-gray-600 hover:bg-white hover:text-gray-900 hover:shadow-sm'}`,onClick:()=>setSidebarOpen(false),children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-3 h-5 w-5\"}),item.name]},item.name);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4\",children:\"QUICK STATS\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 rounded-xl p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ChartBarIcon,{className:\"h-5 w-5 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:\"Success Rate\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[stats.successRate,\"%\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 rounded-xl p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-5 w-5 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:\"Active\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:stats.activeProposals})]})]})})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-grow bg-gray-50 shadow-xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center px-6 py-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gray-900 rounded-xl flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(SparklesIcon,{className:\"h-5 w-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-bold text-gray-900 tracking-tight\",children:\"ProposalAI\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Smart Proposal Engine\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4\",children:\"NAVIGATION\"}),/*#__PURE__*/_jsx(\"nav\",{className:\"space-y-2\",children:navigation.map(item=>{const Icon=item.icon;if(item.type==='action'){return/*#__PURE__*/_jsxs(Link,{to:item.href,className:\"flex items-center px-4 py-3 bg-gray-900 text-white rounded-xl font-medium transition-all duration-200 hover:bg-gray-800 shadow-sm\",children:[/*#__PURE__*/_jsx(SparklesIcon,{className:\"mr-3 h-5 w-5\"}),item.name]},item.name);}return/*#__PURE__*/_jsxs(Link,{to:item.href,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${isActive(item.href)?'bg-white text-gray-900 shadow-sm border border-gray-200':'text-gray-600 hover:bg-white hover:text-gray-900 hover:shadow-sm'}`,children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-3 h-5 w-5\"}),item.name]},item.name);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4\",children:\"QUICK STATS\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 rounded-xl p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ChartBarIcon,{className:\"h-5 w-5 text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:\"Success Rate\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-600\",children:[stats.successRate,\"%\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 rounded-xl p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-5 w-5 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:\"Active\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:stats.activeProposals})]})]})})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:ml-64\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sticky top-0 z-40 bg-white shadow-lg border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(true),className:\"lg:hidden p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-colors focus-ring\",children:/*#__PURE__*/_jsx(Bars3Icon,{className:\"h-6 w-6\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 max-w-xs ml-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-4 w-4 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full pl-8 pr-3 py-2 border border-gray-200 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm transition-all duration-200 shadow-sm focus:shadow-md\",placeholder:\"Search proposals, clients...\",type:\"search\",value:searchQuery,onChange:handleSearchChange,onFocus:handleSearchFocus,onBlur:handleSearchBlur}),isSearching&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 pr-2 flex items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-3 w-3 border-b border-gray-400\"})})]}),showSearchResults&&searchQuery.trim()&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-64 overflow-y-auto min-w-full\",children:searchResults.length>0?searchResults.map(result=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleSearchResultClick(result),className:\"w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center space-x-3 border-b border-gray-100 last:border-b-0\",children:[result.type==='proposal'?/*#__PURE__*/_jsx(DocumentIcon,{className:\"h-4 w-4 text-blue-500 flex-shrink-0\"}):/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4 text-green-500 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900 truncate\",children:result.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 truncate\",children:result.subtitle})]})]},`${result.type}-${result.id}`)):/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 text-sm text-gray-500\",children:isSearching?'Searching...':'No results found'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 ml-auto mr-4\",children:[/*#__PURE__*/_jsx(NotificationBell,{}),/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-white\",children:(user===null||user===void 0?void 0:(_user$firstName=user.firstName)===null||_user$firstName===void 0?void 0:_user$firstName.charAt(0))||(user===null||user===void 0?void 0:(_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.charAt(0))||'U'})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden md:block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold text-gray-900\",children:user!==null&&user!==void 0&&user.firstName&&user!==null&&user!==void 0&&user.lastName?`${user.firstName} ${user.lastName}`:user!==null&&user!==void 0&&user.firstName?user.firstName:(user===null||user===void 0?void 0:user.email)||'User'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 font-medium\",children:user===null||user===void 0?void 0:user.email})]})]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"p-2 rounded-xl text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-all duration-200 focus-ring\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Logout\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"})})]})]})]})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-1\",children:children})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","useNavigate","Bars3Icon","XMarkIcon","HomeIcon","DocumentTextIcon","UsersIcon","MagnifyingGlassIcon","DocumentIcon","UserIcon","SparklesIcon","ChartBarIcon","PlusIcon","useAuth","NotificationBell","jsx","_jsx","jsxs","_jsxs","Layout","_ref","_user$firstName","_user$email","children","user","logout","location","navigate","sidebarOpen","setSidebarOpen","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","showSearchResults","setShowSearchResults","stats","setStats","successRate","activeProposals","handleLogout","fetchStats","token","localStorage","getItem","headers","proposalsRes","fetch","ok","proposalsData","json","proposals","data","filter","proposal","status","length","totalProposals","sentProposals","Math","round","error","console","isActive","href","pathname","navigation","name","icon","type","performSearch","query","trim","clientsRes","Promise","all","encodeURIComponent","clientsData","clients","results","map","_proposal$client","id","title","subtitle","client","clientName","email","log","slice","timeoutId","setTimeout","clearTimeout","handleSearchResultClick","result","handleSearchFocus","handleSearchChange","e","value","target","handleSearchBlur","className","onClick","item","Icon","to","placeholder","onChange","onFocus","onBlur","firstName","charAt","lastName","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["/Users/davnishsingh/Documents/proposalai-main/proposalai/client/src/components/Layout.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport { \n  Bars3Icon, \n  XMarkIcon, \n  HomeIcon, \n  DocumentTextIcon, \n  PaperAirplaneIcon, \n  UsersIcon,\n  MagnifyingGlassIcon,\n  DocumentIcon,\n  UserIcon,\n  SparklesIcon,\n  ChartBarIcon,\n  PlusIcon\n} from '@heroicons/react/24/outline';\nimport { useAuth } from '../hooks/useAuth';\nimport NotificationBell from './NotificationBell';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\ninterface SearchResult {\n  id: string;\n  type: 'proposal' | 'client';\n  title: string;\n  subtitle: string;\n  href: string;\n}\n\nexport default function Layout({ children }: LayoutProps) {\n  const { user, logout } = useAuth();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [stats, setStats] = useState({\n    successRate: 0,\n    activeProposals: 0\n  });\n\n  const handleLogout = () => {\n    logout();\n  };\n\n  const fetchStats = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n\n      const headers: HeadersInit = {\n        'Authorization': `Bearer ${token}`\n      };\n\n      // Fetch all proposals to calculate stats\n      const proposalsRes = await fetch('/api/proposals', { headers });\n      if (proposalsRes.ok) {\n        const proposalsData = await proposalsRes.json();\n        const proposals = proposalsData.data || proposalsData;\n\n        // Calculate active proposals (drafts + sent)\n        const activeProposals = proposals.filter((proposal: any) => \n          proposal.status === 'DRAFT' || proposal.status === 'SENT'\n        ).length;\n\n        // Calculate success rate (sent proposals / total proposals)\n        const totalProposals = proposals.length;\n        const sentProposals = proposals.filter((proposal: any) => \n          proposal.status === 'SENT'\n        ).length;\n        \n        const successRate = totalProposals > 0 ? Math.round((sentProposals / totalProposals) * 100) : 0;\n\n        setStats({\n          successRate,\n          activeProposals\n        });\n      }\n    } catch (error) {\n      console.error('Failed to fetch stats:', error);\n    }\n  };\n\n  const isActive = (href: string) => {\n    return location.pathname === href;\n  };\n\n  const navigation = [\n    { name: 'Dashboard', href: '/dashboard', icon: HomeIcon, type: 'nav' },\n    { name: 'Create Proposal', href: '/proposals/new', icon: PlusIcon, type: 'action' },\n    { name: 'Proposals', href: '/drafts', icon: DocumentTextIcon, type: 'nav' },\n    { name: 'Clients', href: '/clients', icon: UsersIcon, type: 'nav' },\n  ];\n\n  // Search functionality\n  const performSearch = async (query: string) => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      return;\n    }\n\n    setIsSearching(true);\n    try {\n      const token = localStorage.getItem('token');\n      const headers: HeadersInit = {};\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n\n      const [proposalsRes, clientsRes] = await Promise.all([\n        fetch(`/api/proposals?search=${encodeURIComponent(query)}`, { headers }),\n        fetch(`/api/clients?search=${encodeURIComponent(query)}`, { headers })\n      ]);\n\n      const proposalsData = proposalsRes.ok ? await proposalsRes.json() : { data: [] };\n      const clientsData = clientsRes.ok ? await clientsRes.json() : { data: [] };\n\n      const proposals = proposalsData.data || proposalsData;\n      const clients = clientsData.data || clientsData;\n\n      const results: SearchResult[] = [\n        ...proposals.map((proposal: any) => ({\n          id: proposal.id,\n          type: 'proposal' as const,\n          title: proposal.title || 'Untitled Proposal',\n          subtitle: proposal.client?.name || proposal.clientName || 'No client assigned',\n          href: `/proposals/${proposal.id}`\n        })),\n        ...clients.map((client: any) => ({\n          id: client.id,\n          type: 'client' as const,\n          title: client.name,\n          subtitle: client.email,\n          href: `/clients/${client.id}`\n        }))\n      ];\n\n      console.log('Search results:', results);\n      console.log('Search query:', query);\n      console.log('Show search results:', showSearchResults);\n      setSearchResults(results.slice(0, 8)); // Limit to 8 results\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      performSearch(searchQuery);\n    }, 300);\n\n    return () => clearTimeout(timeoutId);\n  }, [searchQuery, performSearch]);\n\n  useEffect(() => {\n    fetchStats();\n  }, []);\n\n  const handleSearchResultClick = (result: SearchResult) => {\n    navigate(result.href);\n    setSearchQuery('');\n    setShowSearchResults(false);\n  };\n\n  const handleSearchFocus = () => {\n    if (searchResults.length > 0) {\n      setShowSearchResults(true);\n    }\n  };\n\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setSearchQuery(value);\n    if (value.trim()) {\n      setShowSearchResults(true);\n    } else {\n      setShowSearchResults(false);\n    }\n  };\n\n  const handleSearchBlur = () => {\n    // Delay hiding results to allow clicking on them\n    setTimeout(() => setShowSearchResults(false), 200);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Mobile sidebar */}\n      <div className={`fixed inset-0 z-50 lg:hidden ${sidebarOpen ? 'block' : 'hidden'}`}>\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75\" onClick={() => setSidebarOpen(false)} />\n        <div className=\"fixed inset-y-0 left-0 flex w-64 flex-col bg-gray-50 shadow-xl\">\n          {/* Logo and App Title */}\n          <div className=\"flex items-center justify-between px-6 py-6 border-b border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"w-10 h-10 bg-gray-900 rounded-xl flex items-center justify-center shadow-lg\">\n                <SparklesIcon className=\"h-5 w-5 text-white\" />\n              </div>\n              <div className=\"ml-3\">\n                <h1 className=\"text-lg font-bold text-gray-900 tracking-tight\">ProposalAI</h1>\n                <p className=\"text-xs text-gray-500\">Smart Proposal Engine</p>\n              </div>\n            </div>\n            <button\n              onClick={() => setSidebarOpen(false)}\n              className=\"p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-colors focus-ring\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Navigation Section */}\n          <div className=\"px-6 py-6\">\n            <h3 className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4\">NAVIGATION</h3>\n            <nav className=\"space-y-2\">\n              {navigation.map((item) => {\n                const Icon = item.icon;\n                if (item.type === 'action') {\n                  return (\n                    <Link\n                      key={item.name}\n                      to={item.href}\n                      className=\"flex items-center px-4 py-3 bg-gray-900 text-white rounded-xl font-medium transition-all duration-200 hover:bg-gray-800 shadow-sm\"\n                      onClick={() => setSidebarOpen(false)}\n                    >\n                      <SparklesIcon className=\"mr-3 h-5 w-5\" />\n                      {item.name}\n                    </Link>\n                  );\n                }\n                return (\n                  <Link\n                    key={item.name}\n                    to={item.href}\n                    className={`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${\n                      isActive(item.href)\n                        ? 'bg-white text-gray-900 shadow-sm border border-gray-200'\n                        : 'text-gray-600 hover:bg-white hover:text-gray-900 hover:shadow-sm'\n                    }`}\n                    onClick={() => setSidebarOpen(false)}\n                  >\n                    <Icon className=\"mr-3 h-5 w-5\" />\n                    {item.name}\n                  </Link>\n                );\n              })}\n            </nav>\n          </div>\n\n          {/* Quick Stats Section */}\n          <div className=\"px-6 py-6 border-t border-gray-200\">\n            <h3 className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4\">QUICK STATS</h3>\n            <div className=\"space-y-3\">\n              <div className=\"bg-green-50 rounded-xl p-4\">\n                <div className=\"flex items-center\">\n                  <ChartBarIcon className=\"h-5 w-5 text-green-600\" />\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm font-medium text-gray-900\">Success Rate</p>\n                    <p className=\"text-2xl font-bold text-green-600\">{stats.successRate}%</p>\n                  </div>\n                </div>\n              </div>\n              <div className=\"bg-blue-50 rounded-xl p-4\">\n                <div className=\"flex items-center\">\n                  <DocumentTextIcon className=\"h-5 w-5 text-blue-600\" />\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm font-medium text-gray-900\">Active</p>\n                    <p className=\"text-2xl font-bold text-blue-600\">{stats.activeProposals}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Desktop sidebar */}\n      <div className=\"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col\">\n        <div className=\"flex flex-col flex-grow bg-gray-50 shadow-xl\">\n          {/* Logo and App Title */}\n          <div className=\"flex items-center px-6 py-6 border-b border-gray-200\">\n            <div className=\"flex items-center\">\n              <div className=\"w-10 h-10 bg-gray-900 rounded-xl flex items-center justify-center shadow-lg\">\n                <SparklesIcon className=\"h-5 w-5 text-white\" />\n              </div>\n              <div className=\"ml-3\">\n                <h1 className=\"text-lg font-bold text-gray-900 tracking-tight\">ProposalAI</h1>\n                <p className=\"text-xs text-gray-500\">Smart Proposal Engine</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Navigation Section */}\n          <div className=\"px-6 py-6\">\n            <h3 className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4\">NAVIGATION</h3>\n            <nav className=\"space-y-2\">\n              {navigation.map((item) => {\n                const Icon = item.icon;\n                if (item.type === 'action') {\n                  return (\n                    <Link\n                      key={item.name}\n                      to={item.href}\n                      className=\"flex items-center px-4 py-3 bg-gray-900 text-white rounded-xl font-medium transition-all duration-200 hover:bg-gray-800 shadow-sm\"\n                    >\n                      <SparklesIcon className=\"mr-3 h-5 w-5\" />\n                      {item.name}\n                    </Link>\n                  );\n                }\n                return (\n                  <Link\n                    key={item.name}\n                    to={item.href}\n                    className={`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${\n                      isActive(item.href)\n                        ? 'bg-white text-gray-900 shadow-sm border border-gray-200'\n                        : 'text-gray-600 hover:bg-white hover:text-gray-900 hover:shadow-sm'\n                    }`}\n                  >\n                    <Icon className=\"mr-3 h-5 w-5\" />\n                    {item.name}\n                  </Link>\n                );\n              })}\n            </nav>\n          </div>\n\n          {/* Quick Stats Section */}\n          <div className=\"px-6 py-6 border-t border-gray-200\">\n            <h3 className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4\">QUICK STATS</h3>\n            <div className=\"space-y-3\">\n              <div className=\"bg-green-50 rounded-xl p-4\">\n                <div className=\"flex items-center\">\n                  <ChartBarIcon className=\"h-5 w-5 text-green-600\" />\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm font-medium text-gray-900\">Success Rate</p>\n                    <p className=\"text-2xl font-bold text-green-600\">{stats.successRate}%</p>\n                  </div>\n                </div>\n              </div>\n              <div className=\"bg-blue-50 rounded-xl p-4\">\n                <div className=\"flex items-center\">\n                  <DocumentTextIcon className=\"h-5 w-5 text-blue-600\" />\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm font-medium text-gray-900\">Active</p>\n                    <p className=\"text-2xl font-bold text-blue-600\">{stats.activeProposals}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main content area with left margin for sidebar */}\n      <div className=\"lg:ml-64\">\n        {/* Top bar */}\n        <div className=\"sticky top-0 z-40 bg-white shadow-lg border-b border-gray-200\">\n          <div className=\"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8\">\n            <button\n              onClick={() => setSidebarOpen(true)}\n              className=\"lg:hidden p-2 rounded-lg text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-colors focus-ring\"\n            >\n              <Bars3Icon className=\"h-6 w-6\" />\n            </button>\n\n            <div className=\"flex items-center justify-between w-full\">\n              {/* Smaller, less prominent search bar */}\n              <div className=\"flex-1 max-w-xs ml-4\">\n                <div className=\"relative\">\n                  <div className=\"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none\">\n                    <MagnifyingGlassIcon className=\"h-4 w-4 text-gray-400\" />\n                  </div>\n                  <input\n                    className=\"block w-full pl-8 pr-3 py-2 border border-gray-200 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm transition-all duration-200 shadow-sm focus:shadow-md\"\n                    placeholder=\"Search proposals, clients...\"\n                    type=\"search\"\n                    value={searchQuery}\n                    onChange={handleSearchChange}\n                    onFocus={handleSearchFocus}\n                    onBlur={handleSearchBlur}\n                  />\n                  {isSearching && (\n                    <div className=\"absolute inset-y-0 right-0 pr-2 flex items-center\">\n                      <div className=\"animate-spin rounded-full h-3 w-3 border-b border-gray-400\"></div>\n                    </div>\n                  )}\n                </div>\n\n                {/* Search results dropdown */}\n                {showSearchResults && searchQuery.trim() && (\n                  <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-64 overflow-y-auto min-w-full\">\n                    {searchResults.length > 0 ? (\n                      searchResults.map((result) => (\n                        <button\n                          key={`${result.type}-${result.id}`}\n                          onClick={() => handleSearchResultClick(result)}\n                          className=\"w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center space-x-3 border-b border-gray-100 last:border-b-0\"\n                        >\n                          {result.type === 'proposal' ? (\n                            <DocumentIcon className=\"h-4 w-4 text-blue-500 flex-shrink-0\" />\n                          ) : (\n                            <UserIcon className=\"h-4 w-4 text-green-500 flex-shrink-0\" />\n                          )}\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"text-sm font-medium text-gray-900 truncate\">\n                              {result.title}\n                            </div>\n                            <div className=\"text-xs text-gray-500 truncate\">\n                              {result.subtitle}\n                            </div>\n                          </div>\n                        </button>\n                      ))\n                    ) : (\n                      <div className=\"px-3 py-2 text-sm text-gray-500\">\n                        {isSearching ? 'Searching...' : 'No results found'}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Right side elements - notification bell, user info, and logout */}\n              <div className=\"flex items-center space-x-4 ml-auto mr-4\">\n                <NotificationBell />\n                \n                <div className=\"relative\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"h-10 w-10 rounded-xl bg-gradient-to-r from-primary-600 to-primary-700 flex items-center justify-center shadow-lg\">\n                        <span className=\"text-sm font-bold text-white\">\n                          {user?.firstName?.charAt(0) || user?.email?.charAt(0) || 'U'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"hidden md:block\">\n                      <div className=\"text-sm font-semibold text-gray-900\">\n                        {user?.firstName && user?.lastName \n                          ? `${user.firstName} ${user.lastName}`\n                          : user?.firstName \n                          ? user.firstName\n                          : user?.email || 'User'\n                        }\n                      </div>\n                      <div className=\"text-xs text-gray-500 font-medium\">{user?.email}</div>\n                    </div>\n                  </div>\n                </div>\n\n                <button\n                  onClick={handleLogout}\n                  className=\"p-2 rounded-xl text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-all duration-200 focus-ring\"\n                >\n                  <span className=\"sr-only\">Logout</span>\n                  <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Page content */}\n        <main className=\"flex-1\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n} "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CACjE,OACEC,SAAS,CACTC,SAAS,CACTC,QAAQ,CACRC,gBAAgB,CAEhBC,SAAS,CACTC,mBAAmB,CACnBC,YAAY,CACZC,QAAQ,CACRC,YAAY,CACZC,YAAY,CACZC,QAAQ,KACH,6BAA6B,CACpC,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAclD,cAAe,SAAS,CAAAC,MAAMA,CAAAC,IAAA,CAA4B,KAAAC,eAAA,CAAAC,WAAA,IAA3B,CAAEC,QAAsB,CAAC,CAAAH,IAAA,CACtD,KAAM,CAAEI,IAAI,CAAEC,MAAO,CAAC,CAAGZ,OAAO,CAAC,CAAC,CAClC,KAAM,CAAAa,QAAQ,CAAG1B,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAA2B,QAAQ,CAAG1B,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAC2B,WAAW,CAAEC,cAAc,CAAC,CAAGhC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACiC,WAAW,CAAEC,cAAc,CAAC,CAAGlC,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACmC,aAAa,CAAEC,gBAAgB,CAAC,CAAGpC,QAAQ,CAAiB,EAAE,CAAC,CACtE,KAAM,CAACqC,WAAW,CAAEC,cAAc,CAAC,CAAGtC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACuC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGxC,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAACyC,KAAK,CAAEC,QAAQ,CAAC,CAAG1C,QAAQ,CAAC,CACjC2C,WAAW,CAAE,CAAC,CACdC,eAAe,CAAE,CACnB,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBjB,MAAM,CAAC,CAAC,CACV,CAAC,CAED,KAAM,CAAAkB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,OAEZ,KAAM,CAAAG,OAAoB,CAAG,CAC3B,eAAe,CAAE,UAAUH,KAAK,EAClC,CAAC,CAED;AACA,KAAM,CAAAI,YAAY,CAAG,KAAM,CAAAC,KAAK,CAAC,gBAAgB,CAAE,CAAEF,OAAQ,CAAC,CAAC,CAC/D,GAAIC,YAAY,CAACE,EAAE,CAAE,CACnB,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAAH,YAAY,CAACI,IAAI,CAAC,CAAC,CAC/C,KAAM,CAAAC,SAAS,CAAGF,aAAa,CAACG,IAAI,EAAIH,aAAa,CAErD;AACA,KAAM,CAAAV,eAAe,CAAGY,SAAS,CAACE,MAAM,CAAEC,QAAa,EACrDA,QAAQ,CAACC,MAAM,GAAK,OAAO,EAAID,QAAQ,CAACC,MAAM,GAAK,MACrD,CAAC,CAACC,MAAM,CAER;AACA,KAAM,CAAAC,cAAc,CAAGN,SAAS,CAACK,MAAM,CACvC,KAAM,CAAAE,aAAa,CAAGP,SAAS,CAACE,MAAM,CAAEC,QAAa,EACnDA,QAAQ,CAACC,MAAM,GAAK,MACtB,CAAC,CAACC,MAAM,CAER,KAAM,CAAAlB,WAAW,CAAGmB,cAAc,CAAG,CAAC,CAAGE,IAAI,CAACC,KAAK,CAAEF,aAAa,CAAGD,cAAc,CAAI,GAAG,CAAC,CAAG,CAAC,CAE/FpB,QAAQ,CAAC,CACPC,WAAW,CACXC,eACF,CAAC,CAAC,CACJ,CACF,CAAE,MAAOsB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAE,QAAQ,CAAIC,IAAY,EAAK,CACjC,MAAO,CAAAxC,QAAQ,CAACyC,QAAQ,GAAKD,IAAI,CACnC,CAAC,CAED,KAAM,CAAAE,UAAU,CAAG,CACjB,CAAEC,IAAI,CAAE,WAAW,CAAEH,IAAI,CAAE,YAAY,CAAEI,IAAI,CAAElE,QAAQ,CAAEmE,IAAI,CAAE,KAAM,CAAC,CACtE,CAAEF,IAAI,CAAE,iBAAiB,CAAEH,IAAI,CAAE,gBAAgB,CAAEI,IAAI,CAAE1D,QAAQ,CAAE2D,IAAI,CAAE,QAAS,CAAC,CACnF,CAAEF,IAAI,CAAE,WAAW,CAAEH,IAAI,CAAE,SAAS,CAAEI,IAAI,CAAEjE,gBAAgB,CAAEkE,IAAI,CAAE,KAAM,CAAC,CAC3E,CAAEF,IAAI,CAAE,SAAS,CAAEH,IAAI,CAAE,UAAU,CAAEI,IAAI,CAAEhE,SAAS,CAAEiE,IAAI,CAAE,KAAM,CAAC,CACpE,CAED;AACA,KAAM,CAAAC,aAAa,CAAG,KAAO,CAAAC,KAAa,EAAK,CAC7C,GAAI,CAACA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAE,CACjBzC,gBAAgB,CAAC,EAAE,CAAC,CACpB,OACF,CAEAE,cAAc,CAAC,IAAI,CAAC,CACpB,GAAI,CACF,KAAM,CAAAS,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,OAAoB,CAAG,CAAC,CAAC,CAC/B,GAAIH,KAAK,CAAE,CACTG,OAAO,CAAC,eAAe,CAAC,CAAG,UAAUH,KAAK,EAAE,CAC9C,CAEA,KAAM,CAACI,YAAY,CAAE2B,UAAU,CAAC,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAAC,CACnD5B,KAAK,CAAC,yBAAyB6B,kBAAkB,CAACL,KAAK,CAAC,EAAE,CAAE,CAAE1B,OAAQ,CAAC,CAAC,CACxEE,KAAK,CAAC,uBAAuB6B,kBAAkB,CAACL,KAAK,CAAC,EAAE,CAAE,CAAE1B,OAAQ,CAAC,CAAC,CACvE,CAAC,CAEF,KAAM,CAAAI,aAAa,CAAGH,YAAY,CAACE,EAAE,CAAG,KAAM,CAAAF,YAAY,CAACI,IAAI,CAAC,CAAC,CAAG,CAAEE,IAAI,CAAE,EAAG,CAAC,CAChF,KAAM,CAAAyB,WAAW,CAAGJ,UAAU,CAACzB,EAAE,CAAG,KAAM,CAAAyB,UAAU,CAACvB,IAAI,CAAC,CAAC,CAAG,CAAEE,IAAI,CAAE,EAAG,CAAC,CAE1E,KAAM,CAAAD,SAAS,CAAGF,aAAa,CAACG,IAAI,EAAIH,aAAa,CACrD,KAAM,CAAA6B,OAAO,CAAGD,WAAW,CAACzB,IAAI,EAAIyB,WAAW,CAE/C,KAAM,CAAAE,OAAuB,CAAG,CAC9B,GAAG5B,SAAS,CAAC6B,GAAG,CAAE1B,QAAa,OAAA2B,gBAAA,OAAM,CACnCC,EAAE,CAAE5B,QAAQ,CAAC4B,EAAE,CACfb,IAAI,CAAE,UAAmB,CACzBc,KAAK,CAAE7B,QAAQ,CAAC6B,KAAK,EAAI,mBAAmB,CAC5CC,QAAQ,CAAE,EAAAH,gBAAA,CAAA3B,QAAQ,CAAC+B,MAAM,UAAAJ,gBAAA,iBAAfA,gBAAA,CAAiBd,IAAI,GAAIb,QAAQ,CAACgC,UAAU,EAAI,oBAAoB,CAC9EtB,IAAI,CAAE,cAAcV,QAAQ,CAAC4B,EAAE,EACjC,CAAC,EAAC,CAAC,CACH,GAAGJ,OAAO,CAACE,GAAG,CAAEK,MAAW,GAAM,CAC/BH,EAAE,CAAEG,MAAM,CAACH,EAAE,CACbb,IAAI,CAAE,QAAiB,CACvBc,KAAK,CAAEE,MAAM,CAAClB,IAAI,CAClBiB,QAAQ,CAAEC,MAAM,CAACE,KAAK,CACtBvB,IAAI,CAAE,YAAYqB,MAAM,CAACH,EAAE,EAC7B,CAAC,CAAC,CAAC,CACJ,CAEDpB,OAAO,CAAC0B,GAAG,CAAC,iBAAiB,CAAET,OAAO,CAAC,CACvCjB,OAAO,CAAC0B,GAAG,CAAC,eAAe,CAAEjB,KAAK,CAAC,CACnCT,OAAO,CAAC0B,GAAG,CAAC,sBAAsB,CAAEtD,iBAAiB,CAAC,CACtDH,gBAAgB,CAACgD,OAAO,CAACU,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAAE;AACzC,CAAE,MAAO5B,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACrC9B,gBAAgB,CAAC,EAAE,CAAC,CACtB,CAAC,OAAS,CACRE,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAEDrC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA8F,SAAS,CAAGC,UAAU,CAAC,IAAM,CACjCrB,aAAa,CAAC1C,WAAW,CAAC,CAC5B,CAAC,CAAE,GAAG,CAAC,CAEP,MAAO,IAAMgE,YAAY,CAACF,SAAS,CAAC,CACtC,CAAC,CAAE,CAAC9D,WAAW,CAAE0C,aAAa,CAAC,CAAC,CAEhC1E,SAAS,CAAC,IAAM,CACd6C,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAoD,uBAAuB,CAAIC,MAAoB,EAAK,CACxDrE,QAAQ,CAACqE,MAAM,CAAC9B,IAAI,CAAC,CACrBnC,cAAc,CAAC,EAAE,CAAC,CAClBM,oBAAoB,CAAC,KAAK,CAAC,CAC7B,CAAC,CAED,KAAM,CAAA4D,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,GAAIjE,aAAa,CAAC0B,MAAM,CAAG,CAAC,CAAE,CAC5BrB,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAA6D,kBAAkB,CAAIC,CAAsC,EAAK,CACrE,KAAM,CAAAC,KAAK,CAAGD,CAAC,CAACE,MAAM,CAACD,KAAK,CAC5BrE,cAAc,CAACqE,KAAK,CAAC,CACrB,GAAIA,KAAK,CAAC1B,IAAI,CAAC,CAAC,CAAE,CAChBrC,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,IAAM,CACLA,oBAAoB,CAAC,KAAK,CAAC,CAC7B,CACF,CAAC,CAED,KAAM,CAAAiE,gBAAgB,CAAGA,CAAA,GAAM,CAC7B;AACAT,UAAU,CAAC,IAAMxD,oBAAoB,CAAC,KAAK,CAAC,CAAE,GAAG,CAAC,CACpD,CAAC,CAED,mBACEnB,KAAA,QAAKqF,SAAS,CAAC,yBAAyB,CAAAhF,QAAA,eAEtCL,KAAA,QAAKqF,SAAS,CAAE,gCAAgC3E,WAAW,CAAG,OAAO,CAAG,QAAQ,EAAG,CAAAL,QAAA,eACjFP,IAAA,QAAKuF,SAAS,CAAC,yCAAyC,CAACC,OAAO,CAAEA,CAAA,GAAM3E,cAAc,CAAC,KAAK,CAAE,CAAE,CAAC,cACjGX,KAAA,QAAKqF,SAAS,CAAC,gEAAgE,CAAAhF,QAAA,eAE7EL,KAAA,QAAKqF,SAAS,CAAC,sEAAsE,CAAAhF,QAAA,eACnFL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,QAAKuF,SAAS,CAAC,6EAA6E,CAAAhF,QAAA,cAC1FP,IAAA,CAACN,YAAY,EAAC6F,SAAS,CAAC,oBAAoB,CAAE,CAAC,CAC5C,CAAC,cACNrF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAhF,QAAA,eACnBP,IAAA,OAAIuF,SAAS,CAAC,gDAAgD,CAAAhF,QAAA,CAAC,YAAU,CAAI,CAAC,cAC9EP,IAAA,MAAGuF,SAAS,CAAC,uBAAuB,CAAAhF,QAAA,CAAC,uBAAqB,CAAG,CAAC,EAC3D,CAAC,EACH,CAAC,cACNP,IAAA,WACEwF,OAAO,CAAEA,CAAA,GAAM3E,cAAc,CAAC,KAAK,CAAE,CACrC0E,SAAS,CAAC,iGAAiG,CAAAhF,QAAA,cAE3GP,IAAA,CAACb,SAAS,EAACoG,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,EACN,CAAC,cAGNrF,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAhF,QAAA,eACxBP,IAAA,OAAIuF,SAAS,CAAC,mEAAmE,CAAAhF,QAAA,CAAC,YAAU,CAAI,CAAC,cACjGP,IAAA,QAAKuF,SAAS,CAAC,WAAW,CAAAhF,QAAA,CACvB6C,UAAU,CAACc,GAAG,CAAEuB,IAAI,EAAK,CACxB,KAAM,CAAAC,IAAI,CAAGD,IAAI,CAACnC,IAAI,CACtB,GAAImC,IAAI,CAAClC,IAAI,GAAK,QAAQ,CAAE,CAC1B,mBACErD,KAAA,CAACnB,IAAI,EAEH4G,EAAE,CAAEF,IAAI,CAACvC,IAAK,CACdqC,SAAS,CAAC,mIAAmI,CAC7IC,OAAO,CAAEA,CAAA,GAAM3E,cAAc,CAAC,KAAK,CAAE,CAAAN,QAAA,eAErCP,IAAA,CAACN,YAAY,EAAC6F,SAAS,CAAC,cAAc,CAAE,CAAC,CACxCE,IAAI,CAACpC,IAAI,GANLoC,IAAI,CAACpC,IAON,CAAC,CAEX,CACA,mBACEnD,KAAA,CAACnB,IAAI,EAEH4G,EAAE,CAAEF,IAAI,CAACvC,IAAK,CACdqC,SAAS,CAAE,gGACTtC,QAAQ,CAACwC,IAAI,CAACvC,IAAI,CAAC,CACf,yDAAyD,CACzD,kEAAkE,EACrE,CACHsC,OAAO,CAAEA,CAAA,GAAM3E,cAAc,CAAC,KAAK,CAAE,CAAAN,QAAA,eAErCP,IAAA,CAAC0F,IAAI,EAACH,SAAS,CAAC,cAAc,CAAE,CAAC,CAChCE,IAAI,CAACpC,IAAI,GAVLoC,IAAI,CAACpC,IAWN,CAAC,CAEX,CAAC,CAAC,CACC,CAAC,EACH,CAAC,cAGNnD,KAAA,QAAKqF,SAAS,CAAC,oCAAoC,CAAAhF,QAAA,eACjDP,IAAA,OAAIuF,SAAS,CAAC,mEAAmE,CAAAhF,QAAA,CAAC,aAAW,CAAI,CAAC,cAClGL,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAhF,QAAA,eACxBP,IAAA,QAAKuF,SAAS,CAAC,4BAA4B,CAAAhF,QAAA,cACzCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,CAACL,YAAY,EAAC4F,SAAS,CAAC,wBAAwB,CAAE,CAAC,cACnDrF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAhF,QAAA,eACnBP,IAAA,MAAGuF,SAAS,CAAC,mCAAmC,CAAAhF,QAAA,CAAC,cAAY,CAAG,CAAC,cACjEL,KAAA,MAAGqF,SAAS,CAAC,mCAAmC,CAAAhF,QAAA,EAAEe,KAAK,CAACE,WAAW,CAAC,GAAC,EAAG,CAAC,EACtE,CAAC,EACH,CAAC,CACH,CAAC,cACNxB,IAAA,QAAKuF,SAAS,CAAC,2BAA2B,CAAAhF,QAAA,cACxCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,CAACX,gBAAgB,EAACkG,SAAS,CAAC,uBAAuB,CAAE,CAAC,cACtDrF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAhF,QAAA,eACnBP,IAAA,MAAGuF,SAAS,CAAC,mCAAmC,CAAAhF,QAAA,CAAC,QAAM,CAAG,CAAC,cAC3DP,IAAA,MAAGuF,SAAS,CAAC,kCAAkC,CAAAhF,QAAA,CAAEe,KAAK,CAACG,eAAe,CAAI,CAAC,EACxE,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,cAGNzB,IAAA,QAAKuF,SAAS,CAAC,0DAA0D,CAAAhF,QAAA,cACvEL,KAAA,QAAKqF,SAAS,CAAC,8CAA8C,CAAAhF,QAAA,eAE3DP,IAAA,QAAKuF,SAAS,CAAC,sDAAsD,CAAAhF,QAAA,cACnEL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,QAAKuF,SAAS,CAAC,6EAA6E,CAAAhF,QAAA,cAC1FP,IAAA,CAACN,YAAY,EAAC6F,SAAS,CAAC,oBAAoB,CAAE,CAAC,CAC5C,CAAC,cACNrF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAhF,QAAA,eACnBP,IAAA,OAAIuF,SAAS,CAAC,gDAAgD,CAAAhF,QAAA,CAAC,YAAU,CAAI,CAAC,cAC9EP,IAAA,MAAGuF,SAAS,CAAC,uBAAuB,CAAAhF,QAAA,CAAC,uBAAqB,CAAG,CAAC,EAC3D,CAAC,EACH,CAAC,CACH,CAAC,cAGNL,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAhF,QAAA,eACxBP,IAAA,OAAIuF,SAAS,CAAC,mEAAmE,CAAAhF,QAAA,CAAC,YAAU,CAAI,CAAC,cACjGP,IAAA,QAAKuF,SAAS,CAAC,WAAW,CAAAhF,QAAA,CACvB6C,UAAU,CAACc,GAAG,CAAEuB,IAAI,EAAK,CACxB,KAAM,CAAAC,IAAI,CAAGD,IAAI,CAACnC,IAAI,CACtB,GAAImC,IAAI,CAAClC,IAAI,GAAK,QAAQ,CAAE,CAC1B,mBACErD,KAAA,CAACnB,IAAI,EAEH4G,EAAE,CAAEF,IAAI,CAACvC,IAAK,CACdqC,SAAS,CAAC,mIAAmI,CAAAhF,QAAA,eAE7IP,IAAA,CAACN,YAAY,EAAC6F,SAAS,CAAC,cAAc,CAAE,CAAC,CACxCE,IAAI,CAACpC,IAAI,GALLoC,IAAI,CAACpC,IAMN,CAAC,CAEX,CACA,mBACEnD,KAAA,CAACnB,IAAI,EAEH4G,EAAE,CAAEF,IAAI,CAACvC,IAAK,CACdqC,SAAS,CAAE,gGACTtC,QAAQ,CAACwC,IAAI,CAACvC,IAAI,CAAC,CACf,yDAAyD,CACzD,kEAAkE,EACrE,CAAA3C,QAAA,eAEHP,IAAA,CAAC0F,IAAI,EAACH,SAAS,CAAC,cAAc,CAAE,CAAC,CAChCE,IAAI,CAACpC,IAAI,GATLoC,IAAI,CAACpC,IAUN,CAAC,CAEX,CAAC,CAAC,CACC,CAAC,EACH,CAAC,cAGNnD,KAAA,QAAKqF,SAAS,CAAC,oCAAoC,CAAAhF,QAAA,eACjDP,IAAA,OAAIuF,SAAS,CAAC,mEAAmE,CAAAhF,QAAA,CAAC,aAAW,CAAI,CAAC,cAClGL,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAhF,QAAA,eACxBP,IAAA,QAAKuF,SAAS,CAAC,4BAA4B,CAAAhF,QAAA,cACzCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,CAACL,YAAY,EAAC4F,SAAS,CAAC,wBAAwB,CAAE,CAAC,cACnDrF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAhF,QAAA,eACnBP,IAAA,MAAGuF,SAAS,CAAC,mCAAmC,CAAAhF,QAAA,CAAC,cAAY,CAAG,CAAC,cACjEL,KAAA,MAAGqF,SAAS,CAAC,mCAAmC,CAAAhF,QAAA,EAAEe,KAAK,CAACE,WAAW,CAAC,GAAC,EAAG,CAAC,EACtE,CAAC,EACH,CAAC,CACH,CAAC,cACNxB,IAAA,QAAKuF,SAAS,CAAC,2BAA2B,CAAAhF,QAAA,cACxCL,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAhF,QAAA,eAChCP,IAAA,CAACX,gBAAgB,EAACkG,SAAS,CAAC,uBAAuB,CAAE,CAAC,cACtDrF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAhF,QAAA,eACnBP,IAAA,MAAGuF,SAAS,CAAC,mCAAmC,CAAAhF,QAAA,CAAC,QAAM,CAAG,CAAC,cAC3DP,IAAA,MAAGuF,SAAS,CAAC,kCAAkC,CAAAhF,QAAA,CAAEe,KAAK,CAACG,eAAe,CAAI,CAAC,EACxE,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,cAGNvB,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eAEvBP,IAAA,QAAKuF,SAAS,CAAC,+DAA+D,CAAAhF,QAAA,cAC5EL,KAAA,QAAKqF,SAAS,CAAC,6DAA6D,CAAAhF,QAAA,eAC1EP,IAAA,WACEwF,OAAO,CAAEA,CAAA,GAAM3E,cAAc,CAAC,IAAI,CAAE,CACpC0E,SAAS,CAAC,2GAA2G,CAAAhF,QAAA,cAErHP,IAAA,CAACd,SAAS,EAACqG,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3B,CAAC,cAETrF,KAAA,QAAKqF,SAAS,CAAC,0CAA0C,CAAAhF,QAAA,eAEvDL,KAAA,QAAKqF,SAAS,CAAC,sBAAsB,CAAAhF,QAAA,eACnCL,KAAA,QAAKqF,SAAS,CAAC,UAAU,CAAAhF,QAAA,eACvBP,IAAA,QAAKuF,SAAS,CAAC,sEAAsE,CAAAhF,QAAA,cACnFP,IAAA,CAACT,mBAAmB,EAACgG,SAAS,CAAC,uBAAuB,CAAE,CAAC,CACtD,CAAC,cACNvF,IAAA,UACEuF,SAAS,CAAC,gRAAgR,CAC1RK,WAAW,CAAC,8BAA8B,CAC1CrC,IAAI,CAAC,QAAQ,CACb6B,KAAK,CAAEtE,WAAY,CACnB+E,QAAQ,CAAEX,kBAAmB,CAC7BY,OAAO,CAAEb,iBAAkB,CAC3Bc,MAAM,CAAET,gBAAiB,CAC1B,CAAC,CACDpE,WAAW,eACVlB,IAAA,QAAKuF,SAAS,CAAC,mDAAmD,CAAAhF,QAAA,cAChEP,IAAA,QAAKuF,SAAS,CAAC,4DAA4D,CAAM,CAAC,CAC/E,CACN,EACE,CAAC,CAGLnE,iBAAiB,EAAIN,WAAW,CAAC4C,IAAI,CAAC,CAAC,eACtC1D,IAAA,QAAKuF,SAAS,CAAC,qIAAqI,CAAAhF,QAAA,CACjJS,aAAa,CAAC0B,MAAM,CAAG,CAAC,CACvB1B,aAAa,CAACkD,GAAG,CAAEc,MAAM,eACvB9E,KAAA,WAEEsF,OAAO,CAAEA,CAAA,GAAMT,uBAAuB,CAACC,MAAM,CAAE,CAC/CO,SAAS,CAAC,kHAAkH,CAAAhF,QAAA,EAE3HyE,MAAM,CAACzB,IAAI,GAAK,UAAU,cACzBvD,IAAA,CAACR,YAAY,EAAC+F,SAAS,CAAC,qCAAqC,CAAE,CAAC,cAEhEvF,IAAA,CAACP,QAAQ,EAAC8F,SAAS,CAAC,sCAAsC,CAAE,CAC7D,cACDrF,KAAA,QAAKqF,SAAS,CAAC,gBAAgB,CAAAhF,QAAA,eAC7BP,IAAA,QAAKuF,SAAS,CAAC,4CAA4C,CAAAhF,QAAA,CACxDyE,MAAM,CAACX,KAAK,CACV,CAAC,cACNrE,IAAA,QAAKuF,SAAS,CAAC,gCAAgC,CAAAhF,QAAA,CAC5CyE,MAAM,CAACV,QAAQ,CACb,CAAC,EACH,CAAC,GAhBD,GAAGU,MAAM,CAACzB,IAAI,IAAIyB,MAAM,CAACZ,EAAE,EAiB1B,CACT,CAAC,cAEFpE,IAAA,QAAKuF,SAAS,CAAC,iCAAiC,CAAAhF,QAAA,CAC7CW,WAAW,CAAG,cAAc,CAAG,kBAAkB,CAC/C,CACN,CACE,CACN,EACE,CAAC,cAGNhB,KAAA,QAAKqF,SAAS,CAAC,0CAA0C,CAAAhF,QAAA,eACvDP,IAAA,CAACF,gBAAgB,GAAE,CAAC,cAEpBE,IAAA,QAAKuF,SAAS,CAAC,UAAU,CAAAhF,QAAA,cACvBL,KAAA,QAAKqF,SAAS,CAAC,6BAA6B,CAAAhF,QAAA,eAC1CP,IAAA,QAAKuF,SAAS,CAAC,eAAe,CAAAhF,QAAA,cAC5BP,IAAA,QAAKuF,SAAS,CAAC,kHAAkH,CAAAhF,QAAA,cAC/HP,IAAA,SAAMuF,SAAS,CAAC,8BAA8B,CAAAhF,QAAA,CAC3C,CAAAC,IAAI,SAAJA,IAAI,kBAAAH,eAAA,CAAJG,IAAI,CAAEwF,SAAS,UAAA3F,eAAA,iBAAfA,eAAA,CAAiB4F,MAAM,CAAC,CAAC,CAAC,IAAIzF,IAAI,SAAJA,IAAI,kBAAAF,WAAA,CAAJE,IAAI,CAAEiE,KAAK,UAAAnE,WAAA,iBAAXA,WAAA,CAAa2F,MAAM,CAAC,CAAC,CAAC,GAAI,GAAG,CACxD,CAAC,CACJ,CAAC,CACH,CAAC,cACN/F,KAAA,QAAKqF,SAAS,CAAC,iBAAiB,CAAAhF,QAAA,eAC9BP,IAAA,QAAKuF,SAAS,CAAC,qCAAqC,CAAAhF,QAAA,CACjDC,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEwF,SAAS,EAAIxF,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAE0F,QAAQ,CAC9B,GAAG1F,IAAI,CAACwF,SAAS,IAAIxF,IAAI,CAAC0F,QAAQ,EAAE,CACpC1F,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEwF,SAAS,CACfxF,IAAI,CAACwF,SAAS,CACd,CAAAxF,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEiE,KAAK,GAAI,MAAM,CAEtB,CAAC,cACNzE,IAAA,QAAKuF,SAAS,CAAC,mCAAmC,CAAAhF,QAAA,CAAEC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEiE,KAAK,CAAM,CAAC,EACnE,CAAC,EACH,CAAC,CACH,CAAC,cAENvE,KAAA,WACEsF,OAAO,CAAE9D,YAAa,CACtB6D,SAAS,CAAC,2GAA2G,CAAAhF,QAAA,eAErHP,IAAA,SAAMuF,SAAS,CAAC,SAAS,CAAAhF,QAAA,CAAC,QAAM,CAAM,CAAC,cACvCP,IAAA,QAAKuF,SAAS,CAAC,SAAS,CAACY,IAAI,CAAC,MAAM,CAACC,OAAO,CAAC,WAAW,CAACC,MAAM,CAAC,cAAc,CAAA9F,QAAA,cAC5EP,IAAA,SAAMsG,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,2FAA2F,CAAE,CAAC,CAChK,CAAC,EACA,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,cAGNzG,IAAA,SAAMuF,SAAS,CAAC,QAAQ,CAAAhF,QAAA,CACrBA,QAAQ,CACL,CAAC,EACJ,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}