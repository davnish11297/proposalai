{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BellIcon,XMarkIcon,CheckCircleIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import browserNotificationService from'../services/browserNotifications';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BrowserNotificationPrompt(_ref){let{onPermissionGranted,onPermissionDenied,showPrompt=false,onClose}=_ref;const[permissionStatus,setPermissionStatus]=useState('default');const[isRequesting,setIsRequesting]=useState(false);const[showBanner,setShowBanner]=useState(false);useEffect(()=>{// Initialize the service\nbrowserNotificationService.initialize();// Check current permission status\nconst status=browserNotificationService.getPermissionStatus();setPermissionStatus(status);// Show banner if permission is default and we should show prompt\nif(status==='default'&&showPrompt){setShowBanner(true);}},[showPrompt]);const handleRequestPermission=async()=>{setIsRequesting(true);try{const permission=await browserNotificationService.requestPermission();setPermissionStatus(permission);if(permission==='granted'){setShowBanner(false);onPermissionGranted===null||onPermissionGranted===void 0?void 0:onPermissionGranted();// Show success message\nconsole.log('Browser notifications enabled!');}else{onPermissionDenied===null||onPermissionDenied===void 0?void 0:onPermissionDenied();// Show message about manual enabling\nconsole.log('Browser notifications denied. You can enable them manually in your browser settings.');}}catch(error){console.error('Error requesting notification permission:',error);onPermissionDenied===null||onPermissionDenied===void 0?void 0:onPermissionDenied();}finally{setIsRequesting(false);}};const handleClose=()=>{setShowBanner(false);onClose===null||onClose===void 0?void 0:onClose();};// Don't show anything if notifications are not supported\nif(!browserNotificationService.isNotificationSupported()){return null;}// Don't show banner if permission is already granted or denied\nif(permissionStatus!=='default'||!showBanner){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-4 right-4 z-50 max-w-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg border border-gray-200 p-4 animate-in slide-in-from-top-2 duration-300\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(BellIcon,{className:\"w-5 h-5 text-blue-600\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900\",children:\"Enable Browser Notifications\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Get notified about new comments, proposal updates, and client activity even when you're not on the dashboard.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRequestPermission,disabled:isRequesting,className:\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:isRequesting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1\"}),\"Enabling...\"]}):'Enable Notifications'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClose,className:\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\",children:\"Not Now\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClose,className:\"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"w-4 h-4\"})})]})})});}// Component to show permission status\nexport function NotificationPermissionStatus(){const[permissionStatus,setPermissionStatus]=useState('default');useEffect(()=>{const status=browserNotificationService.getPermissionStatus();setPermissionStatus(status);},[]);if(!browserNotificationService.isNotificationSupported()){return null;}if(permissionStatus==='granted'){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-green-600\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"w-3 h-3 mr-1\"}),\"Notifications enabled\"]});}if(permissionStatus==='denied'){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-amber-600\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"w-3 h-3 mr-1\"}),\"Notifications blocked\"]});}return null;}","map":{"version":3,"names":["React","useState","useEffect","BellIcon","XMarkIcon","CheckCircleIcon","ExclamationTriangleIcon","browserNotificationService","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","BrowserNotificationPrompt","_ref","onPermissionGranted","onPermissionDenied","showPrompt","onClose","permissionStatus","setPermissionStatus","isRequesting","setIsRequesting","showBanner","setShowBanner","initialize","status","getPermissionStatus","handleRequestPermission","permission","requestPermission","console","log","error","handleClose","isNotificationSupported","className","children","onClick","disabled","NotificationPermissionStatus"],"sources":["/Users/davnishsingh/Documents/proposalai-main/proposalai/client/src/components/BrowserNotificationPrompt.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  BellIcon, \n  XMarkIcon,\n  CheckCircleIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline';\nimport browserNotificationService from '../services/browserNotifications';\n\ninterface BrowserNotificationPromptProps {\n  onPermissionGranted?: () => void;\n  onPermissionDenied?: () => void;\n  showPrompt?: boolean;\n  onClose?: () => void;\n}\n\nexport default function BrowserNotificationPrompt({ \n  onPermissionGranted, \n  onPermissionDenied, \n  showPrompt = false,\n  onClose \n}: BrowserNotificationPromptProps) {\n  const [permissionStatus, setPermissionStatus] = useState<NotificationPermission>('default');\n  const [isRequesting, setIsRequesting] = useState(false);\n  const [showBanner, setShowBanner] = useState(false);\n\n  useEffect(() => {\n    // Initialize the service\n    browserNotificationService.initialize();\n    \n    // Check current permission status\n    const status = browserNotificationService.getPermissionStatus();\n    setPermissionStatus(status);\n    \n    // Show banner if permission is default and we should show prompt\n    if (status === 'default' && showPrompt) {\n      setShowBanner(true);\n    }\n  }, [showPrompt]);\n\n  const handleRequestPermission = async () => {\n    setIsRequesting(true);\n    \n    try {\n      const permission = await browserNotificationService.requestPermission();\n      setPermissionStatus(permission);\n      \n      if (permission === 'granted') {\n        setShowBanner(false);\n        onPermissionGranted?.();\n        // Show success message\n        console.log('Browser notifications enabled!');\n      } else {\n        onPermissionDenied?.();\n        // Show message about manual enabling\n        console.log('Browser notifications denied. You can enable them manually in your browser settings.');\n      }\n    } catch (error) {\n      console.error('Error requesting notification permission:', error);\n      onPermissionDenied?.();\n    } finally {\n      setIsRequesting(false);\n    }\n  };\n\n  const handleClose = () => {\n    setShowBanner(false);\n    onClose?.();\n  };\n\n  // Don't show anything if notifications are not supported\n  if (!browserNotificationService.isNotificationSupported()) {\n    return null;\n  }\n\n  // Don't show banner if permission is already granted or denied\n  if (permissionStatus !== 'default' || !showBanner) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 max-w-sm\">\n      <div className=\"bg-white rounded-lg shadow-lg border border-gray-200 p-4 animate-in slide-in-from-top-2 duration-300\">\n        <div className=\"flex items-start space-x-3\">\n          <div className=\"flex-shrink-0\">\n            <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n              <BellIcon className=\"w-5 h-5 text-blue-600\" />\n            </div>\n          </div>\n          \n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-sm font-medium text-gray-900\">\n              Enable Browser Notifications\n            </h3>\n            <p className=\"text-sm text-gray-500 mt-1\">\n              Get notified about new comments, proposal updates, and client activity even when you're not on the dashboard.\n            </p>\n            \n            <div className=\"mt-3 flex space-x-2\">\n              <button\n                onClick={handleRequestPermission}\n                disabled={isRequesting}\n                className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                {isRequesting ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1\"></div>\n                    Enabling...\n                  </>\n                ) : (\n                  'Enable Notifications'\n                )}\n              </button>\n              \n              <button\n                onClick={handleClose}\n                className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\n              >\n                Not Now\n              </button>\n            </div>\n          </div>\n          \n          <button\n            onClick={handleClose}\n            className=\"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <XMarkIcon className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Component to show permission status\nexport function NotificationPermissionStatus() {\n  const [permissionStatus, setPermissionStatus] = useState<NotificationPermission>('default');\n\n  useEffect(() => {\n    const status = browserNotificationService.getPermissionStatus();\n    setPermissionStatus(status);\n  }, []);\n\n  if (!browserNotificationService.isNotificationSupported()) {\n    return null;\n  }\n\n  if (permissionStatus === 'granted') {\n    return (\n      <div className=\"flex items-center text-xs text-green-600\">\n        <CheckCircleIcon className=\"w-3 h-3 mr-1\" />\n        Notifications enabled\n      </div>\n    );\n  }\n\n  if (permissionStatus === 'denied') {\n    return (\n      <div className=\"flex items-center text-xs text-amber-600\">\n        <ExclamationTriangleIcon className=\"w-3 h-3 mr-1\" />\n        Notifications blocked\n      </div>\n    );\n  }\n\n  return null;\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}