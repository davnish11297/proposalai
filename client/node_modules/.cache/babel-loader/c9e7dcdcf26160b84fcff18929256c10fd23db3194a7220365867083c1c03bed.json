{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{toast}from'react-hot-toast';import{proposalsAPI,getOpenRouterChatCompletion}from'../services/api';import ClientSelectionModal from'../components/ClientSelectionModal';import NotificationBell from'../components/NotificationBell';import{HomeIcon,DocumentTextIcon,PaperAirplaneIcon,UsersIcon,UserIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProposalEditor=()=>{var _proposal$content$ful,_proposal$content$ful2;const{id}=useParams();const navigate=useNavigate();const[loading,setLoading]=useState(false);const[generating,setGenerating]=useState(false);const[showClientModal,setShowClientModal]=useState(false);const[selectedClientId,setSelectedClientId]=useState(undefined);const[proposal,setProposal]=useState({title:'',description:'',clientName:'',clientEmail:'',type:'PROPOSAL',content:{executiveSummary:'',approach:'',budgetDetails:'',timeline:'',budget:'',fullProposal:''// Added for unified editing\n},metadata:{industry:'',companySize:'',projectScope:''}});const[accessRequests,setAccessRequests]=useState([]);const[grantingRequestId,setGrantingRequestId]=useState(null);const isNewProposal=!id;// Debug log to verify access requests\nconsole.log('🔍 Access requests state:',accessRequests);useEffect(()=>{const fetchProposal=async()=>{try{const{data}=await proposalsAPI.getById(id);setProposal(data.data);setSelectedClientId(data.data.clientId);}catch(error){console.error('Failed to fetch proposal:',error);toast.error('Failed to load proposal');}};if(id){fetchProposal();}},[id]);useEffect(()=>{if(id){proposalsAPI.getAccessRequests(id).then(_ref=>{let{data}=_ref;return setAccessRequests(data.data);}).catch(()=>setAccessRequests([]));}},[id]);const handleGenerateWithAI=async()=>{// Validate required fields\nconsole.log('🔍 Current proposal state:',{clientName:proposal.clientName,description:proposal.description,hasClientName:!!proposal.clientName,hasDescription:!!proposal.description});if(!proposal.clientName||!proposal.description){const missingFields=[];if(!proposal.clientName)missingFields.push('Client Name');if(!proposal.description)missingFields.push('Description');toast.error(`Please fill in: ${missingFields.join(' and ')} before generating content`);return;}try{var _proposal$metadata,_proposal$metadata2,_proposal$content,_proposal$content2,_result$choices,_result$choices$,_result$choices$$mess,_execMatch$,_approachMatch$,_budgetMatch$,_timelineMatch$;setGenerating(true);// Compose prompt for OpenRouter\nconst messages=[{role:'system',content:`You are an expert proposal writer. Generate a detailed, professional proposal for the following client and project. Structure your response with clear sections: Executive Summary, Approach, Budget Details, and Timeline. Use clear, persuasive language and make each section comprehensive.`},{role:'user',content:`Client Name: ${proposal.clientName}\\nIndustry: ${((_proposal$metadata=proposal.metadata)===null||_proposal$metadata===void 0?void 0:_proposal$metadata.industry)||''}\\nCompany Size: ${((_proposal$metadata2=proposal.metadata)===null||_proposal$metadata2===void 0?void 0:_proposal$metadata2.companySize)||''}\\nProject Description: ${proposal.description}\\nBudget: ${((_proposal$content=proposal.content)===null||_proposal$content===void 0?void 0:_proposal$content.budget)||''}\\nTimeline: ${((_proposal$content2=proposal.content)===null||_proposal$content2===void 0?void 0:_proposal$content2.timeline)||''}\\n\\nPlease provide a professional proposal with the following sections:\\n1. Executive Summary\\n2. Approach\\n3. Budget Details\\n4. Timeline`}];console.log('🚀 Sending AI generation request with messages:',messages);const result=await getOpenRouterChatCompletion(messages);console.log('✅ AI response received:',result);const aiContent=((_result$choices=result.choices)===null||_result$choices===void 0?void 0:(_result$choices$=_result$choices[0])===null||_result$choices$===void 0?void 0:(_result$choices$$mess=_result$choices$.message)===null||_result$choices$$mess===void 0?void 0:_result$choices$$mess.content)||'';console.log('📝 AI generated content:',aiContent);// Parse the AI response into sections\nconsole.log('�� Raw AI response:',aiContent);// Improved parsing with better regex patterns\nlet executiveSummary='',approach='',budgetDetails='',timeline='';// More flexible regex patterns that handle various formats\nconst execMatch=aiContent.match(/(?:Executive Summary|EXECUTIVE SUMMARY)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Approach|APPROACH|Budget|BUDGET|Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);const approachMatch=aiContent.match(/(?:Approach|APPROACH|Methodology|METHODOLOGY)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Budget|BUDGET|Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);const budgetMatch=aiContent.match(/(?:Budget Details?|BUDGET DETAILS?|Budget|BUDGET)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);const timelineMatch=aiContent.match(/(?:Timeline|TIMELINE|Schedule|SCHEDULE)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Next Steps|NEXT STEPS|Conclusion|CONCLUSION)[:\\s\\n]|$)/i);executiveSummary=(execMatch===null||execMatch===void 0?void 0:(_execMatch$=execMatch[1])===null||_execMatch$===void 0?void 0:_execMatch$.trim())||'';approach=(approachMatch===null||approachMatch===void 0?void 0:(_approachMatch$=approachMatch[1])===null||_approachMatch$===void 0?void 0:_approachMatch$.trim())||'';budgetDetails=(budgetMatch===null||budgetMatch===void 0?void 0:(_budgetMatch$=budgetMatch[1])===null||_budgetMatch$===void 0?void 0:_budgetMatch$.trim())||'';timeline=(timelineMatch===null||timelineMatch===void 0?void 0:(_timelineMatch$=timelineMatch[1])===null||_timelineMatch$===void 0?void 0:_timelineMatch$.trim())||'';// If regex parsing didn't work well, try alternative parsing\nif(!executiveSummary&&!approach&&!budgetDetails&&!timeline){console.log('⚠️ Primary regex parsing failed, trying alternative parsing');// Split by numbered sections or headers\nconst sections=aiContent.split(/\\n\\s*(?:\\d+\\.\\s*)?(?:Executive Summary|Approach|Budget|Timeline|Methodology|Schedule)/i);if(sections.length>1){var _sections$,_sections$2,_sections$3,_sections$4;executiveSummary=((_sections$=sections[1])===null||_sections$===void 0?void 0:_sections$.trim())||'';approach=((_sections$2=sections[2])===null||_sections$2===void 0?void 0:_sections$2.trim())||'';budgetDetails=((_sections$3=sections[3])===null||_sections$3===void 0?void 0:_sections$3.trim())||'';timeline=((_sections$4=sections[4])===null||_sections$4===void 0?void 0:_sections$4.trim())||'';}else{// Last resort: use the full content as executive summary\nconsole.log('⚠️ Alternative parsing failed, using full content as executive summary');executiveSummary=aiContent;}}// Clean up the content by removing extra whitespace and formatting\nconst cleanContent=content=>{return content.replace(/\\n\\s*\\n\\s*\\n/g,'\\n\\n')// Remove excessive line breaks\n.replace(/^\\s+|\\s+$/g,'')// Trim whitespace\n.replace(/\\*\\*(.*?)\\*\\*/g,'$1')// Remove bold formatting\n.replace(/\\*(.*?)\\*/g,'$1');// Remove italic formatting\n};executiveSummary=cleanContent(executiveSummary);approach=cleanContent(approach);budgetDetails=cleanContent(budgetDetails);timeline=cleanContent(timeline);console.log('📋 Parsed sections:',{executiveSummary:executiveSummary.substring(0,150)+(executiveSummary.length>150?'...':''),approach:approach.substring(0,150)+(approach.length>150?'...':''),budgetDetails:budgetDetails.substring(0,150)+(budgetDetails.length>150?'...':''),timeline:timeline.substring(0,150)+(timeline.length>150?'...':'')});setProposal({...proposal,content:{...proposal.content,executiveSummary,approach,budgetDetails,timeline}});toast.success('Proposal content generated successfully!');}catch(error){console.error('❌ Content generation error:',error);console.error('❌ Error details:',{message:error.message,stack:error.stack,response:error.response});toast.error(error.message||'Failed to generate proposal content');}finally{setGenerating(false);}};const handleSave=async()=>{try{setLoading(true);const proposalData={...proposal// teamId: selectedTeamId, // teamId is not used\n};if(isNewProposal){// Create new proposal\nawait proposalsAPI.create(proposalData);toast.success('Proposal created successfully!');navigate('/proposals');}else{// Update existing proposal\nawait proposalsAPI.update(id,proposalData);toast.success('Proposal updated successfully!');}navigate('/proposals');}catch(error){var _error$response,_error$response$data;console.error('Save error:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to save proposal');}finally{setLoading(false);}};const handleSubmit=async()=>{try{setLoading(true);const proposalData={...proposal,// teamId: selectedTeamId, // teamId is not used\nstatus:'IN_REVIEW'};if(isNewProposal){// Create and submit new proposal\nawait proposalsAPI.create(proposalData);toast.success('Proposal submitted successfully!');navigate('/proposals');}else{// Update and submit existing proposal\nawait proposalsAPI.update(id,proposalData);toast.success('Proposal submitted successfully!');navigate('/proposals');}}catch(error){var _error$response2,_error$response2$data;console.error('Submit error:',error);toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to submit proposal');}finally{setLoading(false);}};const handleClientSelect=client=>{setProposal({...proposal,clientName:client.name,clientEmail:client.email||''});setSelectedClientId(client.id);toast.success(`Selected client: ${client.name}`);};const handleClearClient=()=>{setProposal({...proposal,clientName:'',clientEmail:''});setSelectedClientId(undefined);toast.success('Client selection cleared');};const handleGrantAccess=async requestId=>{setGrantingRequestId(requestId);try{await proposalsAPI.grantAccessRequest(id,requestId);toast.success('Access granted and email sent!');// Refresh access requests\nconst{data}=await proposalsAPI.getAccessRequests(id);setAccessRequests(data.data);}catch(error){toast.error('Failed to grant access');}finally{setGrantingRequestId(null);}};// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst handleRefineEntireProposal=async()=>{try{var _result$choices2,_result$choices2$,_result$choices2$$mes;setGenerating(true);const messages=[{role:'system',content:`You are an expert proposal writer. Refine the entire proposal content. Make it more detailed, persuasive, and comprehensive.`},{role:'user',content:`Current Proposal Content:\\n\\n${proposal.content.fullProposal||getCombinedProposalContent()}`}];const result=await getOpenRouterChatCompletion(messages);const refinedContent=((_result$choices2=result.choices)===null||_result$choices2===void 0?void 0:(_result$choices2$=_result$choices2[0])===null||_result$choices2$===void 0?void 0:(_result$choices2$$mes=_result$choices2$.message)===null||_result$choices2$$mes===void 0?void 0:_result$choices2$$mes.content)||'';setProposal({...proposal,content:{...proposal.content,fullProposal:refinedContent}});toast.success('Entire proposal refined successfully!');}catch(error){console.error('❌ Refine entire proposal error:',error);toast.error(error.message||'Failed to refine entire proposal');}finally{setGenerating(false);}};const handleFormatProposal=()=>{const content=proposal.content.fullProposal||getCombinedProposalContent();let formattedContent='';// Split content into sections\nconst sections=content.split(/^(#+)\\s*(.*)$/m);let i=0;while(i<sections.length){var _sections$i$match;const level=((_sections$i$match=sections[i].match(/^#+/))===null||_sections$i$match===void 0?void 0:_sections$i$match[0].length)||0;const title=sections[i+1];const text=sections[i+2];if(level===1){formattedContent+=`# ${title}\\n\\n${text}\\n\\n`;}else if(level===2){formattedContent+=`## ${title}\\n\\n${text}\\n\\n`;}else if(level===3){formattedContent+=`### ${title}\\n\\n${text}\\n\\n`;}else{formattedContent+=`${text}\\n\\n`;// For paragraphs or other text\n}i+=3;// Move to the next section\n}setProposal({...proposal,content:{...proposal.content,fullProposal:formattedContent.trim()}});toast.success('Proposal content formatted!');};const getCombinedProposalContent=()=>{return`${proposal.content.executiveSummary||''}\\n\\n# Approach\\n\\n${proposal.content.approach||''}\\n\\n# Budget Details\\n\\n${proposal.content.budgetDetails||''}\\n\\n# Timeline\\n\\n${proposal.content.timeline||''}\\n\\n# Additional Sections\\n\\n${proposal.content.additionalSections||''}`;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-20 w-20 border-b-4 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"bg-gradient-to-r from-blue-600 to-blue-400 shadow-lg w-full z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center h-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-extrabold text-white tracking-wider drop-shadow\",children:\"ProposalAI\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-8\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"/dashboard\",className:\"flex items-center space-x-1 text-white font-semibold border-b-2 border-white/80 pb-1 transition-colors\",children:[/*#__PURE__*/_jsx(HomeIcon,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dashboard\"})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"/drafts\",className:\"flex items-center space-x-1 text-white/80 hover:text-white transition-colors\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Drafts\"})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"/sent-proposals\",className:\"flex items-center space-x-1 text-white/80 hover:text-white transition-colors\",children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sent Proposals\"})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"/clients\",className:\"flex items-center space-x-1 text-white/80 hover:text-white transition-colors\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Clients\"})]}),/*#__PURE__*/_jsxs(\"a\",{href:\"/profile\",className:\"flex items-center space-x-1 text-white/80 hover:text-white transition-colors\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Profile\"})]}),/*#__PURE__*/_jsx(NotificationBell,{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/login';},className:\"text-white/80 hover:text-white transition-colors\",children:\"Logout\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 min-h-0\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"w-[380px] min-w-[380px] max-w-[380px] bg-white border-r border-gray-200 flex flex-col p-8\",children:[accessRequests.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold mb-2 text-blue-700\",children:\"Access Requests\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-4\",children:accessRequests.map(req=>/*#__PURE__*/_jsxs(\"li\",{className:\"bg-blue-50 rounded-lg p-4 flex flex-col md:flex-row md:items-center md:justify-between border border-blue-100\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-blue-900\",children:[req.name,\" (\",req.email,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-700\",children:req.company}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:req.reason}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-400 mt-1\",children:[\"Requested: \",new Date(req.createdAt).toLocaleString()]}),req.status==='GRANTED'&&req.accessCode&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-green-700 text-xs mt-1\",children:[\"Granted: \",req.accessCode]})]}),req.status==='PENDING'&&/*#__PURE__*/_jsx(\"button\",{className:\"mt-2 md:mt-0 px-4 py-2 bg-gradient-to-r from-blue-600 to-green-500 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-green-600 transition disabled:opacity-50\",disabled:grantingRequestId===req.id,onClick:()=>handleGrantAccess(req.id),children:grantingRequestId===req.id?'Granting...':'Grant Access'}),req.status==='GRANTED'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-green-600 font-semibold\",children:\"Granted\"}),req.status==='DENIED'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-red-600 font-semibold\",children:\"Denied\"})]},req.id))})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-8\",children:isNewProposal?'Create New Proposal':'Edit Proposal'}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:[\"Proposal Title \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.title,onChange:e=>setProposal({...proposal,title:e.target.value}),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"Enter proposal title\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:[\"Client Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.clientName,onChange:e=>setProposal({...proposal,clientName:e.target.value}),className:\"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"Enter client name\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowClientModal(true),className:`px-6 py-3 rounded-xl transition-all duration-200 flex items-center gap-2 whitespace-nowrap font-medium ${selectedClientId?'bg-green-600 text-white hover:bg-green-700 shadow-md':'bg-blue-600 text-white hover:bg-blue-700 shadow-md'}`,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"})}),selectedClientId?'Change':'Select']})]}),selectedClientId&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-green-800\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),\"Client selected from database\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleClearClient,className:\"text-red-600 hover:text-red-800 text-sm font-medium\",children:\"Clear\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:[\"Description \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:proposal.description,onChange:e=>setProposal({...proposal,description:e.target.value}),rows:6,className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200\",placeholder:\"Describe the project, requirements, and objectives...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Budget\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.content.budget,onChange:e=>setProposal({...proposal,content:{...proposal.content,budget:e.target.value}}),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"e.g., $50,000\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Timeline\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.content.timeline,onChange:e=>setProposal({...proposal,content:{...proposal.content,timeline:e.target.value}}),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"e.g., 3 months\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Industry\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.metadata.industry,onChange:e=>setProposal({...proposal,metadata:{...proposal.metadata,industry:e.target.value}}),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"e.g., Technology, Healthcare, Finance\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSave,disabled:loading,className:\"flex-1 px-4 py-3 bg-gray-600 text-white font-medium rounded-xl hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 transition-all duration-200\",children:\"Save Draft\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSubmit,disabled:loading,className:\"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-300 transform hover:scale-105\",children:\"Submit Proposal\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleGenerateWithAI,disabled:generating||loading||!proposal.clientName||!proposal.description,className:`w-full mt-8 py-4 px-6 rounded-xl font-semibold text-white transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-lg ${generating||loading||!proposal.clientName||!proposal.description?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:ring-blue-500'}`,children:generating?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Generating Content...\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 10V3L4 14h7v7l9-11h-7z\"})}),\"Generate AI Content\"]})}),(!proposal.clientName||!proposal.description)&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 text-center mt-2\",children:\"Enter client name and description to enable AI generation\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 flex flex-col p-12 overflow-y-auto bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:\"Proposal Content\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Review, edit, and refine your proposal content\"})]}),(accessRequests.length>0||isNewProposal)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold mb-4 text-blue-700 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\"})}),\"Access Requests (\",accessRequests.length>0?accessRequests.length:1,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:accessRequests.length>0?accessRequests.map(req=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 rounded-lg p-4 border border-blue-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold text-blue-900\",children:[req.name,\" (\",req.email,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-700\",children:req.company}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:req.reason}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-400 mt-1\",children:[\"Requested: \",new Date(req.createdAt).toLocaleString()]}),req.status==='GRANTED'&&req.accessCode&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-green-700 text-xs mt-1 font-medium\",children:[\"Access Code: \",req.accessCode]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[req.status==='PENDING'&&/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-gradient-to-r from-blue-600 to-green-500 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-green-600 transition disabled:opacity-50 text-sm\",disabled:grantingRequestId===req.id,onClick:()=>handleGrantAccess(req.id),children:grantingRequestId===req.id?'Granting...':'Grant Access'}),req.status==='GRANTED'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 font-semibold text-sm\",children:\"\\u2713 Granted\"}),req.status==='DENIED'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-semibold text-sm\",children:\"\\u2717 Denied\"})]})]})},req.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium mb-2\",children:\"No Access Requests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"When clients request access to this proposal, they will appear here.\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-[700px] min-h-[300px] flex-1 overflow-y-auto pr-2\",children:generating?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 animate-ping\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full opacity-20\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 animate-ping\",style:{animationDelay:'0.5s'},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full opacity-20\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-white animate-spin\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 10V3L4 14h7v7l9-11h-7z\"})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Generating Your Proposal\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Our AI is crafting a professional proposal tailored to your needs...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mt-4 space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\",style:{animationDelay:'0.1s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-blue-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Proposal Content Editor\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleRefineEntireProposal(),className:\"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 10V3L4 14h7v7l9-11h-7z\"})}),\"Refine with AI\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleFormatProposal(),className:\"px-4 py-2 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 6h16M4 12h16M4 18h16\"})}),\"Format\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-sm text-gray-600 mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),\"Edit the entire proposal content below\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 10V3L4 14h7v7l9-11h-7z\"})}),\"Use \\\"Refine with AI\\\" to improve the entire document\"]})]})}),/*#__PURE__*/_jsx(\"textarea\",{value:proposal.content.fullProposal||getCombinedProposalContent(),onChange:e=>setProposal({...proposal,content:{...proposal.content,fullProposal:e.target.value}}),rows:25,className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200 bg-gray-50 font-mono text-sm leading-relaxed\",placeholder:\"Enter your complete proposal content here... # Executive Summary\\n[Your executive summary goes here] # Approach\\n[Your approach and methodology] # Budget Details\\n[Detailed budget breakdown] # Timeline\\n[Project timeline and milestones] # Additional Sections\\n[Any other relevant sections]\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center justify-between text-xs text-gray-500\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Word count: \",((_proposal$content$ful=proposal.content.fullProposal)===null||_proposal$content$ful===void 0?void 0:_proposal$content$ful.split(/\\s+/).length)||0,\" words\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Characters: \",((_proposal$content$ful2=proposal.content.fullProposal)===null||_proposal$content$ful2===void 0?void 0:_proposal$content$ful2.length)||0]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-green-800\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Content Generated Successfully!\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-700 text-sm mt-1\",children:\"Review and edit the content above. Use \\\"Refine with AI\\\" to improve the entire document or \\\"Format\\\" to structure it properly.\"})]})]})})]})]}),/*#__PURE__*/_jsx(ClientSelectionModal,{isOpen:showClientModal,onClose:()=>setShowClientModal(false),onSelectClient:handleClientSelect,selectedClientId:selectedClientId})]});};export default ProposalEditor;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","toast","proposalsAPI","getOpenRouterChatCompletion","ClientSelectionModal","NotificationBell","HomeIcon","DocumentTextIcon","PaperAirplaneIcon","UsersIcon","UserIcon","jsx","_jsx","jsxs","_jsxs","ProposalEditor","_proposal$content$ful","_proposal$content$ful2","id","navigate","loading","setLoading","generating","setGenerating","showClientModal","setShowClientModal","selectedClientId","setSelectedClientId","undefined","proposal","setProposal","title","description","clientName","clientEmail","type","content","executiveSummary","approach","budgetDetails","timeline","budget","fullProposal","metadata","industry","companySize","projectScope","accessRequests","setAccessRequests","grantingRequestId","setGrantingRequestId","isNewProposal","console","log","fetchProposal","data","getById","clientId","error","getAccessRequests","then","_ref","catch","handleGenerateWithAI","hasClientName","hasDescription","missingFields","push","join","_proposal$metadata","_proposal$metadata2","_proposal$content","_proposal$content2","_result$choices","_result$choices$","_result$choices$$mess","_execMatch$","_approachMatch$","_budgetMatch$","_timelineMatch$","messages","role","result","aiContent","choices","message","execMatch","match","approachMatch","budgetMatch","timelineMatch","trim","sections","split","length","_sections$","_sections$2","_sections$3","_sections$4","cleanContent","replace","substring","success","stack","response","handleSave","proposalData","create","update","_error$response","_error$response$data","handleSubmit","status","_error$response2","_error$response2$data","handleClientSelect","client","name","email","handleClearClient","handleGrantAccess","requestId","grantAccessRequest","handleRefineEntireProposal","_result$choices2","_result$choices2$","_result$choices2$$mes","getCombinedProposalContent","refinedContent","handleFormatProposal","formattedContent","i","_sections$i$match","level","text","additionalSections","className","children","href","onClick","localStorage","removeItem","window","location","map","req","company","reason","Date","createdAt","toLocaleString","accessCode","disabled","value","onChange","e","target","placeholder","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","rows","xmlns","cx","cy","r","style","animationDelay","isOpen","onClose","onSelectClient"],"sources":["/Users/davnishsingh/Documents/proposalai-main/proposalai/client/src/pages/ProposalEditor.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { proposalsAPI, getOpenRouterChatCompletion } from '../services/api';\nimport ClientSelectionModal from '../components/ClientSelectionModal';\nimport NotificationBell from '../components/NotificationBell';\nimport { \n  HomeIcon, \n  DocumentTextIcon, \n  PaperAirplaneIcon, \n  UsersIcon, \n  UserIcon \n} from '@heroicons/react/24/outline';\n\nconst ProposalEditor: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [generating, setGenerating] = useState(false);\n  const [showClientModal, setShowClientModal] = useState(false);\n  const [selectedClientId, setSelectedClientId] = useState<string | undefined>(undefined);\n  const [proposal, setProposal] = useState<any>({\n    title: '',\n    description: '',\n    clientName: '',\n    clientEmail: '',\n    type: 'PROPOSAL',\n    content: {\n      executiveSummary: '',\n      approach: '',\n      budgetDetails: '',\n      timeline: '',\n      budget: '',\n      fullProposal: '' // Added for unified editing\n    },\n    metadata: {\n      industry: '',\n      companySize: '',\n      projectScope: ''\n    }\n  });\n  const [accessRequests, setAccessRequests] = useState<any[]>([]);\n  const [grantingRequestId, setGrantingRequestId] = useState<string | null>(null);\n\n  const isNewProposal = !id;\n\n  // Debug log to verify access requests\n  console.log('🔍 Access requests state:', accessRequests);\n\n  useEffect(() => {\n    const fetchProposal = async () => {\n      try {\n        const { data } = await proposalsAPI.getById(id!);\n        setProposal(data.data);\n        setSelectedClientId(data.data.clientId);\n      } catch (error) {\n        console.error('Failed to fetch proposal:', error);\n        toast.error('Failed to load proposal');\n      }\n    };\n\n    if (id) {\n      fetchProposal();\n    }\n  }, [id]);\n\n  useEffect(() => {\n    if (id) {\n      proposalsAPI.getAccessRequests(id)\n        .then(({ data }) => setAccessRequests(data.data))\n        .catch(() => setAccessRequests([]));\n    }\n  }, [id]);\n\n  const handleGenerateWithAI = async () => {\n    // Validate required fields\n    console.log('🔍 Current proposal state:', {\n      clientName: proposal.clientName,\n      description: proposal.description,\n      hasClientName: !!proposal.clientName,\n      hasDescription: !!proposal.description\n    });\n    \n    if (!proposal.clientName || !proposal.description) {\n      const missingFields = [];\n      if (!proposal.clientName) missingFields.push('Client Name');\n      if (!proposal.description) missingFields.push('Description');\n      toast.error(`Please fill in: ${missingFields.join(' and ')} before generating content`);\n      return;\n    }\n\n    try {\n      setGenerating(true);\n      \n      // Compose prompt for OpenRouter\n      const messages = [\n        {\n          role: 'system',\n          content: `You are an expert proposal writer. Generate a detailed, professional proposal for the following client and project. Structure your response with clear sections: Executive Summary, Approach, Budget Details, and Timeline. Use clear, persuasive language and make each section comprehensive.`,\n        },\n        {\n          role: 'user',\n          content: `Client Name: ${proposal.clientName}\\nIndustry: ${proposal.metadata?.industry || ''}\\nCompany Size: ${proposal.metadata?.companySize || ''}\\nProject Description: ${proposal.description}\\nBudget: ${proposal.content?.budget || ''}\\nTimeline: ${proposal.content?.timeline || ''}\\n\\nPlease provide a professional proposal with the following sections:\\n1. Executive Summary\\n2. Approach\\n3. Budget Details\\n4. Timeline`,\n        },\n      ];\n      \n      console.log('🚀 Sending AI generation request with messages:', messages);\n      \n      const result = await getOpenRouterChatCompletion(messages);\n      console.log('✅ AI response received:', result);\n      \n      const aiContent = result.choices?.[0]?.message?.content || '';\n      console.log('📝 AI generated content:', aiContent);\n      \n      // Parse the AI response into sections\n      console.log('�� Raw AI response:', aiContent);\n      \n      // Improved parsing with better regex patterns\n      let executiveSummary = '', approach = '', budgetDetails = '', timeline = '';\n      \n      // More flexible regex patterns that handle various formats\n      const execMatch = aiContent.match(/(?:Executive Summary|EXECUTIVE SUMMARY)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Approach|APPROACH|Budget|BUDGET|Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);\n      const approachMatch = aiContent.match(/(?:Approach|APPROACH|Methodology|METHODOLOGY)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Budget|BUDGET|Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);\n      const budgetMatch = aiContent.match(/(?:Budget Details?|BUDGET DETAILS?|Budget|BUDGET)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);\n      const timelineMatch = aiContent.match(/(?:Timeline|TIMELINE|Schedule|SCHEDULE)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Next Steps|NEXT STEPS|Conclusion|CONCLUSION)[:\\s\\n]|$)/i);\n      \n      executiveSummary = execMatch?.[1]?.trim() || '';\n      approach = approachMatch?.[1]?.trim() || '';\n      budgetDetails = budgetMatch?.[1]?.trim() || '';\n      timeline = timelineMatch?.[1]?.trim() || '';\n      \n      // If regex parsing didn't work well, try alternative parsing\n      if (!executiveSummary && !approach && !budgetDetails && !timeline) {\n        console.log('⚠️ Primary regex parsing failed, trying alternative parsing');\n        \n        // Split by numbered sections or headers\n        const sections = aiContent.split(/\\n\\s*(?:\\d+\\.\\s*)?(?:Executive Summary|Approach|Budget|Timeline|Methodology|Schedule)/i);\n        \n        if (sections.length > 1) {\n          executiveSummary = sections[1]?.trim() || '';\n          approach = sections[2]?.trim() || '';\n          budgetDetails = sections[3]?.trim() || '';\n          timeline = sections[4]?.trim() || '';\n        } else {\n          // Last resort: use the full content as executive summary\n          console.log('⚠️ Alternative parsing failed, using full content as executive summary');\n          executiveSummary = aiContent;\n        }\n      }\n      \n      // Clean up the content by removing extra whitespace and formatting\n      const cleanContent = (content: string) => {\n        return content\n          .replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n') // Remove excessive line breaks\n          .replace(/^\\s+|\\s+$/g, '') // Trim whitespace\n          .replace(/\\*\\*(.*?)\\*\\*/g, '$1') // Remove bold formatting\n          .replace(/\\*(.*?)\\*/g, '$1'); // Remove italic formatting\n      };\n      \n      executiveSummary = cleanContent(executiveSummary);\n      approach = cleanContent(approach);\n      budgetDetails = cleanContent(budgetDetails);\n      timeline = cleanContent(timeline);\n      \n      console.log('📋 Parsed sections:', {\n        executiveSummary: executiveSummary.substring(0, 150) + (executiveSummary.length > 150 ? '...' : ''),\n        approach: approach.substring(0, 150) + (approach.length > 150 ? '...' : ''),\n        budgetDetails: budgetDetails.substring(0, 150) + (budgetDetails.length > 150 ? '...' : ''),\n        timeline: timeline.substring(0, 150) + (timeline.length > 150 ? '...' : '')\n      });\n      \n      setProposal({\n        ...proposal,\n        content: {\n          ...proposal.content,\n          executiveSummary,\n          approach,\n          budgetDetails,\n          timeline,\n        },\n      });\n      \n      toast.success('Proposal content generated successfully!');\n    } catch (error: any) {\n      console.error('❌ Content generation error:', error);\n      console.error('❌ Error details:', {\n        message: error.message,\n        stack: error.stack,\n        response: error.response\n      });\n      toast.error(error.message || 'Failed to generate proposal content');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      setLoading(true);\n      \n      const proposalData = {\n        ...proposal,\n        // teamId: selectedTeamId, // teamId is not used\n      };\n      \n      if (isNewProposal) {\n        // Create new proposal\n        await proposalsAPI.create(proposalData);\n        toast.success('Proposal created successfully!');\n        navigate('/proposals');\n      } else {\n        // Update existing proposal\n        await proposalsAPI.update(id!, proposalData);\n        toast.success('Proposal updated successfully!');\n      }\n      \n      navigate('/proposals');\n    } catch (error: any) {\n      console.error('Save error:', error);\n      toast.error(error.response?.data?.error || 'Failed to save proposal');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async () => {\n    try {\n      setLoading(true);\n      \n      const proposalData = {\n        ...proposal,\n        // teamId: selectedTeamId, // teamId is not used\n        status: 'IN_REVIEW'\n      };\n      \n      if (isNewProposal) {\n        // Create and submit new proposal\n        await proposalsAPI.create(proposalData);\n        toast.success('Proposal submitted successfully!');\n        navigate('/proposals');\n      } else {\n        // Update and submit existing proposal\n        await proposalsAPI.update(id!, proposalData);\n        toast.success('Proposal submitted successfully!');\n        navigate('/proposals');\n      }\n    } catch (error: any) {\n      console.error('Submit error:', error);\n      toast.error(error.response?.data?.error || 'Failed to submit proposal');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClientSelect = (client: any) => {\n    setProposal({\n      ...proposal,\n      clientName: client.name,\n      clientEmail: client.email || '',\n    });\n    setSelectedClientId(client.id);\n    toast.success(`Selected client: ${client.name}`);\n  };\n\n  const handleClearClient = () => {\n    setProposal({\n      ...proposal,\n      clientName: '',\n      clientEmail: '',\n    });\n    setSelectedClientId(undefined);\n    toast.success('Client selection cleared');\n  };\n\n  const handleGrantAccess = async (requestId: string) => {\n    setGrantingRequestId(requestId);\n    try {\n      await proposalsAPI.grantAccessRequest(id!, requestId);\n      toast.success('Access granted and email sent!');\n      // Refresh access requests\n      const { data } = await proposalsAPI.getAccessRequests(id!);\n      setAccessRequests(data.data);\n    } catch (error) {\n      toast.error('Failed to grant access');\n    } finally {\n      setGrantingRequestId(null);\n    }\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const handleRefineEntireProposal = async () => {\n    try {\n      setGenerating(true);\n      const messages = [\n        {\n          role: 'system',\n          content: `You are an expert proposal writer. Refine the entire proposal content. Make it more detailed, persuasive, and comprehensive.`,\n        },\n        {\n          role: 'user',\n          content: `Current Proposal Content:\\n\\n${proposal.content.fullProposal || getCombinedProposalContent()}`,\n        },\n      ];\n      const result = await getOpenRouterChatCompletion(messages);\n      const refinedContent = result.choices?.[0]?.message?.content || '';\n      setProposal({\n        ...proposal,\n        content: {\n          ...proposal.content,\n          fullProposal: refinedContent,\n        },\n      });\n      toast.success('Entire proposal refined successfully!');\n    } catch (error: any) {\n      console.error('❌ Refine entire proposal error:', error);\n      toast.error(error.message || 'Failed to refine entire proposal');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleFormatProposal = () => {\n    const content = proposal.content.fullProposal || getCombinedProposalContent();\n    let formattedContent = '';\n\n    // Split content into sections\n    const sections = content.split(/^(#+)\\s*(.*)$/m);\n    let i = 0;\n    while (i < sections.length) {\n      const level = sections[i].match(/^#+/)?.[0].length || 0;\n      const title = sections[i + 1];\n      const text = sections[i + 2];\n\n      if (level === 1) {\n        formattedContent += `# ${title}\\n\\n${text}\\n\\n`;\n      } else if (level === 2) {\n        formattedContent += `## ${title}\\n\\n${text}\\n\\n`;\n      } else if (level === 3) {\n        formattedContent += `### ${title}\\n\\n${text}\\n\\n`;\n      } else {\n        formattedContent += `${text}\\n\\n`; // For paragraphs or other text\n      }\n      i += 3; // Move to the next section\n    }\n\n    setProposal({\n      ...proposal,\n      content: {\n        ...proposal.content,\n        fullProposal: formattedContent.trim(),\n      },\n    });\n    toast.success('Proposal content formatted!');\n  };\n\n  const getCombinedProposalContent = () => {\n    return `${proposal.content.executiveSummary || ''}\\n\\n# Approach\\n\\n${proposal.content.approach || ''}\\n\\n# Budget Details\\n\\n${proposal.content.budgetDetails || ''}\\n\\n# Timeline\\n\\n${proposal.content.timeline || ''}\\n\\n# Additional Sections\\n\\n${proposal.content.additionalSections || ''}`;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"animate-spin rounded-full h-20 w-20 border-b-4 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n      {/* Top Navigation Bar */}\n      <nav className=\"bg-gradient-to-r from-blue-600 to-blue-400 shadow-lg w-full z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-xl font-extrabold text-white tracking-wider drop-shadow\">ProposalAI</h1>\n            </div>\n            <div className=\"flex items-center space-x-8\">\n              <a href=\"/dashboard\" className=\"flex items-center space-x-1 text-white font-semibold border-b-2 border-white/80 pb-1 transition-colors\">\n                <HomeIcon className=\"w-5 h-5\" />\n                <span>Dashboard</span>\n              </a>\n              <a href=\"/drafts\" className=\"flex items-center space-x-1 text-white/80 hover:text-white transition-colors\">\n                <DocumentTextIcon className=\"w-5 h-5\" />\n                <span>Drafts</span>\n              </a>\n              <a href=\"/sent-proposals\" className=\"flex items-center space-x-1 text-white/80 hover:text-white transition-colors\">\n                <PaperAirplaneIcon className=\"w-5 h-5\" />\n                <span>Sent Proposals</span>\n              </a>\n              <a href=\"/clients\" className=\"flex items-center space-x-1 text-white/80 hover:text-white transition-colors\">\n                <UsersIcon className=\"w-5 h-5\" />\n                <span>Clients</span>\n              </a>\n              <a href=\"/profile\" className=\"flex items-center space-x-1 text-white/80 hover:text-white transition-colors\">\n                <UserIcon className=\"w-5 h-5\" />\n                <span>Profile</span>\n              </a>\n              <NotificationBell />\n              <button \n                onClick={() => { localStorage.removeItem('token'); localStorage.removeItem('user'); window.location.href = '/login'; }}\n                className=\"text-white/80 hover:text-white transition-colors\"\n              >\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n      </nav>\n      {/* Main Content Flex Layout */}\n      <div className=\"flex flex-1 min-h-0\">\n        {/* Left Sidebar */}\n        <aside className=\"w-[380px] min-w-[380px] max-w-[380px] bg-white border-r border-gray-200 flex flex-col p-8\">\n          {/* Access Requests UI (for owner) */}\n          {accessRequests.length > 0 && (\n            <div className=\"mt-8\">\n              <h3 className=\"text-lg font-bold mb-2 text-blue-700\">Access Requests</h3>\n              <ul className=\"space-y-4\">\n                {accessRequests.map((req) => (\n                  <li key={req.id} className=\"bg-blue-50 rounded-lg p-4 flex flex-col md:flex-row md:items-center md:justify-between border border-blue-100\">\n                    <div>\n                      <div className=\"font-semibold text-blue-900\">{req.name} ({req.email})</div>\n                      <div className=\"text-sm text-gray-700\">{req.company}</div>\n                      <div className=\"text-xs text-gray-500\">{req.reason}</div>\n                      <div className=\"text-xs text-gray-400 mt-1\">Requested: {new Date(req.createdAt).toLocaleString()}</div>\n                      {req.status === 'GRANTED' && req.accessCode && (\n                        <div className=\"text-green-700 text-xs mt-1\">Granted: {req.accessCode}</div>\n                      )}\n                    </div>\n                    {req.status === 'PENDING' && (\n                      <button\n                        className=\"mt-2 md:mt-0 px-4 py-2 bg-gradient-to-r from-blue-600 to-green-500 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-green-600 transition disabled:opacity-50\"\n                        disabled={grantingRequestId === req.id}\n                        onClick={() => handleGrantAccess(req.id)}\n                      >\n                        {grantingRequestId === req.id ? 'Granting...' : 'Grant Access'}\n                      </button>\n                    )}\n                    {req.status === 'GRANTED' && (\n                      <span className=\"ml-2 text-green-600 font-semibold\">Granted</span>\n                    )}\n                    {req.status === 'DENIED' && (\n                      <span className=\"ml-2 text-red-600 font-semibold\">Denied</span>\n                    )}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-8\">\n            {isNewProposal ? 'Create New Proposal' : 'Edit Proposal'}\n          </h2>\n          <form className=\"space-y-8\">\n                              <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                    Proposal Title <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={proposal.title}\n                    onChange={(e) => setProposal({ ...proposal, title: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                    placeholder=\"Enter proposal title\"\n                  />\n                </div>\n                              <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                    Client Name <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"flex gap-3\">\n                    <input\n                      type=\"text\"\n                      value={proposal.clientName}\n                      onChange={(e) => setProposal({ ...proposal, clientName: e.target.value })}\n                      className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                      placeholder=\"Enter client name\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowClientModal(true)}\n                      className={`px-6 py-3 rounded-xl transition-all duration-200 flex items-center gap-2 whitespace-nowrap font-medium ${\n                        selectedClientId \n                          ? 'bg-green-600 text-white hover:bg-green-700 shadow-md' \n                          : 'bg-blue-600 text-white hover:bg-blue-700 shadow-md'\n                      }`}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                      </svg>\n                      {selectedClientId ? 'Change' : 'Select'}\n                    </button>\n                  </div>\n                {selectedClientId && (\n                  <div className=\"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2 text-sm text-green-800\">\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                        </svg>\n                        Client selected from database\n                      </div>\n                      <button\n                        type=\"button\"\n                        onClick={handleClearClient}\n                        className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                      >\n                        Clear\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n                              <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                    Description <span className=\"text-red-500\">*</span>\n                  </label>\n                  <textarea\n                    value={proposal.description}\n                    onChange={(e) => setProposal({ ...proposal, description: e.target.value })}\n                    rows={6}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200\"\n                    placeholder=\"Describe the project, requirements, and objectives...\"\n                  />\n                </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Budget</label>\n                  <input\n                    type=\"text\"\n                    value={proposal.content.budget}\n                    onChange={(e) => setProposal({ ...proposal, content: { ...proposal.content, budget: e.target.value } })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                    placeholder=\"e.g., $50,000\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Timeline</label>\n                  <input\n                    type=\"text\"\n                    value={proposal.content.timeline}\n                    onChange={(e) => setProposal({ ...proposal, content: { ...proposal.content, timeline: e.target.value } })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                    placeholder=\"e.g., 3 months\"\n                  />\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Industry</label>\n                <input\n                  type=\"text\"\n                  value={proposal.metadata.industry}\n                  onChange={(e) => setProposal({ ...proposal, metadata: { ...proposal.metadata, industry: e.target.value } })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                  placeholder=\"e.g., Technology, Healthcare, Finance\"\n                />\n              </div>\n              {/* Action Buttons */}\n              <div className=\"flex gap-3 pt-6\">\n                <button\n                  type=\"button\"\n                  onClick={handleSave}\n                  disabled={loading}\n                  className=\"flex-1 px-4 py-3 bg-gray-600 text-white font-medium rounded-xl hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 transition-all duration-200\"\n                >\n                  Save Draft\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleSubmit}\n                  disabled={loading}\n                  className=\"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-300 transform hover:scale-105\"\n                >\n                  Submit Proposal\n                </button>\n              </div>\n              <button\n                type=\"button\"\n                onClick={handleGenerateWithAI}\n                disabled={generating || loading || !proposal.clientName || !proposal.description}\n                className={`w-full mt-8 py-4 px-6 rounded-xl font-semibold text-white transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-lg ${\n                  generating || loading || !proposal.clientName || !proposal.description\n                    ? 'bg-gray-400 cursor-not-allowed'\n                    : 'bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:ring-blue-500'\n                }`}\n              >\n                {generating ? (\n                  <div className=\"flex items-center justify-center\">\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Generating Content...\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-center\">\n                    <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                    </svg>\n                    Generate AI Content\n                  </div>\n                )}\n              </button>\n              {(!proposal.clientName || !proposal.description) && (\n                <p className=\"text-sm text-gray-500 text-center mt-2\">\n                  Enter client name and description to enable AI generation\n                </p>\n              )}\n          </form>\n        </aside>\n        {/* Right Content Area */}\n        <main className=\"flex-1 flex flex-col p-12 overflow-y-auto bg-gray-50\">\n          <div className=\"mb-8\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Proposal Content</h2>\n            <p className=\"text-gray-600\">Review, edit, and refine your proposal content</p>\n          </div>\n          \n          {/* Access Requests Section */}\n          {(accessRequests.length > 0 || isNewProposal) && (\n            <div className=\"mb-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n              <h3 className=\"text-xl font-bold mb-4 text-blue-700 flex items-center gap-2\">\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\" />\n                </svg>\n                Access Requests ({accessRequests.length > 0 ? accessRequests.length : 1})\n              </h3>\n              <div className=\"space-y-4\">\n                {accessRequests.length > 0 ? (\n                  accessRequests.map((req) => (\n                    <div key={req.id} className=\"bg-blue-50 rounded-lg p-4 border border-blue-100\">\n                      <div className=\"flex justify-between items-start\">\n                        <div className=\"flex-1\">\n                          <div className=\"font-semibold text-blue-900\">{req.name} ({req.email})</div>\n                          <div className=\"text-sm text-gray-700\">{req.company}</div>\n                          <div className=\"text-xs text-gray-500 mt-1\">{req.reason}</div>\n                          <div className=\"text-xs text-gray-400 mt-1\">Requested: {new Date(req.createdAt).toLocaleString()}</div>\n                          {req.status === 'GRANTED' && req.accessCode && (\n                            <div className=\"text-green-700 text-xs mt-1 font-medium\">Access Code: {req.accessCode}</div>\n                          )}\n                        </div>\n                        <div className=\"ml-4\">\n                          {req.status === 'PENDING' && (\n                            <button\n                              className=\"px-4 py-2 bg-gradient-to-r from-blue-600 to-green-500 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-green-600 transition disabled:opacity-50 text-sm\"\n                              disabled={grantingRequestId === req.id}\n                              onClick={() => handleGrantAccess(req.id)}\n                            >\n                              {grantingRequestId === req.id ? 'Granting...' : 'Grant Access'}\n                            </button>\n                          )}\n                          {req.status === 'GRANTED' && (\n                            <span className=\"text-green-600 font-semibold text-sm\">✓ Granted</span>\n                          )}\n                          {req.status === 'DENIED' && (\n                            <span className=\"text-red-600 font-semibold text-sm\">✗ Denied</span>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div className=\"text-center py-8 text-gray-500\">\n                    <div className=\"text-lg font-medium mb-2\">No Access Requests</div>\n                    <div className=\"text-sm\">When clients request access to this proposal, they will appear here.</div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          <div className=\"max-h-[700px] min-h-[300px] flex-1 overflow-y-auto pr-2\">\n              {generating ? (\n                <div className=\"flex flex-col items-center justify-center py-12\">\n                  <div className=\"relative\">\n                    {/* Animated circles */}\n                    <div className=\"absolute inset-0 animate-ping\">\n                      <div className=\"w-16 h-16 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full opacity-20\"></div>\n                    </div>\n                    <div className=\"absolute inset-0 animate-ping\" style={{ animationDelay: '0.5s' }}>\n                      <div className=\"w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full opacity-20\"></div>\n                    </div>\n                    <div className=\"relative\">\n                      <div className=\"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center\">\n                        <svg className=\"w-8 h-8 text-white animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"mt-6 text-center\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Generating Your Proposal</h3>\n                    <p className=\"text-gray-600\">Our AI is crafting a professional proposal tailored to your needs...</p>\n                    \n                    {/* Animated dots */}\n                    <div className=\"flex justify-center mt-4 space-x-1\">\n                      <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\n                      <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                      <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"space-y-6\">\n                  {/* Single Unified Proposal Editor */}\n                  <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n                    <div className=\"flex justify-between items-center mb-6\">\n                      <h3 className=\"text-xl font-bold text-gray-900 flex items-center gap-2\">\n                        <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                        </svg>\n                        Proposal Content Editor\n                      </h3>\n                      <div className=\"flex gap-3\">\n                        <button \n                          onClick={() => handleRefineEntireProposal()}\n                          className=\"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition flex items-center gap-2\"\n                        >\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                          </svg>\n                          Refine with AI\n                        </button>\n                        <button \n                          onClick={() => handleFormatProposal()}\n                          className=\"px-4 py-2 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition flex items-center gap-2\"\n                        >\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n                          </svg>\n                          Format\n                        </button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"mb-4\">\n                      <div className=\"flex items-center gap-4 text-sm text-gray-600 mb-2\">\n                        <span className=\"flex items-center gap-1\">\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                          </svg>\n                          Edit the entire proposal content below\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                          </svg>\n                          Use \"Refine with AI\" to improve the entire document\n                        </span>\n                      </div>\n                    </div>\n\n                    <textarea\n                      value={proposal.content.fullProposal || getCombinedProposalContent()}\n                      onChange={(e) => setProposal({ \n                        ...proposal, \n                        content: { \n                          ...proposal.content, \n                          fullProposal: e.target.value \n                        } \n                      })}\n                      rows={25}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200 bg-gray-50 font-mono text-sm leading-relaxed\"\n                      placeholder=\"Enter your complete proposal content here...\n\n# Executive Summary\n[Your executive summary goes here]\n\n# Approach\n[Your approach and methodology]\n\n# Budget Details\n[Detailed budget breakdown]\n\n# Timeline\n[Project timeline and milestones]\n\n# Additional Sections\n[Any other relevant sections]\"\n                    />\n                    \n                    <div className=\"mt-4 flex items-center justify-between text-xs text-gray-500\">\n                      <span>Word count: {proposal.content.fullProposal?.split(/\\s+/).length || 0} words</span>\n                      <span>Characters: {proposal.content.fullProposal?.length || 0}</span>\n                    </div>\n                  </div>\n\n                  {/* Success Message */}\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                    <div className=\"flex items-center gap-2 text-green-800\">\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      <span className=\"font-medium\">Content Generated Successfully!</span>\n                    </div>\n                    <p className=\"text-green-700 text-sm mt-1\">Review and edit the content above. Use \"Refine with AI\" to improve the entire document or \"Format\" to structure it properly.</p>\n                  </div>\n                </div>\n              )}\n            </div>\n        </main>\n      </div>\n      \n      {/* Client Selection Modal */}\n      <ClientSelectionModal\n        isOpen={showClientModal}\n        onClose={() => setShowClientModal(false)}\n        onSelectClient={handleClientSelect}\n        selectedClientId={selectedClientId}\n      />\n    </div>\n  );\n};\n\nexport default ProposalEditor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}