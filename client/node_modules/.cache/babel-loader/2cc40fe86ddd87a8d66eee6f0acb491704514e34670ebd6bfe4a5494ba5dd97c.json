{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{proposalsAPI,clientsAPI}from'../services/api';import{DocumentTextIcon,UserIcon,CalendarIcon,PencilSquareIcon,EyeIcon,TrashIcon,PaperAirplaneIcon,ChevronDownIcon,PlusIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Drafts(){const navigate=useNavigate();const[drafts,setDrafts]=useState([]);const[sentProposals,setSentProposals]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showSendModal,setShowSendModal]=useState(false);const[selectedDraft,setSelectedDraft]=useState(null);const[recipientEmail,setRecipientEmail]=useState('');const[clientName,setClientName]=useState('');const[sending,setSending]=useState(false);const[sendError,setSendError]=useState('');const[viewMode,setViewMode]=useState('drafts');// Client selection states\nconst[clients,setClients]=useState([]);const[selectedClientId,setSelectedClientId]=useState('');const[showClientDropdown,setShowClientDropdown]=useState(false);const[showNewClientForm,setShowNewClientForm]=useState(false);const[newClientName,setNewClientName]=useState('');const[newClientEmail,setNewClientEmail]=useState('');const[creatingClient,setCreatingClient]=useState(false);useEffect(()=>{fetchProposals();fetchClients();},[]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{const target=event.target;if(!target.closest('.client-dropdown')){setShowClientDropdown(false);}};if(showClientDropdown){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[showClientDropdown]);const fetchProposals=async()=>{try{setLoading(true);const response=await proposalsAPI.getAll();const allProposals=response.data.data;setDrafts(allProposals.filter(p=>p.status==='DRAFT'));setSentProposals(allProposals.filter(p=>['SENT','IN_REVIEW','WON','LOST'].includes(p.status)));}catch(err){setError('Failed to load proposals');}finally{setLoading(false);}};const fetchClients=async()=>{try{var _response$data;const response=await clientsAPI.getClients();const clientsData=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.data)||[];setClients(clientsData);}catch(error){console.error('Error fetching clients:',error);}};const handleEdit=id=>navigate(`/proposals/${id}`);const handleView=id=>navigate(`/proposals/${id}/view`);const handleDelete=async id=>{if(window.confirm('Delete this draft?')){await proposalsAPI.delete(id);fetchProposals();}};const handleSend=draft=>{setSelectedDraft(draft);setRecipientEmail('');setClientName('');setSelectedClientId('');setShowClientDropdown(false);setShowNewClientForm(false);setNewClientName('');setNewClientEmail('');setSendError('');setShowSendModal(true);};const handleClientSelect=client=>{setSelectedClientId(client.id);setClientName(client.name);setRecipientEmail(client.email);setShowClientDropdown(false);};const handleCreateClient=async()=>{if(!newClientName.trim()||!newClientEmail.trim()){return;}try{var _response$data2;setCreatingClient(true);const response=await clientsAPI.create({name:newClientName.trim(),email:newClientEmail.trim()});const newClient=(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.data;setClients([...clients,newClient]);// Select the newly created client\nsetSelectedClientId(newClient.id);setClientName(newClient.name);setRecipientEmail(newClient.email);// Reset form\nsetShowNewClientForm(false);setNewClientName('');setNewClientEmail('');}catch(error){console.error('Error creating client:',error);}finally{setCreatingClient(false);}};const handleSendProposal=async()=>{if(!recipientEmail.trim()){setSendError('Please enter a recipient email');return;}if(!clientName.trim()){setSendError('Please enter a client name');return;}if(!selectedDraft)return;try{setSending(true);setSendError('');await proposalsAPI.sendEmail(selectedDraft.id,{recipientEmail:recipientEmail.trim(),clientName:clientName.trim()});// Close modal and refresh drafts\nsetShowSendModal(false);setSelectedDraft(null);setRecipientEmail('');setClientName('');// Show success message\nalert('Proposal sent successfully! It has been moved to Sent Proposals.');// Refresh the drafts list (the sent proposal will no longer appear here)\nfetchDrafts();}catch(err){var _err$response,_err$response$data;setSendError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to send proposal');}finally{setSending(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-6 py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-12 animate-fade-in-up\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl flex items-center justify-center shadow-lg mr-4\",children:/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-900 tracking-tight\",children:viewMode==='drafts'?'Draft Proposals':'Sent Proposals'}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xl text-gray-600\",children:viewMode==='drafts'?'Edit and manage your draft proposals before sending them to clients':'Track your sent proposals and their current status'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-200 p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setViewMode('drafts'),className:`px-8 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center gap-3 ${viewMode==='drafts'?'bg-emerald-500 text-white shadow-md':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"w-5 h-5\"}),\"Draft Proposals\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setViewMode('sent'),className:`px-8 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center gap-3 ${viewMode==='sent'?'bg-emerald-500 text-white shadow-md':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"w-5 h-5\"}),\"Sent Proposals\"]})]})})})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center h-40 text-lg text-gray-600 font-medium\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mr-3\"}),\"Loading drafts...\"]}):error?/*#__PURE__*/_jsx(\"div\",{className:\"status-error rounded-xl p-6 text-center animate-fade-in-up\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium\",children:error})}):(viewMode==='drafts'?drafts.length===0:sentProposals.length===0)?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-80 text-gray-400 animate-fade-in-up\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gradient-to-r from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center mb-6\",children:viewMode==='drafts'?/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-10 w-10\"}):/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-10 w-10\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-semibold mb-2\",children:viewMode==='drafts'?'No drafts found':'No sent proposals found'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg\",children:viewMode==='drafts'?'Start by generating a new proposal!':'Send some proposals to see them here!'})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\",children:(viewMode==='drafts'?drafts:sentProposals).map(proposal=>/*#__PURE__*/_jsxs(\"div\",{className:\"card-elevated p-6 flex flex-col justify-between animate-fade-in-up\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-primary-100 to-primary-200 rounded-xl flex items-center justify-center\",children:viewMode==='drafts'?/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-5 w-5 text-primary-600\"}):/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-5 w-5 text-primary-600\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-gray-900 truncate\",title:proposal.title,children:proposal.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-gray-600 mb-2\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:proposal.clientName||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-gray-500 mb-4\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(proposal.createdAt).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700 text-sm line-clamp-3 mb-4\",children:proposal.description}),viewMode==='sent'&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 text-sm mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${proposal.status==='WON'?'bg-green-100 text-green-800':proposal.status==='LOST'?'bg-red-100 text-red-800':proposal.status==='IN_REVIEW'?'bg-yellow-100 text-yellow-800':'bg-blue-100 text-blue-800'}`,children:proposal.status.replace('_',' ')})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 mt-4 flex-wrap\",children:viewMode==='drafts'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary flex items-center gap-1 px-3 py-2 text-sm\",onClick:()=>handleEdit(proposal.id),children:[/*#__PURE__*/_jsx(PencilSquareIcon,{className:\"h-4 w-4\"}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary flex items-center gap-1 px-3 py-2 text-sm\",onClick:()=>handleView(proposal.id),children:[/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4\"}),\" View\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white font-medium px-3 py-2 rounded-xl hover:from-emerald-700 hover:to-emerald-800 transition-all duration-200 flex items-center gap-1 text-sm shadow-sm hover:shadow-md\",onClick:()=>handleSend(proposal),children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-4 w-4\"}),\" Send\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"bg-gradient-to-r from-rose-600 to-rose-700 text-white font-medium px-3 py-2 rounded-xl hover:from-rose-700 hover:to-rose-800 transition-all duration-200 flex items-center gap-1 text-sm shadow-sm hover:shadow-md\",onClick:()=>handleDelete(proposal.id),children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"}),\" Delete\"]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-secondary flex items-center gap-1 px-3 py-2 text-sm\",onClick:()=>handleView(proposal.id),children:[/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4\"}),\" View\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary flex items-center gap-1 px-3 py-2 text-sm\",onClick:()=>handleEdit(proposal.id),children:[/*#__PURE__*/_jsx(PencilSquareIcon,{className:\"h-4 w-4\"}),\" Edit\"]})]})})]},proposal.id))})]}),showSendModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg max-w-md w-full p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-6 w-6 text-purple-500\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Send Proposal\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-2\",children:[\"Send \\\"\",selectedDraft===null||selectedDraft===void 0?void 0:selectedDraft.title,\"\\\" to:\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Select Client \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative client-dropdown\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowClientDropdown(!showClientDropdown),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-left flex items-center justify-between\",disabled:sending,children:[/*#__PURE__*/_jsx(\"span\",{className:selectedClientId?'text-gray-900':'text-gray-500',children:selectedClientId?clientName:'Choose a client or add new...'}),/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"h-4 w-4 text-gray-400\"})]}),showClientDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto\",children:[clients.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1\",children:\"Existing Clients\"}),clients.map(client=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleClientSelect(client),className:\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md flex items-center gap-2\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:client.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:client.email})]})]},client.id))]}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1\",children:\"No clients yet\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 text-sm text-gray-500\",children:\"Create your first client below\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 p-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowNewClientForm(true);setShowClientDropdown(false);},className:\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md flex items-center gap-2 text-purple-600\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Add New Client\"})]})})]})]})]}),showNewClientForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"border border-purple-200 rounded-lg p-4 bg-purple-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-purple-900\",children:\"Add New Client\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewClientForm(false),className:\"text-purple-600 hover:text-purple-800\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Client Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter client's full name\",value:newClientName,onChange:e=>setNewClientName(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent\",disabled:creatingClient})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Email Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"client@example.com\",value:newClientEmail,onChange:e=>setNewClientEmail(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent\",disabled:creatingClient})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateClient,disabled:creatingClient||!newClientName.trim()||!newClientEmail.trim(),className:\"w-full px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\",children:creatingClient?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-3 w-3 border-b-2 border-white\"}),\"Creating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-3 w-3\"}),\"Create Client\"]})})]})]}),!selectedClientId&&!showNewClientForm&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Client Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter client's full name\",value:clientName,onChange:e=>setClientName(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\",disabled:sending})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Email Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"recipient@example.com\",value:recipientEmail,onChange:e=>setRecipientEmail(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\",disabled:sending})]})]})]}),sendError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-2\",children:sendError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSendModal(false),className:\"flex-1 px-4 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition\",disabled:sending,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendProposal,disabled:sending||!recipientEmail.trim()||!clientName.trim(),className:\"flex-1 px-4 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\",children:sending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),\"Sending...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-4 w-4\"}),\"Send\"]})})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","proposalsAPI","clientsAPI","DocumentTextIcon","UserIcon","CalendarIcon","PencilSquareIcon","EyeIcon","TrashIcon","PaperAirplaneIcon","ChevronDownIcon","PlusIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Drafts","navigate","drafts","setDrafts","sentProposals","setSentProposals","loading","setLoading","error","setError","showSendModal","setShowSendModal","selectedDraft","setSelectedDraft","recipientEmail","setRecipientEmail","clientName","setClientName","sending","setSending","sendError","setSendError","viewMode","setViewMode","clients","setClients","selectedClientId","setSelectedClientId","showClientDropdown","setShowClientDropdown","showNewClientForm","setShowNewClientForm","newClientName","setNewClientName","newClientEmail","setNewClientEmail","creatingClient","setCreatingClient","fetchProposals","fetchClients","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","response","getAll","allProposals","data","filter","p","status","includes","err","_response$data","getClients","clientsData","console","handleEdit","id","handleView","handleDelete","window","confirm","delete","handleSend","draft","handleClientSelect","client","name","email","handleCreateClient","trim","_response$data2","create","newClient","handleSendProposal","sendEmail","alert","fetchDrafts","_err$response","_err$response$data","className","children","onClick","length","map","proposal","title","Date","createdAt","toLocaleDateString","description","replace","type","disabled","placeholder","value","onChange","e"],"sources":["/Users/davnishsingh/Documents/proposalai-main/proposalai/client/src/pages/Drafts.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { proposalsAPI, clientsAPI } from '../services/api';\nimport { \n  DocumentTextIcon, \n  UserIcon, \n  CalendarIcon, \n  PencilSquareIcon, \n  EyeIcon, \n  TrashIcon, \n  PaperAirplaneIcon,\n  ChevronDownIcon,\n  PlusIcon\n} from '@heroicons/react/24/outline';\n\nexport default function Drafts() {\n  const navigate = useNavigate();\n  const [drafts, setDrafts] = useState<any[]>([]);\n  const [sentProposals, setSentProposals] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showSendModal, setShowSendModal] = useState(false);\n  const [selectedDraft, setSelectedDraft] = useState<any>(null);\n  const [recipientEmail, setRecipientEmail] = useState('');\n  const [clientName, setClientName] = useState('');\n  const [sending, setSending] = useState(false);\n  const [sendError, setSendError] = useState('');\n  const [viewMode, setViewMode] = useState<'drafts' | 'sent'>('drafts');\n  \n  // Client selection states\n  const [clients, setClients] = useState<any[]>([]);\n  const [selectedClientId, setSelectedClientId] = useState<string>('');\n  const [showClientDropdown, setShowClientDropdown] = useState(false);\n  const [showNewClientForm, setShowNewClientForm] = useState(false);\n  const [newClientName, setNewClientName] = useState('');\n  const [newClientEmail, setNewClientEmail] = useState('');\n  const [creatingClient, setCreatingClient] = useState(false);\n\n  useEffect(() => {\n    fetchProposals();\n    fetchClients();\n  }, []);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as Element;\n      if (!target.closest('.client-dropdown')) {\n        setShowClientDropdown(false);\n      }\n    };\n\n    if (showClientDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showClientDropdown]);\n\n  const fetchProposals = async () => {\n    try {\n      setLoading(true);\n      const response = await proposalsAPI.getAll();\n      const allProposals = response.data.data;\n      setDrafts(allProposals.filter((p: any) => p.status === 'DRAFT'));\n      setSentProposals(allProposals.filter((p: any) => ['SENT', 'IN_REVIEW', 'WON', 'LOST'].includes(p.status)));\n    } catch (err) {\n      setError('Failed to load proposals');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchClients = async () => {\n    try {\n      const response = await clientsAPI.getClients();\n      const clientsData = response.data?.data || [];\n      setClients(clientsData);\n    } catch (error) {\n      console.error('Error fetching clients:', error);\n    }\n  };\n\n  const handleEdit = (id: string) => navigate(`/proposals/${id}`);\n  const handleView = (id: string) => navigate(`/proposals/${id}/view`);\n  const handleDelete = async (id: string) => {\n    if (window.confirm('Delete this draft?')) {\n      await proposalsAPI.delete(id);\n      fetchProposals();\n    }\n  };\n\n  const handleSend = (draft: any) => {\n    setSelectedDraft(draft);\n    setRecipientEmail('');\n    setClientName('');\n    setSelectedClientId('');\n    setShowClientDropdown(false);\n    setShowNewClientForm(false);\n    setNewClientName('');\n    setNewClientEmail('');\n    setSendError('');\n    setShowSendModal(true);\n  };\n\n  const handleClientSelect = (client: any) => {\n    setSelectedClientId(client.id);\n    setClientName(client.name);\n    setRecipientEmail(client.email);\n    setShowClientDropdown(false);\n  };\n\n  const handleCreateClient = async () => {\n    if (!newClientName.trim() || !newClientEmail.trim()) {\n      return;\n    }\n\n    try {\n      setCreatingClient(true);\n      const response = await clientsAPI.create({\n        name: newClientName.trim(),\n        email: newClientEmail.trim()\n      });\n      \n      const newClient = response.data?.data;\n      setClients([...clients, newClient]);\n      \n      // Select the newly created client\n      setSelectedClientId(newClient.id);\n      setClientName(newClient.name);\n      setRecipientEmail(newClient.email);\n      \n      // Reset form\n      setShowNewClientForm(false);\n      setNewClientName('');\n      setNewClientEmail('');\n    } catch (error) {\n      console.error('Error creating client:', error);\n    } finally {\n      setCreatingClient(false);\n    }\n  };\n\n  const handleSendProposal = async () => {\n    if (!recipientEmail.trim()) {\n      setSendError('Please enter a recipient email');\n      return;\n    }\n\n    if (!clientName.trim()) {\n      setSendError('Please enter a client name');\n      return;\n    }\n\n    if (!selectedDraft) return;\n\n    try {\n      setSending(true);\n      setSendError('');\n      \n      await proposalsAPI.sendEmail(selectedDraft.id, { \n        recipientEmail: recipientEmail.trim(),\n        clientName: clientName.trim()\n      });\n      \n      // Close modal and refresh drafts\n      setShowSendModal(false);\n      setSelectedDraft(null);\n      setRecipientEmail('');\n      setClientName('');\n      \n      // Show success message\n      alert('Proposal sent successfully! It has been moved to Sent Proposals.');\n      \n      // Refresh the drafts list (the sent proposal will no longer appear here)\n      fetchDrafts();\n    } catch (err: any) {\n      setSendError(err.response?.data?.error || 'Failed to send proposal');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-6 py-12\">\n        <div className=\"mb-12 animate-fade-in-up\">\n          <div className=\"flex items-center mb-6\">\n            <div className=\"w-12 h-12 bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl flex items-center justify-center shadow-lg mr-4\">\n              <DocumentTextIcon className=\"w-6 h-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-4xl font-bold text-gray-900 tracking-tight\">\n                {viewMode === 'drafts' ? 'Draft Proposals' : 'Sent Proposals'}\n              </h1>\n              <p className=\"mt-2 text-xl text-gray-600\">\n                {viewMode === 'drafts' \n                  ? 'Edit and manage your draft proposals before sending them to clients'\n                  : 'Track your sent proposals and their current status'\n                }\n              </p>\n            </div>\n          </div>\n          \n          {/* View Mode Toggle */}\n          <div className=\"flex items-center justify-center mb-8\">\n            <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 p-2\">\n              <div className=\"flex\">\n                <button\n                  onClick={() => setViewMode('drafts')}\n                  className={`px-8 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center gap-3 ${\n                    viewMode === 'drafts'\n                      ? 'bg-emerald-500 text-white shadow-md'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                  }`}\n                >\n                  <DocumentTextIcon className=\"w-5 h-5\" />\n                  Draft Proposals\n                </button>\n                <button\n                  onClick={() => setViewMode('sent')}\n                  className={`px-8 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center gap-3 ${\n                    viewMode === 'sent'\n                      ? 'bg-emerald-500 text-white shadow-md'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                  }`}\n                >\n                  <PaperAirplaneIcon className=\"w-5 h-5\" />\n                  Sent Proposals\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center items-center h-40 text-lg text-gray-600 font-medium\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mr-3\"></div>\n            Loading drafts...\n          </div>\n        ) : error ? (\n          <div className=\"status-error rounded-xl p-6 text-center animate-fade-in-up\">\n            <p className=\"text-lg font-medium\">{error}</p>\n          </div>\n        ) : (viewMode === 'drafts' ? drafts.length === 0 : sentProposals.length === 0) ? (\n          <div className=\"flex flex-col items-center justify-center h-80 text-gray-400 animate-fade-in-up\">\n            <div className=\"w-20 h-20 bg-gradient-to-r from-gray-100 to-gray-200 rounded-2xl flex items-center justify-center mb-6\">\n              {viewMode === 'drafts' ? <DocumentTextIcon className=\"h-10 w-10\" /> : <PaperAirplaneIcon className=\"h-10 w-10\" />}\n            </div>\n            <div className=\"text-2xl font-semibold mb-2\">\n              {viewMode === 'drafts' ? 'No drafts found' : 'No sent proposals found'}\n            </div>\n            <div className=\"text-lg\">\n              {viewMode === 'drafts' ? 'Start by generating a new proposal!' : 'Send some proposals to see them here!'}\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {(viewMode === 'drafts' ? drafts : sentProposals).map((proposal) => (\n              <div key={proposal.id} className=\"card-elevated p-6 flex flex-col justify-between animate-fade-in-up\">\n                                  <div>\n                    <div className=\"flex items-center gap-3 mb-3\">\n                      <div className=\"w-10 h-10 bg-gradient-to-r from-primary-100 to-primary-200 rounded-xl flex items-center justify-center\">\n                        {viewMode === 'drafts' ? <DocumentTextIcon className=\"h-5 w-5 text-primary-600\" /> : <PaperAirplaneIcon className=\"h-5 w-5 text-primary-600\" />}\n                      </div>\n                      <span className=\"text-lg font-bold text-gray-900 truncate\" title={proposal.title}>{proposal.title}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600 mb-2\">\n                      <UserIcon className=\"h-4 w-4\" />\n                      <span className=\"font-medium\">{proposal.clientName || 'N/A'}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm text-gray-500 mb-4\">\n                      <CalendarIcon className=\"h-4 w-4\" />\n                      <span>{new Date(proposal.createdAt).toLocaleDateString()}</span>\n                    </div>\n                    <div className=\"text-gray-700 text-sm line-clamp-3 mb-4\">{proposal.description}</div>\n                    {viewMode === 'sent' && (\n                      <div className=\"flex items-center gap-2 text-sm mb-4\">\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                          proposal.status === 'WON' ? 'bg-green-100 text-green-800' :\n                          proposal.status === 'LOST' ? 'bg-red-100 text-red-800' :\n                          proposal.status === 'IN_REVIEW' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-blue-100 text-blue-800'\n                        }`}>\n                          {proposal.status.replace('_', ' ')}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                <div className=\"flex gap-2 mt-4 flex-wrap\">\n                  {viewMode === 'drafts' ? (\n                    <>\n                      <button\n                        className=\"btn-primary flex items-center gap-1 px-3 py-2 text-sm\"\n                        onClick={() => handleEdit(proposal.id)}\n                      >\n                        <PencilSquareIcon className=\"h-4 w-4\" /> Edit\n                      </button>\n                      <button\n                        className=\"btn-secondary flex items-center gap-1 px-3 py-2 text-sm\"\n                        onClick={() => handleView(proposal.id)}\n                      >\n                        <EyeIcon className=\"h-4 w-4\" /> View\n                      </button>\n                      <button\n                        className=\"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white font-medium px-3 py-2 rounded-xl hover:from-emerald-700 hover:to-emerald-800 transition-all duration-200 flex items-center gap-1 text-sm shadow-sm hover:shadow-md\"\n                        onClick={() => handleSend(proposal)}\n                      >\n                        <PaperAirplaneIcon className=\"h-4 w-4\" /> Send\n                      </button>\n                      <button\n                        className=\"bg-gradient-to-r from-rose-600 to-rose-700 text-white font-medium px-3 py-2 rounded-xl hover:from-rose-700 hover:to-rose-800 transition-all duration-200 flex items-center gap-1 text-sm shadow-sm hover:shadow-md\"\n                        onClick={() => handleDelete(proposal.id)}\n                      >\n                        <TrashIcon className=\"h-4 w-4\" /> Delete\n                      </button>\n                    </>\n                  ) : (\n                    <>\n                      <button\n                        className=\"btn-secondary flex items-center gap-1 px-3 py-2 text-sm\"\n                        onClick={() => handleView(proposal.id)}\n                      >\n                        <EyeIcon className=\"h-4 w-4\" /> View\n                      </button>\n                      <button\n                        className=\"btn-primary flex items-center gap-1 px-3 py-2 text-sm\"\n                        onClick={() => handleEdit(proposal.id)}\n                      >\n                        <PencilSquareIcon className=\"h-4 w-4\" /> Edit\n                      </button>\n                    </>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Send Proposal Modal */}\n      {showSendModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-lg max-w-md w-full p-6\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <PaperAirplaneIcon className=\"h-6 w-6 text-purple-500\" />\n              <h3 className=\"text-xl font-bold text-gray-900\">Send Proposal</h3>\n            </div>\n            \n            <div className=\"mb-4\">\n              <p className=\"text-gray-600 mb-2\">Send \"{selectedDraft?.title}\" to:</p>\n              \n              <div className=\"space-y-3\">\n                {/* Client Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Select Client <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"relative client-dropdown\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowClientDropdown(!showClientDropdown)}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-left flex items-center justify-between\"\n                      disabled={sending}\n                    >\n                      <span className={selectedClientId ? 'text-gray-900' : 'text-gray-500'}>\n                        {selectedClientId ? clientName : 'Choose a client or add new...'}\n                      </span>\n                      <ChevronDownIcon className=\"h-4 w-4 text-gray-400\" />\n                    </button>\n                    \n                    {showClientDropdown && (\n                      <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto\">\n                        {/* Existing Clients */}\n                        {clients.length > 0 ? (\n                          <div className=\"p-2\">\n                            <div className=\"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1\">\n                              Existing Clients\n                            </div>\n                            {clients.map((client) => (\n                              <button\n                                key={client.id}\n                                onClick={() => handleClientSelect(client)}\n                                className=\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md flex items-center gap-2\"\n                              >\n                                <UserIcon className=\"h-4 w-4 text-gray-400\" />\n                                <div>\n                                  <div className=\"font-medium text-gray-900\">{client.name}</div>\n                                  <div className=\"text-sm text-gray-500\">{client.email}</div>\n                                </div>\n                              </button>\n                            ))}\n                          </div>\n                        ) : (\n                          <div className=\"p-2\">\n                            <div className=\"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1\">\n                              No clients yet\n                            </div>\n                            <div className=\"px-3 py-2 text-sm text-gray-500\">\n                              Create your first client below\n                            </div>\n                          </div>\n                        )}\n                        \n                        {/* Add New Client Button */}\n                        <div className=\"border-t border-gray-200 p-2\">\n                          <button\n                            onClick={() => {\n                              setShowNewClientForm(true);\n                              setShowClientDropdown(false);\n                            }}\n                            className=\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md flex items-center gap-2 text-purple-600\"\n                          >\n                            <PlusIcon className=\"h-4 w-4\" />\n                            <span className=\"font-medium\">Add New Client</span>\n                          </button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* New Client Form */}\n                {showNewClientForm && (\n                  <div className=\"border border-purple-200 rounded-lg p-4 bg-purple-50\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h4 className=\"font-medium text-purple-900\">Add New Client</h4>\n                      <button\n                        onClick={() => setShowNewClientForm(false)}\n                        className=\"text-purple-600 hover:text-purple-800\"\n                      >\n                        ×\n                      </button>\n                    </div>\n                    \n                    <div className=\"space-y-3\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Client Name <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Enter client's full name\"\n                          value={newClientName}\n                          onChange={(e) => setNewClientName(e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                          disabled={creatingClient}\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Email Address <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"email\"\n                          placeholder=\"client@example.com\"\n                          value={newClientEmail}\n                          onChange={(e) => setNewClientEmail(e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                          disabled={creatingClient}\n                        />\n                      </div>\n                      \n                      <button\n                        onClick={handleCreateClient}\n                        disabled={creatingClient || !newClientName.trim() || !newClientEmail.trim()}\n                        className=\"w-full px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                      >\n                        {creatingClient ? (\n                          <>\n                            <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-white\"></div>\n                            Creating...\n                          </>\n                        ) : (\n                          <>\n                            <PlusIcon className=\"h-3 w-3\" />\n                            Create Client\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                )}\n\n                {/* Manual Input Fields (when no client selected) */}\n                {!selectedClientId && !showNewClientForm && (\n                  <>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Client Name <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Enter client's full name\"\n                        value={clientName}\n                        onChange={(e) => setClientName(e.target.value)}\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                        disabled={sending}\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Email Address <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"email\"\n                        placeholder=\"recipient@example.com\"\n                        value={recipientEmail}\n                        onChange={(e) => setRecipientEmail(e.target.value)}\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                        disabled={sending}\n                      />\n                    </div>\n                  </>\n                )}\n              </div>\n              \n              {sendError && (\n                <p className=\"text-red-500 text-sm mt-2\">{sendError}</p>\n              )}\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowSendModal(false)}\n                className=\"flex-1 px-4 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition\"\n                disabled={sending}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSendProposal}\n                disabled={sending || !recipientEmail.trim() || !clientName.trim()}\n                className=\"flex-1 px-4 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n              >\n                {sending ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                    Sending...\n                  </>\n                ) : (\n                  <>\n                    <PaperAirplaneIcon className=\"h-4 w-4\" />\n                    Send\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n} "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,YAAY,CAAEC,UAAU,KAAQ,iBAAiB,CAC1D,OACEC,gBAAgB,CAChBC,QAAQ,CACRC,YAAY,CACZC,gBAAgB,CAChBC,OAAO,CACPC,SAAS,CACTC,iBAAiB,CACjBC,eAAe,CACfC,QAAQ,KACH,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAErC,cAAe,SAAS,CAAAC,MAAMA,CAAA,CAAG,CAC/B,KAAM,CAAAC,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACoB,MAAM,CAAEC,SAAS,CAAC,CAAGvB,QAAQ,CAAQ,EAAE,CAAC,CAC/C,KAAM,CAACwB,aAAa,CAAEC,gBAAgB,CAAC,CAAGzB,QAAQ,CAAQ,EAAE,CAAC,CAC7D,KAAM,CAAC0B,OAAO,CAAEC,UAAU,CAAC,CAAG3B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC4B,KAAK,CAAEC,QAAQ,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC8B,aAAa,CAAEC,gBAAgB,CAAC,CAAG/B,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACgC,aAAa,CAAEC,gBAAgB,CAAC,CAAGjC,QAAQ,CAAM,IAAI,CAAC,CAC7D,KAAM,CAACkC,cAAc,CAAEC,iBAAiB,CAAC,CAAGnC,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACoC,UAAU,CAAEC,aAAa,CAAC,CAAGrC,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACsC,OAAO,CAAEC,UAAU,CAAC,CAAGvC,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACwC,SAAS,CAAEC,YAAY,CAAC,CAAGzC,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC0C,QAAQ,CAAEC,WAAW,CAAC,CAAG3C,QAAQ,CAAoB,QAAQ,CAAC,CAErE;AACA,KAAM,CAAC4C,OAAO,CAAEC,UAAU,CAAC,CAAG7C,QAAQ,CAAQ,EAAE,CAAC,CACjD,KAAM,CAAC8C,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG/C,QAAQ,CAAS,EAAE,CAAC,CACpE,KAAM,CAACgD,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGjD,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACkD,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGnD,QAAQ,CAAC,KAAK,CAAC,CACjE,KAAM,CAACoD,aAAa,CAAEC,gBAAgB,CAAC,CAAGrD,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACsD,cAAc,CAAEC,iBAAiB,CAAC,CAAGvD,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACwD,cAAc,CAAEC,iBAAiB,CAAC,CAAGzD,QAAQ,CAAC,KAAK,CAAC,CAE3DC,SAAS,CAAC,IAAM,CACdyD,cAAc,CAAC,CAAC,CAChBC,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA1D,SAAS,CAAC,IAAM,CACd,KAAM,CAAA2D,kBAAkB,CAAIC,KAAiB,EAAK,CAChD,KAAM,CAAAC,MAAM,CAAGD,KAAK,CAACC,MAAiB,CACtC,GAAI,CAACA,MAAM,CAACC,OAAO,CAAC,kBAAkB,CAAC,CAAE,CACvCd,qBAAqB,CAAC,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,GAAID,kBAAkB,CAAE,CACtBgB,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEL,kBAAkB,CAAC,CAC5D,CAEA,MAAO,IAAM,CACXI,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,CAACZ,kBAAkB,CAAC,CAAC,CAExB,KAAM,CAAAU,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF/B,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAwC,QAAQ,CAAG,KAAM,CAAAhE,YAAY,CAACiE,MAAM,CAAC,CAAC,CAC5C,KAAM,CAAAC,YAAY,CAAGF,QAAQ,CAACG,IAAI,CAACA,IAAI,CACvC/C,SAAS,CAAC8C,YAAY,CAACE,MAAM,CAAEC,CAAM,EAAKA,CAAC,CAACC,MAAM,GAAK,OAAO,CAAC,CAAC,CAChEhD,gBAAgB,CAAC4C,YAAY,CAACE,MAAM,CAAEC,CAAM,EAAK,CAAC,MAAM,CAAE,WAAW,CAAE,KAAK,CAAE,MAAM,CAAC,CAACE,QAAQ,CAACF,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAC5G,CAAE,MAAOE,GAAG,CAAE,CACZ9C,QAAQ,CAAC,0BAA0B,CAAC,CACtC,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAgC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,KAAAiB,cAAA,CACF,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAA/D,UAAU,CAACyE,UAAU,CAAC,CAAC,CAC9C,KAAM,CAAAC,WAAW,CAAG,EAAAF,cAAA,CAAAT,QAAQ,CAACG,IAAI,UAAAM,cAAA,iBAAbA,cAAA,CAAeN,IAAI,GAAI,EAAE,CAC7CzB,UAAU,CAACiC,WAAW,CAAC,CACzB,CAAE,MAAOlD,KAAK,CAAE,CACdmD,OAAO,CAACnD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CACF,CAAC,CAED,KAAM,CAAAoD,UAAU,CAAIC,EAAU,EAAK5D,QAAQ,CAAC,cAAc4D,EAAE,EAAE,CAAC,CAC/D,KAAM,CAAAC,UAAU,CAAID,EAAU,EAAK5D,QAAQ,CAAC,cAAc4D,EAAE,OAAO,CAAC,CACpE,KAAM,CAAAE,YAAY,CAAG,KAAO,CAAAF,EAAU,EAAK,CACzC,GAAIG,MAAM,CAACC,OAAO,CAAC,oBAAoB,CAAC,CAAE,CACxC,KAAM,CAAAlF,YAAY,CAACmF,MAAM,CAACL,EAAE,CAAC,CAC7BvB,cAAc,CAAC,CAAC,CAClB,CACF,CAAC,CAED,KAAM,CAAA6B,UAAU,CAAIC,KAAU,EAAK,CACjCvD,gBAAgB,CAACuD,KAAK,CAAC,CACvBrD,iBAAiB,CAAC,EAAE,CAAC,CACrBE,aAAa,CAAC,EAAE,CAAC,CACjBU,mBAAmB,CAAC,EAAE,CAAC,CACvBE,qBAAqB,CAAC,KAAK,CAAC,CAC5BE,oBAAoB,CAAC,KAAK,CAAC,CAC3BE,gBAAgB,CAAC,EAAE,CAAC,CACpBE,iBAAiB,CAAC,EAAE,CAAC,CACrBd,YAAY,CAAC,EAAE,CAAC,CAChBV,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAED,KAAM,CAAA0D,kBAAkB,CAAIC,MAAW,EAAK,CAC1C3C,mBAAmB,CAAC2C,MAAM,CAACT,EAAE,CAAC,CAC9B5C,aAAa,CAACqD,MAAM,CAACC,IAAI,CAAC,CAC1BxD,iBAAiB,CAACuD,MAAM,CAACE,KAAK,CAAC,CAC/B3C,qBAAqB,CAAC,KAAK,CAAC,CAC9B,CAAC,CAED,KAAM,CAAA4C,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CAACzC,aAAa,CAAC0C,IAAI,CAAC,CAAC,EAAI,CAACxC,cAAc,CAACwC,IAAI,CAAC,CAAC,CAAE,CACnD,OACF,CAEA,GAAI,KAAAC,eAAA,CACFtC,iBAAiB,CAAC,IAAI,CAAC,CACvB,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAA/D,UAAU,CAAC4F,MAAM,CAAC,CACvCL,IAAI,CAAEvC,aAAa,CAAC0C,IAAI,CAAC,CAAC,CAC1BF,KAAK,CAAEtC,cAAc,CAACwC,IAAI,CAAC,CAC7B,CAAC,CAAC,CAEF,KAAM,CAAAG,SAAS,EAAAF,eAAA,CAAG5B,QAAQ,CAACG,IAAI,UAAAyB,eAAA,iBAAbA,eAAA,CAAezB,IAAI,CACrCzB,UAAU,CAAC,CAAC,GAAGD,OAAO,CAAEqD,SAAS,CAAC,CAAC,CAEnC;AACAlD,mBAAmB,CAACkD,SAAS,CAAChB,EAAE,CAAC,CACjC5C,aAAa,CAAC4D,SAAS,CAACN,IAAI,CAAC,CAC7BxD,iBAAiB,CAAC8D,SAAS,CAACL,KAAK,CAAC,CAElC;AACAzC,oBAAoB,CAAC,KAAK,CAAC,CAC3BE,gBAAgB,CAAC,EAAE,CAAC,CACpBE,iBAAiB,CAAC,EAAE,CAAC,CACvB,CAAE,MAAO3B,KAAK,CAAE,CACdmD,OAAO,CAACnD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CAAC,OAAS,CACR6B,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CACF,CAAC,CAED,KAAM,CAAAyC,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CAAChE,cAAc,CAAC4D,IAAI,CAAC,CAAC,CAAE,CAC1BrD,YAAY,CAAC,gCAAgC,CAAC,CAC9C,OACF,CAEA,GAAI,CAACL,UAAU,CAAC0D,IAAI,CAAC,CAAC,CAAE,CACtBrD,YAAY,CAAC,4BAA4B,CAAC,CAC1C,OACF,CAEA,GAAI,CAACT,aAAa,CAAE,OAEpB,GAAI,CACFO,UAAU,CAAC,IAAI,CAAC,CAChBE,YAAY,CAAC,EAAE,CAAC,CAEhB,KAAM,CAAAtC,YAAY,CAACgG,SAAS,CAACnE,aAAa,CAACiD,EAAE,CAAE,CAC7C/C,cAAc,CAAEA,cAAc,CAAC4D,IAAI,CAAC,CAAC,CACrC1D,UAAU,CAAEA,UAAU,CAAC0D,IAAI,CAAC,CAC9B,CAAC,CAAC,CAEF;AACA/D,gBAAgB,CAAC,KAAK,CAAC,CACvBE,gBAAgB,CAAC,IAAI,CAAC,CACtBE,iBAAiB,CAAC,EAAE,CAAC,CACrBE,aAAa,CAAC,EAAE,CAAC,CAEjB;AACA+D,KAAK,CAAC,kEAAkE,CAAC,CAEzE;AACAC,WAAW,CAAC,CAAC,CACf,CAAE,MAAO1B,GAAQ,CAAE,KAAA2B,aAAA,CAAAC,kBAAA,CACjB9D,YAAY,CAAC,EAAA6D,aAAA,CAAA3B,GAAG,CAACR,QAAQ,UAAAmC,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAchC,IAAI,UAAAiC,kBAAA,iBAAlBA,kBAAA,CAAoB3E,KAAK,GAAI,yBAAyB,CAAC,CACtE,CAAC,OAAS,CACRW,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEtB,KAAA,QAAKuF,SAAS,CAAC,kEAAkE,CAAAC,QAAA,eAC/ExF,KAAA,QAAKuF,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3CxF,KAAA,QAAKuF,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCxF,KAAA,QAAKuF,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrC1F,IAAA,QAAKyF,SAAS,CAAC,uHAAuH,CAAAC,QAAA,cACpI1F,IAAA,CAACV,gBAAgB,EAACmG,SAAS,CAAC,oBAAoB,CAAE,CAAC,CAChD,CAAC,cACNvF,KAAA,QAAAwF,QAAA,eACE1F,IAAA,OAAIyF,SAAS,CAAC,iDAAiD,CAAAC,QAAA,CAC5D/D,QAAQ,GAAK,QAAQ,CAAG,iBAAiB,CAAG,gBAAgB,CAC3D,CAAC,cACL3B,IAAA,MAAGyF,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CACtC/D,QAAQ,GAAK,QAAQ,CAClB,qEAAqE,CACrE,oDAAoD,CAEvD,CAAC,EACD,CAAC,EACH,CAAC,cAGN3B,IAAA,QAAKyF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpD1F,IAAA,QAAKyF,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cACvExF,KAAA,QAAKuF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBxF,KAAA,WACEyF,OAAO,CAAEA,CAAA,GAAM/D,WAAW,CAAC,QAAQ,CAAE,CACrC6D,SAAS,CAAE,kGACT9D,QAAQ,GAAK,QAAQ,CACjB,qCAAqC,CACrC,oDAAoD,EACvD,CAAA+D,QAAA,eAEH1F,IAAA,CAACV,gBAAgB,EAACmG,SAAS,CAAC,SAAS,CAAE,CAAC,kBAE1C,EAAQ,CAAC,cACTvF,KAAA,WACEyF,OAAO,CAAEA,CAAA,GAAM/D,WAAW,CAAC,MAAM,CAAE,CACnC6D,SAAS,CAAE,kGACT9D,QAAQ,GAAK,MAAM,CACf,qCAAqC,CACrC,oDAAoD,EACvD,CAAA+D,QAAA,eAEH1F,IAAA,CAACJ,iBAAiB,EAAC6F,SAAS,CAAC,SAAS,CAAE,CAAC,iBAE3C,EAAQ,CAAC,EACN,CAAC,CACH,CAAC,CACH,CAAC,EACH,CAAC,CAEL9E,OAAO,cACNT,KAAA,QAAKuF,SAAS,CAAC,yEAAyE,CAAAC,QAAA,eACtF1F,IAAA,QAAKyF,SAAS,CAAC,sEAAsE,CAAM,CAAC,oBAE9F,EAAK,CAAC,CACJ5E,KAAK,cACPb,IAAA,QAAKyF,SAAS,CAAC,4DAA4D,CAAAC,QAAA,cACzE1F,IAAA,MAAGyF,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAE7E,KAAK,CAAI,CAAC,CAC3C,CAAC,CACJ,CAACc,QAAQ,GAAK,QAAQ,CAAGpB,MAAM,CAACqF,MAAM,GAAK,CAAC,CAAGnF,aAAa,CAACmF,MAAM,GAAK,CAAC,eAC3E1F,KAAA,QAAKuF,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAC9F1F,IAAA,QAAKyF,SAAS,CAAC,wGAAwG,CAAAC,QAAA,CACpH/D,QAAQ,GAAK,QAAQ,cAAG3B,IAAA,CAACV,gBAAgB,EAACmG,SAAS,CAAC,WAAW,CAAE,CAAC,cAAGzF,IAAA,CAACJ,iBAAiB,EAAC6F,SAAS,CAAC,WAAW,CAAE,CAAC,CAC9G,CAAC,cACNzF,IAAA,QAAKyF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CACzC/D,QAAQ,GAAK,QAAQ,CAAG,iBAAiB,CAAG,yBAAyB,CACnE,CAAC,cACN3B,IAAA,QAAKyF,SAAS,CAAC,SAAS,CAAAC,QAAA,CACrB/D,QAAQ,GAAK,QAAQ,CAAG,qCAAqC,CAAG,uCAAuC,CACrG,CAAC,EACH,CAAC,cAEN3B,IAAA,QAAKyF,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAClE,CAAC/D,QAAQ,GAAK,QAAQ,CAAGpB,MAAM,CAAGE,aAAa,EAAEoF,GAAG,CAAEC,QAAQ,eAC7D5F,KAAA,QAAuBuF,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eACjFxF,KAAA,QAAAwF,QAAA,eACdxF,KAAA,QAAKuF,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C1F,IAAA,QAAKyF,SAAS,CAAC,wGAAwG,CAAAC,QAAA,CACpH/D,QAAQ,GAAK,QAAQ,cAAG3B,IAAA,CAACV,gBAAgB,EAACmG,SAAS,CAAC,0BAA0B,CAAE,CAAC,cAAGzF,IAAA,CAACJ,iBAAiB,EAAC6F,SAAS,CAAC,0BAA0B,CAAE,CAAC,CAC5I,CAAC,cACNzF,IAAA,SAAMyF,SAAS,CAAC,0CAA0C,CAACM,KAAK,CAAED,QAAQ,CAACC,KAAM,CAAAL,QAAA,CAAEI,QAAQ,CAACC,KAAK,CAAO,CAAC,EACtG,CAAC,cACN7F,KAAA,QAAKuF,SAAS,CAAC,oDAAoD,CAAAC,QAAA,eACjE1F,IAAA,CAACT,QAAQ,EAACkG,SAAS,CAAC,SAAS,CAAE,CAAC,cAChCzF,IAAA,SAAMyF,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEI,QAAQ,CAACzE,UAAU,EAAI,KAAK,CAAO,CAAC,EAChE,CAAC,cACNnB,KAAA,QAAKuF,SAAS,CAAC,oDAAoD,CAAAC,QAAA,eACjE1F,IAAA,CAACR,YAAY,EAACiG,SAAS,CAAC,SAAS,CAAE,CAAC,cACpCzF,IAAA,SAAA0F,QAAA,CAAO,GAAI,CAAAM,IAAI,CAACF,QAAQ,CAACG,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAO,CAAC,EAC7D,CAAC,cACNlG,IAAA,QAAKyF,SAAS,CAAC,yCAAyC,CAAAC,QAAA,CAAEI,QAAQ,CAACK,WAAW,CAAM,CAAC,CACpFxE,QAAQ,GAAK,MAAM,eAClB3B,IAAA,QAAKyF,SAAS,CAAC,sCAAsC,CAAAC,QAAA,cACnD1F,IAAA,SAAMyF,SAAS,CAAE,8CACfK,QAAQ,CAACpC,MAAM,GAAK,KAAK,CAAG,6BAA6B,CACzDoC,QAAQ,CAACpC,MAAM,GAAK,MAAM,CAAG,yBAAyB,CACtDoC,QAAQ,CAACpC,MAAM,GAAK,WAAW,CAAG,+BAA+B,CACjE,2BAA2B,EAC1B,CAAAgC,QAAA,CACAI,QAAQ,CAACpC,MAAM,CAAC0C,OAAO,CAAC,GAAG,CAAE,GAAG,CAAC,CAC9B,CAAC,CACJ,CACN,EACE,CAAC,cACRpG,IAAA,QAAKyF,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACvC/D,QAAQ,GAAK,QAAQ,cACpBzB,KAAA,CAAAE,SAAA,EAAAsF,QAAA,eACExF,KAAA,WACEuF,SAAS,CAAC,uDAAuD,CACjEE,OAAO,CAAEA,CAAA,GAAM1B,UAAU,CAAC6B,QAAQ,CAAC5B,EAAE,CAAE,CAAAwB,QAAA,eAEvC1F,IAAA,CAACP,gBAAgB,EAACgG,SAAS,CAAC,SAAS,CAAE,CAAC,QAC1C,EAAQ,CAAC,cACTvF,KAAA,WACEuF,SAAS,CAAC,yDAAyD,CACnEE,OAAO,CAAEA,CAAA,GAAMxB,UAAU,CAAC2B,QAAQ,CAAC5B,EAAE,CAAE,CAAAwB,QAAA,eAEvC1F,IAAA,CAACN,OAAO,EAAC+F,SAAS,CAAC,SAAS,CAAE,CAAC,QACjC,EAAQ,CAAC,cACTvF,KAAA,WACEuF,SAAS,CAAC,gOAAgO,CAC1OE,OAAO,CAAEA,CAAA,GAAMnB,UAAU,CAACsB,QAAQ,CAAE,CAAAJ,QAAA,eAEpC1F,IAAA,CAACJ,iBAAiB,EAAC6F,SAAS,CAAC,SAAS,CAAE,CAAC,QAC3C,EAAQ,CAAC,cACTvF,KAAA,WACEuF,SAAS,CAAC,oNAAoN,CAC9NE,OAAO,CAAEA,CAAA,GAAMvB,YAAY,CAAC0B,QAAQ,CAAC5B,EAAE,CAAE,CAAAwB,QAAA,eAEzC1F,IAAA,CAACL,SAAS,EAAC8F,SAAS,CAAC,SAAS,CAAE,CAAC,UACnC,EAAQ,CAAC,EACT,CAAC,cAEHvF,KAAA,CAAAE,SAAA,EAAAsF,QAAA,eACExF,KAAA,WACEuF,SAAS,CAAC,yDAAyD,CACnEE,OAAO,CAAEA,CAAA,GAAMxB,UAAU,CAAC2B,QAAQ,CAAC5B,EAAE,CAAE,CAAAwB,QAAA,eAEvC1F,IAAA,CAACN,OAAO,EAAC+F,SAAS,CAAC,SAAS,CAAE,CAAC,QACjC,EAAQ,CAAC,cACTvF,KAAA,WACEuF,SAAS,CAAC,uDAAuD,CACjEE,OAAO,CAAEA,CAAA,GAAM1B,UAAU,CAAC6B,QAAQ,CAAC5B,EAAE,CAAE,CAAAwB,QAAA,eAEvC1F,IAAA,CAACP,gBAAgB,EAACgG,SAAS,CAAC,SAAS,CAAE,CAAC,QAC1C,EAAQ,CAAC,EACT,CACH,CACE,CAAC,GA1EEK,QAAQ,CAAC5B,EA2Ed,CACN,CAAC,CACC,CACN,EACE,CAAC,CAGLnD,aAAa,eACZf,IAAA,QAAKyF,SAAS,CAAC,gFAAgF,CAAAC,QAAA,cAC7FxF,KAAA,QAAKuF,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAChExF,KAAA,QAAKuF,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C1F,IAAA,CAACJ,iBAAiB,EAAC6F,SAAS,CAAC,yBAAyB,CAAE,CAAC,cACzDzF,IAAA,OAAIyF,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,EAC/D,CAAC,cAENxF,KAAA,QAAKuF,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBxF,KAAA,MAAGuF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAC,SAAM,CAACzE,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAE8E,KAAK,CAAC,QAAK,EAAG,CAAC,cAEvE7F,KAAA,QAAKuF,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExBxF,KAAA,QAAAwF,QAAA,eACExF,KAAA,UAAOuF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,gBAChD,cAAA1F,IAAA,SAAMyF,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAChD,CAAC,cACRxF,KAAA,QAAKuF,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCxF,KAAA,WACEmG,IAAI,CAAC,QAAQ,CACbV,OAAO,CAAEA,CAAA,GAAMzD,qBAAqB,CAAC,CAACD,kBAAkB,CAAE,CAC1DwD,SAAS,CAAC,qKAAqK,CAC/Ka,QAAQ,CAAE/E,OAAQ,CAAAmE,QAAA,eAElB1F,IAAA,SAAMyF,SAAS,CAAE1D,gBAAgB,CAAG,eAAe,CAAG,eAAgB,CAAA2D,QAAA,CACnE3D,gBAAgB,CAAGV,UAAU,CAAG,+BAA+B,CAC5D,CAAC,cACPrB,IAAA,CAACH,eAAe,EAAC4F,SAAS,CAAC,uBAAuB,CAAE,CAAC,EAC/C,CAAC,CAERxD,kBAAkB,eACjB/B,KAAA,QAAKuF,SAAS,CAAC,yGAAyG,CAAAC,QAAA,EAErH7D,OAAO,CAAC+D,MAAM,CAAG,CAAC,cACjB1F,KAAA,QAAKuF,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB1F,IAAA,QAAKyF,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CAAC,kBAErF,CAAK,CAAC,CACL7D,OAAO,CAACgE,GAAG,CAAElB,MAAM,eAClBzE,KAAA,WAEEyF,OAAO,CAAEA,CAAA,GAAMjB,kBAAkB,CAACC,MAAM,CAAE,CAC1Cc,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAE3F1F,IAAA,CAACT,QAAQ,EAACkG,SAAS,CAAC,uBAAuB,CAAE,CAAC,cAC9CvF,KAAA,QAAAwF,QAAA,eACE1F,IAAA,QAAKyF,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEf,MAAM,CAACC,IAAI,CAAM,CAAC,cAC9D5E,IAAA,QAAKyF,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAEf,MAAM,CAACE,KAAK,CAAM,CAAC,EACxD,CAAC,GARDF,MAAM,CAACT,EASN,CACT,CAAC,EACC,CAAC,cAENhE,KAAA,QAAKuF,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB1F,IAAA,QAAKyF,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CAAC,gBAErF,CAAK,CAAC,cACN1F,IAAA,QAAKyF,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAAC,gCAEjD,CAAK,CAAC,EACH,CACN,cAGD1F,IAAA,QAAKyF,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cAC3CxF,KAAA,WACEyF,OAAO,CAAEA,CAAA,GAAM,CACbvD,oBAAoB,CAAC,IAAI,CAAC,CAC1BF,qBAAqB,CAAC,KAAK,CAAC,CAC9B,CAAE,CACFuD,SAAS,CAAC,iGAAiG,CAAAC,QAAA,eAE3G1F,IAAA,CAACF,QAAQ,EAAC2F,SAAS,CAAC,SAAS,CAAE,CAAC,cAChCzF,IAAA,SAAMyF,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,gBAAc,CAAM,CAAC,EAC7C,CAAC,CACN,CAAC,EACH,CACN,EACE,CAAC,EACH,CAAC,CAGLvD,iBAAiB,eAChBjC,KAAA,QAAKuF,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACnExF,KAAA,QAAKuF,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrD1F,IAAA,OAAIyF,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC/D1F,IAAA,WACE2F,OAAO,CAAEA,CAAA,GAAMvD,oBAAoB,CAAC,KAAK,CAAE,CAC3CqD,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAClD,MAED,CAAQ,CAAC,EACN,CAAC,cAENxF,KAAA,QAAKuF,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxF,KAAA,QAAAwF,QAAA,eACExF,KAAA,UAAOuF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,cAClD,cAAA1F,IAAA,SAAMyF,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAC9C,CAAC,cACR1F,IAAA,UACEqG,IAAI,CAAC,MAAM,CACXE,WAAW,CAAC,0BAA0B,CACtCC,KAAK,CAAEnE,aAAc,CACrBoE,QAAQ,CAAGC,CAAC,EAAKpE,gBAAgB,CAACoE,CAAC,CAAC3D,MAAM,CAACyD,KAAK,CAAE,CAClDf,SAAS,CAAC,gHAAgH,CAC1Ha,QAAQ,CAAE7D,cAAe,CAC1B,CAAC,EACC,CAAC,cAENvC,KAAA,QAAAwF,QAAA,eACExF,KAAA,UAAOuF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,gBAChD,cAAA1F,IAAA,SAAMyF,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAChD,CAAC,cACR1F,IAAA,UACEqG,IAAI,CAAC,OAAO,CACZE,WAAW,CAAC,oBAAoB,CAChCC,KAAK,CAAEjE,cAAe,CACtBkE,QAAQ,CAAGC,CAAC,EAAKlE,iBAAiB,CAACkE,CAAC,CAAC3D,MAAM,CAACyD,KAAK,CAAE,CACnDf,SAAS,CAAC,gHAAgH,CAC1Ha,QAAQ,CAAE7D,cAAe,CAC1B,CAAC,EACC,CAAC,cAENzC,IAAA,WACE2F,OAAO,CAAEb,kBAAmB,CAC5BwB,QAAQ,CAAE7D,cAAc,EAAI,CAACJ,aAAa,CAAC0C,IAAI,CAAC,CAAC,EAAI,CAACxC,cAAc,CAACwC,IAAI,CAAC,CAAE,CAC5EU,SAAS,CAAC,4KAA4K,CAAAC,QAAA,CAErLjD,cAAc,cACbvC,KAAA,CAAAE,SAAA,EAAAsF,QAAA,eACE1F,IAAA,QAAKyF,SAAS,CAAC,2DAA2D,CAAM,CAAC,cAEnF,EAAE,CAAC,cAEHvF,KAAA,CAAAE,SAAA,EAAAsF,QAAA,eACE1F,IAAA,CAACF,QAAQ,EAAC2F,SAAS,CAAC,SAAS,CAAE,CAAC,gBAElC,EAAE,CACH,CACK,CAAC,EACN,CAAC,EACH,CACN,CAGA,CAAC1D,gBAAgB,EAAI,CAACI,iBAAiB,eACtCjC,KAAA,CAAAE,SAAA,EAAAsF,QAAA,eACExF,KAAA,QAAAwF,QAAA,eACExF,KAAA,UAAOuF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,cAClD,cAAA1F,IAAA,SAAMyF,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAC9C,CAAC,cACR1F,IAAA,UACEqG,IAAI,CAAC,MAAM,CACXE,WAAW,CAAC,0BAA0B,CACtCC,KAAK,CAAEnF,UAAW,CAClBoF,QAAQ,CAAGC,CAAC,EAAKpF,aAAa,CAACoF,CAAC,CAAC3D,MAAM,CAACyD,KAAK,CAAE,CAC/Cf,SAAS,CAAC,gHAAgH,CAC1Ha,QAAQ,CAAE/E,OAAQ,CACnB,CAAC,EACC,CAAC,cAENrB,KAAA,QAAAwF,QAAA,eACExF,KAAA,UAAOuF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,gBAChD,cAAA1F,IAAA,SAAMyF,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,EAChD,CAAC,cACR1F,IAAA,UACEqG,IAAI,CAAC,OAAO,CACZE,WAAW,CAAC,uBAAuB,CACnCC,KAAK,CAAErF,cAAe,CACtBsF,QAAQ,CAAGC,CAAC,EAAKtF,iBAAiB,CAACsF,CAAC,CAAC3D,MAAM,CAACyD,KAAK,CAAE,CACnDf,SAAS,CAAC,gHAAgH,CAC1Ha,QAAQ,CAAE/E,OAAQ,CACnB,CAAC,EACC,CAAC,EACN,CACH,EACE,CAAC,CAELE,SAAS,eACRzB,IAAA,MAAGyF,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAEjE,SAAS,CAAI,CACxD,EACE,CAAC,cAENvB,KAAA,QAAKuF,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB1F,IAAA,WACE2F,OAAO,CAAEA,CAAA,GAAM3E,gBAAgB,CAAC,KAAK,CAAE,CACvCyE,SAAS,CAAC,8FAA8F,CACxGa,QAAQ,CAAE/E,OAAQ,CAAAmE,QAAA,CACnB,QAED,CAAQ,CAAC,cACT1F,IAAA,WACE2F,OAAO,CAAER,kBAAmB,CAC5BmB,QAAQ,CAAE/E,OAAO,EAAI,CAACJ,cAAc,CAAC4D,IAAI,CAAC,CAAC,EAAI,CAAC1D,UAAU,CAAC0D,IAAI,CAAC,CAAE,CAClEU,SAAS,CAAC,wLAAwL,CAAAC,QAAA,CAEjMnE,OAAO,cACNrB,KAAA,CAAAE,SAAA,EAAAsF,QAAA,eACE1F,IAAA,QAAKyF,SAAS,CAAC,2DAA2D,CAAM,CAAC,aAEnF,EAAE,CAAC,cAEHvF,KAAA,CAAAE,SAAA,EAAAsF,QAAA,eACE1F,IAAA,CAACJ,iBAAiB,EAAC6F,SAAS,CAAC,SAAS,CAAE,CAAC,OAE3C,EAAE,CACH,CACK,CAAC,EACN,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}