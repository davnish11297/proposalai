{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{toast}from'react-hot-toast';import{proposalsAPI,getOpenRouterChatCompletion}from'../services/api';import ClientSelectionModal from'../components/ClientSelectionModal';import ReactMarkdown from'react-markdown';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProposalEditor=()=>{const{id}=useParams();const navigate=useNavigate();const[loading,setLoading]=useState(false);const[generating,setGenerating]=useState(false);const[showClientModal,setShowClientModal]=useState(false);const[selectedClientId,setSelectedClientId]=useState();const[proposal,setProposal]=useState({title:'',description:'',clientName:'',clientEmail:'',type:'PROPOSAL',content:{executiveSummary:'',approach:'',budgetDetails:'',timeline:'',budget:''},metadata:{industry:'',companySize:'',projectScope:''}});const isNewProposal=!id;useEffect(()=>{const fetchProposal=async()=>{try{const{data}=await proposalsAPI.getById(id);setProposal(data.data);setSelectedClientId(data.data.clientId);}catch(error){console.error('Failed to fetch proposal:',error);toast.error('Failed to load proposal');}};if(id){fetchProposal();}},[id]);const handleGenerateWithAI=async()=>{// Validate required fields\nconsole.log('ðŸ” Current proposal state:',{clientName:proposal.clientName,description:proposal.description,hasClientName:!!proposal.clientName,hasDescription:!!proposal.description});if(!proposal.clientName||!proposal.description){const missingFields=[];if(!proposal.clientName)missingFields.push('Client Name');if(!proposal.description)missingFields.push('Description');toast.error(`Please fill in: ${missingFields.join(' and ')} before generating content`);return;}try{var _proposal$metadata,_proposal$metadata2,_proposal$content,_proposal$content2,_result$choices,_result$choices$,_result$choices$$mess,_execMatch$,_approachMatch$,_budgetMatch$,_timelineMatch$;setGenerating(true);// Compose prompt for OpenRouter\nconst messages=[{role:'system',content:`You are an expert proposal writer. Generate a detailed, professional proposal for the following client and project. Structure your response with clear sections: Executive Summary, Approach, Budget Details, and Timeline. Use clear, persuasive language and make each section comprehensive.`},{role:'user',content:`Client Name: ${proposal.clientName}\\nIndustry: ${((_proposal$metadata=proposal.metadata)===null||_proposal$metadata===void 0?void 0:_proposal$metadata.industry)||''}\\nCompany Size: ${((_proposal$metadata2=proposal.metadata)===null||_proposal$metadata2===void 0?void 0:_proposal$metadata2.companySize)||''}\\nProject Description: ${proposal.description}\\nBudget: ${((_proposal$content=proposal.content)===null||_proposal$content===void 0?void 0:_proposal$content.budget)||''}\\nTimeline: ${((_proposal$content2=proposal.content)===null||_proposal$content2===void 0?void 0:_proposal$content2.timeline)||''}\\n\\nPlease provide a professional proposal with the following sections:\\n1. Executive Summary\\n2. Approach\\n3. Budget Details\\n4. Timeline`}];console.log('ðŸš€ Sending AI generation request with messages:',messages);const result=await getOpenRouterChatCompletion(messages);console.log('âœ… AI response received:',result);const aiContent=((_result$choices=result.choices)===null||_result$choices===void 0?void 0:(_result$choices$=_result$choices[0])===null||_result$choices$===void 0?void 0:(_result$choices$$mess=_result$choices$.message)===null||_result$choices$$mess===void 0?void 0:_result$choices$$mess.content)||'';console.log('ðŸ“ AI generated content:',aiContent);// Parse the AI response into sections\nconsole.log('ï¿½ï¿½ Raw AI response:',aiContent);// Improved parsing with better regex patterns\nlet executiveSummary='',approach='',budgetDetails='',timeline='';// More flexible regex patterns that handle various formats\nconst execMatch=aiContent.match(/(?:Executive Summary|EXECUTIVE SUMMARY)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Approach|APPROACH|Budget|BUDGET|Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);const approachMatch=aiContent.match(/(?:Approach|APPROACH|Methodology|METHODOLOGY)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Budget|BUDGET|Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);const budgetMatch=aiContent.match(/(?:Budget Details?|BUDGET DETAILS?|Budget|BUDGET)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);const timelineMatch=aiContent.match(/(?:Timeline|TIMELINE|Schedule|SCHEDULE)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Next Steps|NEXT STEPS|Conclusion|CONCLUSION)[:\\s\\n]|$)/i);executiveSummary=(execMatch===null||execMatch===void 0?void 0:(_execMatch$=execMatch[1])===null||_execMatch$===void 0?void 0:_execMatch$.trim())||'';approach=(approachMatch===null||approachMatch===void 0?void 0:(_approachMatch$=approachMatch[1])===null||_approachMatch$===void 0?void 0:_approachMatch$.trim())||'';budgetDetails=(budgetMatch===null||budgetMatch===void 0?void 0:(_budgetMatch$=budgetMatch[1])===null||_budgetMatch$===void 0?void 0:_budgetMatch$.trim())||'';timeline=(timelineMatch===null||timelineMatch===void 0?void 0:(_timelineMatch$=timelineMatch[1])===null||_timelineMatch$===void 0?void 0:_timelineMatch$.trim())||'';// If regex parsing didn't work well, try alternative parsing\nif(!executiveSummary&&!approach&&!budgetDetails&&!timeline){console.log('âš ï¸ Primary regex parsing failed, trying alternative parsing');// Split by numbered sections or headers\nconst sections=aiContent.split(/\\n\\s*(?:\\d+\\.\\s*)?(?:Executive Summary|Approach|Budget|Timeline|Methodology|Schedule)/i);if(sections.length>1){var _sections$,_sections$2,_sections$3,_sections$4;executiveSummary=((_sections$=sections[1])===null||_sections$===void 0?void 0:_sections$.trim())||'';approach=((_sections$2=sections[2])===null||_sections$2===void 0?void 0:_sections$2.trim())||'';budgetDetails=((_sections$3=sections[3])===null||_sections$3===void 0?void 0:_sections$3.trim())||'';timeline=((_sections$4=sections[4])===null||_sections$4===void 0?void 0:_sections$4.trim())||'';}else{// Last resort: use the full content as executive summary\nconsole.log('âš ï¸ Alternative parsing failed, using full content as executive summary');executiveSummary=aiContent;}}// Clean up the content by removing extra whitespace and formatting\nconst cleanContent=content=>{return content.replace(/\\n\\s*\\n\\s*\\n/g,'\\n\\n')// Remove excessive line breaks\n.replace(/^\\s+|\\s+$/g,'')// Trim whitespace\n.replace(/\\*\\*(.*?)\\*\\*/g,'$1')// Remove bold formatting\n.replace(/\\*(.*?)\\*/g,'$1');// Remove italic formatting\n};executiveSummary=cleanContent(executiveSummary);approach=cleanContent(approach);budgetDetails=cleanContent(budgetDetails);timeline=cleanContent(timeline);console.log('ðŸ“‹ Parsed sections:',{executiveSummary:executiveSummary.substring(0,150)+(executiveSummary.length>150?'...':''),approach:approach.substring(0,150)+(approach.length>150?'...':''),budgetDetails:budgetDetails.substring(0,150)+(budgetDetails.length>150?'...':''),timeline:timeline.substring(0,150)+(timeline.length>150?'...':'')});setProposal({...proposal,content:{...proposal.content,executiveSummary,approach,budgetDetails,timeline}});toast.success('Proposal content generated successfully!');}catch(error){console.error('âŒ Content generation error:',error);console.error('âŒ Error details:',{message:error.message,stack:error.stack,response:error.response});toast.error(error.message||'Failed to generate proposal content');}finally{setGenerating(false);}};const handleSave=async()=>{try{setLoading(true);const proposalData={...proposal// teamId: selectedTeamId, // teamId is not used\n};if(isNewProposal){// Create new proposal\nawait proposalsAPI.create(proposalData);toast.success('Proposal created successfully!');navigate('/proposals');}else{// Update existing proposal\nawait proposalsAPI.update(id,proposalData);toast.success('Proposal updated successfully!');}navigate('/proposals');}catch(error){var _error$response,_error$response$data;console.error('Save error:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to save proposal');}finally{setLoading(false);}};const handleSubmit=async()=>{try{setLoading(true);const proposalData={...proposal,// teamId: selectedTeamId, // teamId is not used\nstatus:'IN_REVIEW'};if(isNewProposal){// Create and submit new proposal\nawait proposalsAPI.create(proposalData);toast.success('Proposal submitted successfully!');navigate('/proposals');}else{// Update and submit existing proposal\nawait proposalsAPI.update(id,proposalData);toast.success('Proposal submitted successfully!');navigate('/proposals');}}catch(error){var _error$response2,_error$response2$data;console.error('Submit error:',error);toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to submit proposal');}finally{setLoading(false);}};const handleClientSelect=client=>{setProposal({...proposal,clientName:client.name,clientEmail:client.email||''});setSelectedClientId(client.id);toast.success(`Selected client: ${client.name}`);};const handleClearClient=()=>{setProposal({...proposal,clientName:'',clientEmail:''});setSelectedClientId(undefined);toast.success('Client selection cleared');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-20 w-20 border-b-4 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"bg-gradient-to-r from-blue-600 to-blue-400 shadow-lg w-full z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center h-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-extrabold text-white tracking-wider drop-shadow\",children:\"ProposalAI\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-8\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",className:\"text-white font-semibold border-b-2 border-white/80 pb-1 transition-colors\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/drafts\",className:\"text-white/80 hover:text-white transition-colors\",children:\"Drafts\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/sent-proposals\",className:\"text-white/80 hover:text-white transition-colors\",children:\"Sent Proposals\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/profile\",className:\"text-white/80 hover:text-white transition-colors\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{localStorage.removeItem('token');localStorage.removeItem('user');window.location.href='/login';},className:\"text-white/80 hover:text-white transition-colors\",children:\"Logout\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 min-h-0\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"w-[380px] min-w-[380px] max-w-[380px] bg-white border-r border-gray-200 flex flex-col p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-8\",children:isNewProposal?'Create New Proposal':'Edit Proposal'}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:[\"Proposal Title \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.title,onChange:e=>setProposal({...proposal,title:e.target.value}),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"Enter proposal title\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:[\"Client Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.clientName,onChange:e=>setProposal({...proposal,clientName:e.target.value}),className:\"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"Enter client name\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowClientModal(true),className:`px-6 py-3 rounded-xl transition-all duration-200 flex items-center gap-2 whitespace-nowrap font-medium ${selectedClientId?'bg-green-600 text-white hover:bg-green-700 shadow-md':'bg-blue-600 text-white hover:bg-blue-700 shadow-md'}`,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"})}),selectedClientId?'Change':'Select']})]}),selectedClientId&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-green-800\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),\"Client selected from database\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleClearClient,className:\"text-red-600 hover:text-red-800 text-sm font-medium\",children:\"Clear\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:[\"Description \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{value:proposal.description,onChange:e=>setProposal({...proposal,description:e.target.value}),rows:6,className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200\",placeholder:\"Describe the project, requirements, and objectives...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Budget\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.content.budget,onChange:e=>setProposal({...proposal,content:{...proposal.content,budget:e.target.value}}),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"e.g., $50,000\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Timeline\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.content.timeline,onChange:e=>setProposal({...proposal,content:{...proposal.content,timeline:e.target.value}}),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"e.g., 3 months\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-3\",children:\"Industry\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:proposal.metadata.industry,onChange:e=>setProposal({...proposal,metadata:{...proposal.metadata,industry:e.target.value}}),className:\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",placeholder:\"e.g., Technology, Healthcare, Finance\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSave,disabled:loading,className:\"flex-1 px-4 py-3 bg-gray-600 text-white font-medium rounded-xl hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 transition-all duration-200\",children:\"Save Draft\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSubmit,disabled:loading,className:\"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-300 transform hover:scale-105\",children:\"Submit Proposal\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleGenerateWithAI,disabled:generating||loading||!proposal.clientName||!proposal.description,className:`w-full mt-8 py-4 px-6 rounded-xl font-semibold text-white transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-lg ${generating||loading||!proposal.clientName||!proposal.description?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:ring-blue-500'}`,children:generating?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Generating Content...\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 10V3L4 14h7v7l9-11h-7z\"})}),\"Generate AI Content\"]})}),(!proposal.clientName||!proposal.description)&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 text-center mt-2\",children:\"Enter client name and description to enable AI generation\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 flex flex-col p-12 overflow-y-auto bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:\"AI Generated Content\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Review and customize your AI-generated proposal content\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-[700px] min-h-[300px] flex-1 overflow-y-auto pr-2\",children:generating?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 animate-ping\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full opacity-20\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 animate-ping\",style:{animationDelay:'0.5s'},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full opacity-20\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-white animate-spin\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 10V3L4 14h7v7l9-11h-7z\"})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Generating Your Proposal\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Our AI is crafting a professional proposal tailored to your needs...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mt-4 space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\",style:{animationDelay:'0.1s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}})]})]})]}):!proposal.content.executiveSummary&&!proposal.content.approach&&!proposal.content.budgetDetails&&!proposal.content.timeline?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-16 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full flex items-center justify-center mb-4 shadow-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 text-blue-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 10V3L4 14h7v7l9-11h-7z\"})})})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Ready to Generate\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6 text-lg max-w-md\",children:\"Fill in the required fields and click \\\"Generate AI Content\\\" to create your professional proposal\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-xl p-6 max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 text-blue-800 mb-3\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"AI will generate:\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-blue-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full\"}),\"Executive Summary\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-blue-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full\"}),\"Approach\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-blue-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full\"}),\"Budget Details\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-blue-700\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-500 rounded-full\"}),\"Timeline\"]})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[proposal.content.executiveSummary&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-blue-900 mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),\"Executive Summary\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-sm max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:proposal.content.executiveSummary})})]}),proposal.content.approach&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-100\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-green-900 mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"})}),\"Approach\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-sm max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:proposal.content.approach})})]}),proposal.content.budgetDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-purple-900 mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"})}),\"Budget Details\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-sm max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:proposal.content.budgetDetails})})]}),proposal.content.timeline&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-100\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-yellow-900 mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4l3 3m6 0a9 9 0 11-18 0 9 9 0 0118 0z\"})}),\"Timeline\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-sm max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap\",children:/*#__PURE__*/_jsx(ReactMarkdown,{children:proposal.content.timeline})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-green-800\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Content Generated Successfully!\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-700 text-sm mt-1\",children:\"Review the content above and make any necessary adjustments before saving.\"})]})]})})]})]}),/*#__PURE__*/_jsx(ClientSelectionModal,{isOpen:showClientModal,onClose:()=>setShowClientModal(false),onSelectClient:handleClientSelect,selectedClientId:selectedClientId})]});};export default ProposalEditor;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","toast","proposalsAPI","getOpenRouterChatCompletion","ClientSelectionModal","ReactMarkdown","jsx","_jsx","jsxs","_jsxs","ProposalEditor","id","navigate","loading","setLoading","generating","setGenerating","showClientModal","setShowClientModal","selectedClientId","setSelectedClientId","proposal","setProposal","title","description","clientName","clientEmail","type","content","executiveSummary","approach","budgetDetails","timeline","budget","metadata","industry","companySize","projectScope","isNewProposal","fetchProposal","data","getById","clientId","error","console","handleGenerateWithAI","log","hasClientName","hasDescription","missingFields","push","join","_proposal$metadata","_proposal$metadata2","_proposal$content","_proposal$content2","_result$choices","_result$choices$","_result$choices$$mess","_execMatch$","_approachMatch$","_budgetMatch$","_timelineMatch$","messages","role","result","aiContent","choices","message","execMatch","match","approachMatch","budgetMatch","timelineMatch","trim","sections","split","length","_sections$","_sections$2","_sections$3","_sections$4","cleanContent","replace","substring","success","stack","response","handleSave","proposalData","create","update","_error$response","_error$response$data","handleSubmit","status","_error$response2","_error$response2$data","handleClientSelect","client","name","email","handleClearClient","undefined","className","children","href","onClick","localStorage","removeItem","window","location","value","onChange","e","target","placeholder","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","rows","disabled","xmlns","cx","cy","r","style","animationDelay","isOpen","onClose","onSelectClient"],"sources":["/Users/davnishsingh/Documents/proposalai-main/client/src/pages/ProposalEditor.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { proposalsAPI, getOpenRouterChatCompletion } from '../services/api';\nimport ClientSelectionModal from '../components/ClientSelectionModal';\nimport ReactMarkdown from 'react-markdown';\n\nconst ProposalEditor: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [generating, setGenerating] = useState(false);\n  const [showClientModal, setShowClientModal] = useState(false);\n  const [selectedClientId, setSelectedClientId] = useState<string | undefined>();\n  const [proposal, setProposal] = useState<any>({\n    title: '',\n    description: '',\n    clientName: '',\n    clientEmail: '',\n    type: 'PROPOSAL',\n    content: {\n      executiveSummary: '',\n      approach: '',\n      budgetDetails: '',\n      timeline: '',\n      budget: ''\n    },\n    metadata: {\n      industry: '',\n      companySize: '',\n      projectScope: ''\n    }\n  });\n\n  const isNewProposal = !id;\n\n  useEffect(() => {\n    const fetchProposal = async () => {\n      try {\n        const { data } = await proposalsAPI.getById(id!);\n        setProposal(data.data);\n        setSelectedClientId(data.data.clientId);\n      } catch (error) {\n        console.error('Failed to fetch proposal:', error);\n        toast.error('Failed to load proposal');\n      }\n    };\n\n    if (id) {\n      fetchProposal();\n    }\n  }, [id]);\n\n  const handleGenerateWithAI = async () => {\n    // Validate required fields\n    console.log('ðŸ” Current proposal state:', {\n      clientName: proposal.clientName,\n      description: proposal.description,\n      hasClientName: !!proposal.clientName,\n      hasDescription: !!proposal.description\n    });\n    \n    if (!proposal.clientName || !proposal.description) {\n      const missingFields = [];\n      if (!proposal.clientName) missingFields.push('Client Name');\n      if (!proposal.description) missingFields.push('Description');\n      toast.error(`Please fill in: ${missingFields.join(' and ')} before generating content`);\n      return;\n    }\n\n    try {\n      setGenerating(true);\n      \n      // Compose prompt for OpenRouter\n      const messages = [\n        {\n          role: 'system',\n          content: `You are an expert proposal writer. Generate a detailed, professional proposal for the following client and project. Structure your response with clear sections: Executive Summary, Approach, Budget Details, and Timeline. Use clear, persuasive language and make each section comprehensive.`,\n        },\n        {\n          role: 'user',\n          content: `Client Name: ${proposal.clientName}\\nIndustry: ${proposal.metadata?.industry || ''}\\nCompany Size: ${proposal.metadata?.companySize || ''}\\nProject Description: ${proposal.description}\\nBudget: ${proposal.content?.budget || ''}\\nTimeline: ${proposal.content?.timeline || ''}\\n\\nPlease provide a professional proposal with the following sections:\\n1. Executive Summary\\n2. Approach\\n3. Budget Details\\n4. Timeline`,\n        },\n      ];\n      \n      console.log('ðŸš€ Sending AI generation request with messages:', messages);\n      \n      const result = await getOpenRouterChatCompletion(messages);\n      console.log('âœ… AI response received:', result);\n      \n      const aiContent = result.choices?.[0]?.message?.content || '';\n      console.log('ðŸ“ AI generated content:', aiContent);\n      \n      // Parse the AI response into sections\n      console.log('ï¿½ï¿½ Raw AI response:', aiContent);\n      \n      // Improved parsing with better regex patterns\n      let executiveSummary = '', approach = '', budgetDetails = '', timeline = '';\n      \n      // More flexible regex patterns that handle various formats\n      const execMatch = aiContent.match(/(?:Executive Summary|EXECUTIVE SUMMARY)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Approach|APPROACH|Budget|BUDGET|Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);\n      const approachMatch = aiContent.match(/(?:Approach|APPROACH|Methodology|METHODOLOGY)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Budget|BUDGET|Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);\n      const budgetMatch = aiContent.match(/(?:Budget Details?|BUDGET DETAILS?|Budget|BUDGET)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Timeline|TIMELINE|Next Steps|NEXT STEPS)[:\\s\\n]|$)/i);\n      const timelineMatch = aiContent.match(/(?:Timeline|TIMELINE|Schedule|SCHEDULE)[:\\s\\n]*([\\s\\S]*?)(?=\\n\\s*(?:Next Steps|NEXT STEPS|Conclusion|CONCLUSION)[:\\s\\n]|$)/i);\n      \n      executiveSummary = execMatch?.[1]?.trim() || '';\n      approach = approachMatch?.[1]?.trim() || '';\n      budgetDetails = budgetMatch?.[1]?.trim() || '';\n      timeline = timelineMatch?.[1]?.trim() || '';\n      \n      // If regex parsing didn't work well, try alternative parsing\n      if (!executiveSummary && !approach && !budgetDetails && !timeline) {\n        console.log('âš ï¸ Primary regex parsing failed, trying alternative parsing');\n        \n        // Split by numbered sections or headers\n        const sections = aiContent.split(/\\n\\s*(?:\\d+\\.\\s*)?(?:Executive Summary|Approach|Budget|Timeline|Methodology|Schedule)/i);\n        \n        if (sections.length > 1) {\n          executiveSummary = sections[1]?.trim() || '';\n          approach = sections[2]?.trim() || '';\n          budgetDetails = sections[3]?.trim() || '';\n          timeline = sections[4]?.trim() || '';\n        } else {\n          // Last resort: use the full content as executive summary\n          console.log('âš ï¸ Alternative parsing failed, using full content as executive summary');\n          executiveSummary = aiContent;\n        }\n      }\n      \n      // Clean up the content by removing extra whitespace and formatting\n      const cleanContent = (content: string) => {\n        return content\n          .replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n') // Remove excessive line breaks\n          .replace(/^\\s+|\\s+$/g, '') // Trim whitespace\n          .replace(/\\*\\*(.*?)\\*\\*/g, '$1') // Remove bold formatting\n          .replace(/\\*(.*?)\\*/g, '$1'); // Remove italic formatting\n      };\n      \n      executiveSummary = cleanContent(executiveSummary);\n      approach = cleanContent(approach);\n      budgetDetails = cleanContent(budgetDetails);\n      timeline = cleanContent(timeline);\n      \n      console.log('ðŸ“‹ Parsed sections:', {\n        executiveSummary: executiveSummary.substring(0, 150) + (executiveSummary.length > 150 ? '...' : ''),\n        approach: approach.substring(0, 150) + (approach.length > 150 ? '...' : ''),\n        budgetDetails: budgetDetails.substring(0, 150) + (budgetDetails.length > 150 ? '...' : ''),\n        timeline: timeline.substring(0, 150) + (timeline.length > 150 ? '...' : '')\n      });\n      \n      setProposal({\n        ...proposal,\n        content: {\n          ...proposal.content,\n          executiveSummary,\n          approach,\n          budgetDetails,\n          timeline,\n        },\n      });\n      \n      toast.success('Proposal content generated successfully!');\n    } catch (error: any) {\n      console.error('âŒ Content generation error:', error);\n      console.error('âŒ Error details:', {\n        message: error.message,\n        stack: error.stack,\n        response: error.response\n      });\n      toast.error(error.message || 'Failed to generate proposal content');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      setLoading(true);\n      \n      const proposalData = {\n        ...proposal,\n        // teamId: selectedTeamId, // teamId is not used\n      };\n      \n      if (isNewProposal) {\n        // Create new proposal\n        await proposalsAPI.create(proposalData);\n        toast.success('Proposal created successfully!');\n        navigate('/proposals');\n      } else {\n        // Update existing proposal\n        await proposalsAPI.update(id!, proposalData);\n        toast.success('Proposal updated successfully!');\n      }\n      \n      navigate('/proposals');\n    } catch (error: any) {\n      console.error('Save error:', error);\n      toast.error(error.response?.data?.error || 'Failed to save proposal');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async () => {\n    try {\n      setLoading(true);\n      \n      const proposalData = {\n        ...proposal,\n        // teamId: selectedTeamId, // teamId is not used\n        status: 'IN_REVIEW'\n      };\n      \n      if (isNewProposal) {\n        // Create and submit new proposal\n        await proposalsAPI.create(proposalData);\n        toast.success('Proposal submitted successfully!');\n        navigate('/proposals');\n      } else {\n        // Update and submit existing proposal\n        await proposalsAPI.update(id!, proposalData);\n        toast.success('Proposal submitted successfully!');\n        navigate('/proposals');\n      }\n    } catch (error: any) {\n      console.error('Submit error:', error);\n      toast.error(error.response?.data?.error || 'Failed to submit proposal');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClientSelect = (client: any) => {\n    setProposal({\n      ...proposal,\n      clientName: client.name,\n      clientEmail: client.email || '',\n    });\n    setSelectedClientId(client.id);\n    toast.success(`Selected client: ${client.name}`);\n  };\n\n  const handleClearClient = () => {\n    setProposal({\n      ...proposal,\n      clientName: '',\n      clientEmail: '',\n    });\n    setSelectedClientId(undefined);\n    toast.success('Client selection cleared');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"animate-spin rounded-full h-20 w-20 border-b-4 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n      {/* Top Navigation Bar */}\n      <nav className=\"bg-gradient-to-r from-blue-600 to-blue-400 shadow-lg w-full z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-xl font-extrabold text-white tracking-wider drop-shadow\">ProposalAI</h1>\n            </div>\n            <div className=\"flex items-center space-x-8\">\n              <a href=\"/dashboard\" className=\"text-white font-semibold border-b-2 border-white/80 pb-1 transition-colors\">Dashboard</a>\n              <a href=\"/drafts\" className=\"text-white/80 hover:text-white transition-colors\">Drafts</a>\n              <a href=\"/sent-proposals\" className=\"text-white/80 hover:text-white transition-colors\">Sent Proposals</a>\n              <a href=\"/profile\" className=\"text-white/80 hover:text-white transition-colors\">Profile</a>\n              <button \n                onClick={() => { localStorage.removeItem('token'); localStorage.removeItem('user'); window.location.href = '/login'; }}\n                className=\"text-white/80 hover:text-white transition-colors\"\n              >\n                Logout\n              </button>\n            </div>\n          </div>\n        </div>\n      </nav>\n      {/* Main Content Flex Layout */}\n      <div className=\"flex flex-1 min-h-0\">\n        {/* Left Sidebar */}\n        <aside className=\"w-[380px] min-w-[380px] max-w-[380px] bg-white border-r border-gray-200 flex flex-col p-8\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-8\">\n            {isNewProposal ? 'Create New Proposal' : 'Edit Proposal'}\n          </h2>\n          <form className=\"space-y-8\">\n                              <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                    Proposal Title <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={proposal.title}\n                    onChange={(e) => setProposal({ ...proposal, title: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                    placeholder=\"Enter proposal title\"\n                  />\n                </div>\n                              <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                    Client Name <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"flex gap-3\">\n                    <input\n                      type=\"text\"\n                      value={proposal.clientName}\n                      onChange={(e) => setProposal({ ...proposal, clientName: e.target.value })}\n                      className=\"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                      placeholder=\"Enter client name\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowClientModal(true)}\n                      className={`px-6 py-3 rounded-xl transition-all duration-200 flex items-center gap-2 whitespace-nowrap font-medium ${\n                        selectedClientId \n                          ? 'bg-green-600 text-white hover:bg-green-700 shadow-md' \n                          : 'bg-blue-600 text-white hover:bg-blue-700 shadow-md'\n                      }`}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                      </svg>\n                      {selectedClientId ? 'Change' : 'Select'}\n                    </button>\n                  </div>\n                {selectedClientId && (\n                  <div className=\"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2 text-sm text-green-800\">\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                        </svg>\n                        Client selected from database\n                      </div>\n                      <button\n                        type=\"button\"\n                        onClick={handleClearClient}\n                        className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                      >\n                        Clear\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n                              <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                    Description <span className=\"text-red-500\">*</span>\n                  </label>\n                  <textarea\n                    value={proposal.description}\n                    onChange={(e) => setProposal({ ...proposal, description: e.target.value })}\n                    rows={6}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200\"\n                    placeholder=\"Describe the project, requirements, and objectives...\"\n                  />\n                </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Budget</label>\n                  <input\n                    type=\"text\"\n                    value={proposal.content.budget}\n                    onChange={(e) => setProposal({ ...proposal, content: { ...proposal.content, budget: e.target.value } })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                    placeholder=\"e.g., $50,000\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Timeline</label>\n                  <input\n                    type=\"text\"\n                    value={proposal.content.timeline}\n                    onChange={(e) => setProposal({ ...proposal, content: { ...proposal.content, timeline: e.target.value } })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                    placeholder=\"e.g., 3 months\"\n                  />\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-3\">Industry</label>\n                <input\n                  type=\"text\"\n                  value={proposal.metadata.industry}\n                  onChange={(e) => setProposal({ ...proposal, metadata: { ...proposal.metadata, industry: e.target.value } })}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                  placeholder=\"e.g., Technology, Healthcare, Finance\"\n                />\n              </div>\n              {/* Action Buttons */}\n              <div className=\"flex gap-3 pt-6\">\n                <button\n                  type=\"button\"\n                  onClick={handleSave}\n                  disabled={loading}\n                  className=\"flex-1 px-4 py-3 bg-gray-600 text-white font-medium rounded-xl hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 transition-all duration-200\"\n                >\n                  Save Draft\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleSubmit}\n                  disabled={loading}\n                  className=\"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-300 transform hover:scale-105\"\n                >\n                  Submit Proposal\n                </button>\n              </div>\n              <button\n                type=\"button\"\n                onClick={handleGenerateWithAI}\n                disabled={generating || loading || !proposal.clientName || !proposal.description}\n                className={`w-full mt-8 py-4 px-6 rounded-xl font-semibold text-white transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-lg ${\n                  generating || loading || !proposal.clientName || !proposal.description\n                    ? 'bg-gray-400 cursor-not-allowed'\n                    : 'bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:ring-blue-500'\n                }`}\n              >\n                {generating ? (\n                  <div className=\"flex items-center justify-center\">\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Generating Content...\n                  </div>\n                ) : (\n                  <div className=\"flex items-center justify-center\">\n                    <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                    </svg>\n                    Generate AI Content\n                  </div>\n                )}\n              </button>\n              {(!proposal.clientName || !proposal.description) && (\n                <p className=\"text-sm text-gray-500 text-center mt-2\">\n                  Enter client name and description to enable AI generation\n                </p>\n              )}\n          </form>\n        </aside>\n        {/* Right Content Area */}\n        <main className=\"flex-1 flex flex-col p-12 overflow-y-auto bg-gray-50\">\n          <div className=\"mb-8\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">AI Generated Content</h2>\n            <p className=\"text-gray-600\">Review and customize your AI-generated proposal content</p>\n          </div>\n          <div className=\"max-h-[700px] min-h-[300px] flex-1 overflow-y-auto pr-2\">\n              {generating ? (\n                <div className=\"flex flex-col items-center justify-center py-12\">\n                  <div className=\"relative\">\n                    {/* Animated circles */}\n                    <div className=\"absolute inset-0 animate-ping\">\n                      <div className=\"w-16 h-16 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full opacity-20\"></div>\n                    </div>\n                    <div className=\"absolute inset-0 animate-ping\" style={{ animationDelay: '0.5s' }}>\n                      <div className=\"w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full opacity-20\"></div>\n                    </div>\n                    <div className=\"relative\">\n                      <div className=\"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center\">\n                        <svg className=\"w-8 h-8 text-white animate-spin\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"mt-6 text-center\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Generating Your Proposal</h3>\n                    <p className=\"text-gray-600\">Our AI is crafting a professional proposal tailored to your needs...</p>\n                    \n                    {/* Animated dots */}\n                    <div className=\"flex justify-center mt-4 space-x-1\">\n                      <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\n                      <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                      <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                    </div>\n                  </div>\n                </div>\n              ) : !proposal.content.executiveSummary && !proposal.content.approach && !proposal.content.budgetDetails && !proposal.content.timeline ? (\n                <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n                  <div className=\"relative mb-8\">\n                    <div className=\"w-24 h-24 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full flex items-center justify-center mb-4 shadow-lg\">\n                      <svg className=\"w-12 h-12 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                      </svg>\n                    </div>\n                    <div className=\"absolute -top-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center\">\n                      <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                      </svg>\n                    </div>\n                  </div>\n                  <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">Ready to Generate</h3>\n                  <p className=\"text-gray-600 mb-6 text-lg max-w-md\">Fill in the required fields and click \"Generate AI Content\" to create your professional proposal</p>\n                  \n                  <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-6 max-w-md\">\n                    <div className=\"flex items-center gap-3 text-blue-800 mb-3\">\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      <span className=\"font-semibold\">AI will generate:</span>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-3 text-sm\">\n                      <div className=\"flex items-center gap-2 text-blue-700\">\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                        Executive Summary\n                      </div>\n                      <div className=\"flex items-center gap-2 text-blue-700\">\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                        Approach\n                      </div>\n                      <div className=\"flex items-center gap-2 text-blue-700\">\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                        Budget Details\n                      </div>\n                      <div className=\"flex items-center gap-2 text-blue-700\">\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                        Timeline\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"space-y-6\">\n                  {/* Executive Summary */}\n                  {proposal.content.executiveSummary && (\n                    <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100\">\n                      <h3 className=\"text-lg font-semibold text-blue-900 mb-3 flex items-center gap-2\">\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                        </svg>\n                        Executive Summary\n                      </h3>\n                      <div className=\"prose prose-sm max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap\">\n                        <ReactMarkdown>\n                          {proposal.content.executiveSummary}\n                        </ReactMarkdown>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Approach */}\n                  {proposal.content.approach && (\n                    <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-100\">\n                      <h3 className=\"text-lg font-semibold text-green-900 mb-3 flex items-center gap-2\">\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                        </svg>\n                        Approach\n                      </h3>\n                      <div className=\"prose prose-sm max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap\">\n                        <ReactMarkdown>\n                          {proposal.content.approach}\n                        </ReactMarkdown>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Budget Details */}\n                  {proposal.content.budgetDetails && (\n                    <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-100\">\n                      <h3 className=\"text-lg font-semibold text-purple-900 mb-3 flex items-center gap-2\">\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\" />\n                        </svg>\n                        Budget Details\n                      </h3>\n                      <div className=\"prose prose-sm max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap\">\n                        <ReactMarkdown>\n                          {proposal.content.budgetDetails}\n                        </ReactMarkdown>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Timeline */}\n                  {proposal.content.timeline && (\n                    <div className=\"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-100\">\n                      <h3 className=\"text-lg font-semibold text-yellow-900 mb-3 flex items-center gap-2\">\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                        Timeline\n                      </h3>\n                      <div className=\"prose prose-sm max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap\">\n                        <ReactMarkdown>\n                          {proposal.content.timeline}\n                        </ReactMarkdown>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Success Message */}\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                    <div className=\"flex items-center gap-2 text-green-800\">\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      <span className=\"font-medium\">Content Generated Successfully!</span>\n                    </div>\n                    <p className=\"text-green-700 text-sm mt-1\">Review the content above and make any necessary adjustments before saving.</p>\n                  </div>\n                </div>\n              )}\n            </div>\n        </main>\n      </div>\n      \n      {/* Client Selection Modal */}\n      <ClientSelectionModal\n        isOpen={showClientModal}\n        onClose={() => setShowClientModal(false)}\n        onSelectClient={handleClientSelect}\n        selectedClientId={selectedClientId}\n      />\n    </div>\n  );\n};\n\nexport default ProposalEditor; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}