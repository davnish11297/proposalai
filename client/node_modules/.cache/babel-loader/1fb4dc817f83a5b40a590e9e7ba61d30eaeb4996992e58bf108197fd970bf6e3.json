{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{proposalsAPI,clientsAPI}from'../services/api';import{DocumentTextIcon,UserIcon,CalendarIcon,PencilSquareIcon,EyeIcon,TrashIcon,PaperAirplaneIcon,ChevronDownIcon,PlusIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Drafts(){const navigate=useNavigate();const[drafts,setDrafts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showSendModal,setShowSendModal]=useState(false);const[selectedDraft,setSelectedDraft]=useState(null);const[recipientEmail,setRecipientEmail]=useState('');const[clientName,setClientName]=useState('');const[sending,setSending]=useState(false);const[sendError,setSendError]=useState('');// Client selection states\nconst[clients,setClients]=useState([]);const[selectedClientId,setSelectedClientId]=useState('');const[showClientDropdown,setShowClientDropdown]=useState(false);const[showNewClientForm,setShowNewClientForm]=useState(false);const[newClientName,setNewClientName]=useState('');const[newClientEmail,setNewClientEmail]=useState('');const[creatingClient,setCreatingClient]=useState(false);useEffect(()=>{fetchDrafts();fetchClients();},[]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{const target=event.target;if(!target.closest('.client-dropdown')){setShowClientDropdown(false);}};if(showClientDropdown){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[showClientDropdown]);const fetchDrafts=async()=>{try{setLoading(true);const response=await proposalsAPI.getAll();setDrafts(response.data.data.filter(p=>p.status==='DRAFT'));}catch(err){setError('Failed to load drafts');}finally{setLoading(false);}};const fetchClients=async()=>{try{var _response$data;const response=await clientsAPI.getClients();const clientsData=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.data)||[];setClients(clientsData);}catch(error){console.error('Error fetching clients:',error);}};const handleEdit=id=>navigate(`/proposals/${id}`);const handleView=id=>navigate(`/proposals/${id}/view`);const handleDelete=async id=>{if(window.confirm('Delete this draft?')){await proposalsAPI.delete(id);fetchDrafts();}};const handleSend=draft=>{setSelectedDraft(draft);setRecipientEmail('');setClientName('');setSelectedClientId('');setShowClientDropdown(false);setShowNewClientForm(false);setNewClientName('');setNewClientEmail('');setSendError('');setShowSendModal(true);};const handleClientSelect=client=>{setSelectedClientId(client.id);setClientName(client.name);setRecipientEmail(client.email);setShowClientDropdown(false);};const handleCreateClient=async()=>{if(!newClientName.trim()||!newClientEmail.trim()){return;}try{var _response$data2;setCreatingClient(true);const response=await clientsAPI.create({name:newClientName.trim(),email:newClientEmail.trim()});const newClient=(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.data;setClients([...clients,newClient]);// Select the newly created client\nsetSelectedClientId(newClient.id);setClientName(newClient.name);setRecipientEmail(newClient.email);// Reset form\nsetShowNewClientForm(false);setNewClientName('');setNewClientEmail('');}catch(error){console.error('Error creating client:',error);}finally{setCreatingClient(false);}};const handleSendProposal=async()=>{if(!recipientEmail.trim()){setSendError('Please enter a recipient email');return;}if(!clientName.trim()){setSendError('Please enter a client name');return;}if(!selectedDraft)return;try{setSending(true);setSendError('');await proposalsAPI.sendEmail(selectedDraft.id,{recipientEmail:recipientEmail.trim(),clientName:clientName.trim()});// Close modal and refresh drafts\nsetShowSendModal(false);setSelectedDraft(null);setRecipientEmail('');setClientName('');// Show success message\nalert('Proposal sent successfully! It has been moved to Sent Proposals.');// Refresh the drafts list (the sent proposal will no longer appear here)\nfetchDrafts();}catch(err){var _err$response,_err$response$data;setSendError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to send proposal');}finally{setSending(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:\"Draft Proposals\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Edit and manage your draft proposals before sending them to clients\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-40 text-lg text-gray-600 font-medium\",children:\"Loading drafts...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-40 text-lg text-red-500 font-medium\",children:error}):drafts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-60 text-gray-400\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-16 w-16 mb-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-medium\",children:\"No drafts found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm mt-2\",children:\"Start by generating a new proposal!\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\",children:drafts.map(draft=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col justify-between hover:shadow-md transition-all duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"h-7 w-7 text-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-gray-900 truncate\",title:draft.title,children:draft.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-gray-600 mb-1\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:draft.clientName||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm text-gray-500 mb-4\",children:[/*#__PURE__*/_jsx(CalendarIcon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(draft.createdAt).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-700 text-sm line-clamp-3 mb-4\",children:draft.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-2 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-1 px-3 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors text-sm\",onClick:()=>handleEdit(draft.id),children:[/*#__PURE__*/_jsx(PencilSquareIcon,{className:\"h-4 w-4\"}),\" Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-1 px-3 py-2 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 transition-colors text-sm\",onClick:()=>handleView(draft.id),children:[/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4\"}),\" View\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-1 px-3 py-2 rounded-lg bg-purple-600 text-white font-medium hover:bg-purple-700 transition-colors text-sm\",onClick:()=>handleSend(draft),children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-4 w-4\"}),\" Send\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-1 px-3 py-2 rounded-lg bg-red-600 text-white font-medium hover:bg-red-700 transition-colors text-sm\",onClick:()=>handleDelete(draft.id),children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"}),\" Delete\"]})]})]},draft.id))})]}),showSendModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg max-w-md w-full p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-6 w-6 text-purple-500\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Send Proposal\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-2\",children:[\"Send \\\"\",selectedDraft===null||selectedDraft===void 0?void 0:selectedDraft.title,\"\\\" to:\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Select Client \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative client-dropdown\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowClientDropdown(!showClientDropdown),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-left flex items-center justify-between\",disabled:sending,children:[/*#__PURE__*/_jsx(\"span\",{className:selectedClientId?'text-gray-900':'text-gray-500',children:selectedClientId?clientName:'Choose a client or add new...'}),/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"h-4 w-4 text-gray-400\"})]}),showClientDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto\",children:[clients.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1\",children:\"Existing Clients\"}),clients.map(client=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleClientSelect(client),className:\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md flex items-center gap-2\",children:[/*#__PURE__*/_jsx(UserIcon,{className:\"h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:client.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:client.email})]})]},client.id))]}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1\",children:\"No clients yet\"}),/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 text-sm text-gray-500\",children:\"Create your first client below\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 p-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowNewClientForm(true);setShowClientDropdown(false);},className:\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md flex items-center gap-2 text-purple-600\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Add New Client\"})]})})]})]})]}),showNewClientForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"border border-purple-200 rounded-lg p-4 bg-purple-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-purple-900\",children:\"Add New Client\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewClientForm(false),className:\"text-purple-600 hover:text-purple-800\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Client Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter client's full name\",value:newClientName,onChange:e=>setNewClientName(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent\",disabled:creatingClient})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Email Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"client@example.com\",value:newClientEmail,onChange:e=>setNewClientEmail(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent\",disabled:creatingClient})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateClient,disabled:creatingClient||!newClientName.trim()||!newClientEmail.trim(),className:\"w-full px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\",children:creatingClient?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-3 w-3 border-b-2 border-white\"}),\"Creating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-3 w-3\"}),\"Create Client\"]})})]})]}),!selectedClientId&&!showNewClientForm&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Client Name \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter client's full name\",value:clientName,onChange:e=>setClientName(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\",disabled:sending})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Email Address \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"recipient@example.com\",value:recipientEmail,onChange:e=>setRecipientEmail(e.target.value),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\",disabled:sending})]})]})]}),sendError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-2\",children:sendError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSendModal(false),className:\"flex-1 px-4 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition\",disabled:sending,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendProposal,disabled:sending||!recipientEmail.trim()||!clientName.trim(),className:\"flex-1 px-4 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\",children:sending?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),\"Sending...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"h-4 w-4\"}),\"Send\"]})})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","proposalsAPI","clientsAPI","DocumentTextIcon","UserIcon","CalendarIcon","PencilSquareIcon","EyeIcon","TrashIcon","PaperAirplaneIcon","ChevronDownIcon","PlusIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Drafts","navigate","drafts","setDrafts","loading","setLoading","error","setError","showSendModal","setShowSendModal","selectedDraft","setSelectedDraft","recipientEmail","setRecipientEmail","clientName","setClientName","sending","setSending","sendError","setSendError","clients","setClients","selectedClientId","setSelectedClientId","showClientDropdown","setShowClientDropdown","showNewClientForm","setShowNewClientForm","newClientName","setNewClientName","newClientEmail","setNewClientEmail","creatingClient","setCreatingClient","fetchDrafts","fetchClients","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","response","getAll","data","filter","p","status","err","_response$data","getClients","clientsData","console","handleEdit","id","handleView","handleDelete","window","confirm","delete","handleSend","draft","handleClientSelect","client","name","email","handleCreateClient","trim","_response$data2","create","newClient","handleSendProposal","sendEmail","alert","_err$response","_err$response$data","className","children","length","map","title","Date","createdAt","toLocaleDateString","description","onClick","type","disabled","placeholder","value","onChange","e"],"sources":["/Users/davnishsingh/Documents/proposalai-main/proposalai/client/src/pages/Drafts.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { proposalsAPI, clientsAPI } from '../services/api';\nimport { \n  DocumentTextIcon, \n  UserIcon, \n  CalendarIcon, \n  PencilSquareIcon, \n  EyeIcon, \n  TrashIcon, \n  PaperAirplaneIcon,\n  ChevronDownIcon,\n  PlusIcon\n} from '@heroicons/react/24/outline';\n\nexport default function Drafts() {\n  const navigate = useNavigate();\n  const [drafts, setDrafts] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showSendModal, setShowSendModal] = useState(false);\n  const [selectedDraft, setSelectedDraft] = useState<any>(null);\n  const [recipientEmail, setRecipientEmail] = useState('');\n  const [clientName, setClientName] = useState('');\n  const [sending, setSending] = useState(false);\n  const [sendError, setSendError] = useState('');\n  \n  // Client selection states\n  const [clients, setClients] = useState<any[]>([]);\n  const [selectedClientId, setSelectedClientId] = useState<string>('');\n  const [showClientDropdown, setShowClientDropdown] = useState(false);\n  const [showNewClientForm, setShowNewClientForm] = useState(false);\n  const [newClientName, setNewClientName] = useState('');\n  const [newClientEmail, setNewClientEmail] = useState('');\n  const [creatingClient, setCreatingClient] = useState(false);\n\n  useEffect(() => {\n    fetchDrafts();\n    fetchClients();\n  }, []);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as Element;\n      if (!target.closest('.client-dropdown')) {\n        setShowClientDropdown(false);\n      }\n    };\n\n    if (showClientDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showClientDropdown]);\n\n  const fetchDrafts = async () => {\n    try {\n      setLoading(true);\n      const response = await proposalsAPI.getAll();\n      setDrafts(response.data.data.filter((p: any) => p.status === 'DRAFT'));\n    } catch (err) {\n      setError('Failed to load drafts');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchClients = async () => {\n    try {\n      const response = await clientsAPI.getClients();\n      const clientsData = response.data?.data || [];\n      setClients(clientsData);\n    } catch (error) {\n      console.error('Error fetching clients:', error);\n    }\n  };\n\n  const handleEdit = (id: string) => navigate(`/proposals/${id}`);\n  const handleView = (id: string) => navigate(`/proposals/${id}/view`);\n  const handleDelete = async (id: string) => {\n    if (window.confirm('Delete this draft?')) {\n      await proposalsAPI.delete(id);\n      fetchDrafts();\n    }\n  };\n\n  const handleSend = (draft: any) => {\n    setSelectedDraft(draft);\n    setRecipientEmail('');\n    setClientName('');\n    setSelectedClientId('');\n    setShowClientDropdown(false);\n    setShowNewClientForm(false);\n    setNewClientName('');\n    setNewClientEmail('');\n    setSendError('');\n    setShowSendModal(true);\n  };\n\n  const handleClientSelect = (client: any) => {\n    setSelectedClientId(client.id);\n    setClientName(client.name);\n    setRecipientEmail(client.email);\n    setShowClientDropdown(false);\n  };\n\n  const handleCreateClient = async () => {\n    if (!newClientName.trim() || !newClientEmail.trim()) {\n      return;\n    }\n\n    try {\n      setCreatingClient(true);\n      const response = await clientsAPI.create({\n        name: newClientName.trim(),\n        email: newClientEmail.trim()\n      });\n      \n      const newClient = response.data?.data;\n      setClients([...clients, newClient]);\n      \n      // Select the newly created client\n      setSelectedClientId(newClient.id);\n      setClientName(newClient.name);\n      setRecipientEmail(newClient.email);\n      \n      // Reset form\n      setShowNewClientForm(false);\n      setNewClientName('');\n      setNewClientEmail('');\n    } catch (error) {\n      console.error('Error creating client:', error);\n    } finally {\n      setCreatingClient(false);\n    }\n  };\n\n  const handleSendProposal = async () => {\n    if (!recipientEmail.trim()) {\n      setSendError('Please enter a recipient email');\n      return;\n    }\n\n    if (!clientName.trim()) {\n      setSendError('Please enter a client name');\n      return;\n    }\n\n    if (!selectedDraft) return;\n\n    try {\n      setSending(true);\n      setSendError('');\n      \n      await proposalsAPI.sendEmail(selectedDraft.id, { \n        recipientEmail: recipientEmail.trim(),\n        clientName: clientName.trim()\n      });\n      \n      // Close modal and refresh drafts\n      setShowSendModal(false);\n      setSelectedDraft(null);\n      setRecipientEmail('');\n      setClientName('');\n      \n      // Show success message\n      alert('Proposal sent successfully! It has been moved to Sent Proposals.');\n      \n      // Refresh the drafts list (the sent proposal will no longer appear here)\n      fetchDrafts();\n    } catch (err: any) {\n      setSendError(err.response?.data?.error || 'Failed to send proposal');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Draft Proposals</h1>\n          <p className=\"text-gray-600\">Edit and manage your draft proposals before sending them to clients</p>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center items-center h-40 text-lg text-gray-600 font-medium\">Loading drafts...</div>\n        ) : error ? (\n          <div className=\"flex justify-center items-center h-40 text-lg text-red-500 font-medium\">{error}</div>\n        ) : drafts.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-60 text-gray-400\">\n            <DocumentTextIcon className=\"h-16 w-16 mb-4\" />\n            <div className=\"text-xl font-medium\">No drafts found</div>\n            <div className=\"text-sm mt-2\">Start by generating a new proposal!</div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {drafts.map((draft) => (\n              <div key={draft.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col justify-between hover:shadow-md transition-all duration-200\">\n                <div>\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <DocumentTextIcon className=\"h-7 w-7 text-blue-500\" />\n                    <span className=\"text-lg font-bold text-gray-900 truncate\" title={draft.title}>{draft.title}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-600 mb-1\">\n                    <UserIcon className=\"h-4 w-4\" />\n                    <span>{draft.clientName || 'N/A'}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-500 mb-4\">\n                    <CalendarIcon className=\"h-4 w-4\" />\n                    <span>{new Date(draft.createdAt).toLocaleDateString()}</span>\n                  </div>\n                  <div className=\"text-gray-700 text-sm line-clamp-3 mb-4\">{draft.description}</div>\n                </div>\n                <div className=\"flex gap-2 mt-2 flex-wrap\">\n                  <button\n                    className=\"flex items-center gap-1 px-3 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors text-sm\"\n                    onClick={() => handleEdit(draft.id)}\n                  >\n                    <PencilSquareIcon className=\"h-4 w-4\" /> Edit\n                  </button>\n                  <button\n                    className=\"flex items-center gap-1 px-3 py-2 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 transition-colors text-sm\"\n                    onClick={() => handleView(draft.id)}\n                  >\n                    <EyeIcon className=\"h-4 w-4\" /> View\n                  </button>\n                  <button\n                    className=\"flex items-center gap-1 px-3 py-2 rounded-lg bg-purple-600 text-white font-medium hover:bg-purple-700 transition-colors text-sm\"\n                    onClick={() => handleSend(draft)}\n                  >\n                    <PaperAirplaneIcon className=\"h-4 w-4\" /> Send\n                  </button>\n                  <button\n                    className=\"flex items-center gap-1 px-3 py-2 rounded-lg bg-red-600 text-white font-medium hover:bg-red-700 transition-colors text-sm\"\n                    onClick={() => handleDelete(draft.id)}\n                  >\n                    <TrashIcon className=\"h-4 w-4\" /> Delete\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Send Proposal Modal */}\n      {showSendModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-lg max-w-md w-full p-6\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <PaperAirplaneIcon className=\"h-6 w-6 text-purple-500\" />\n              <h3 className=\"text-xl font-bold text-gray-900\">Send Proposal</h3>\n            </div>\n            \n            <div className=\"mb-4\">\n              <p className=\"text-gray-600 mb-2\">Send \"{selectedDraft?.title}\" to:</p>\n              \n              <div className=\"space-y-3\">\n                {/* Client Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Select Client <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"relative client-dropdown\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowClientDropdown(!showClientDropdown)}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-left flex items-center justify-between\"\n                      disabled={sending}\n                    >\n                      <span className={selectedClientId ? 'text-gray-900' : 'text-gray-500'}>\n                        {selectedClientId ? clientName : 'Choose a client or add new...'}\n                      </span>\n                      <ChevronDownIcon className=\"h-4 w-4 text-gray-400\" />\n                    </button>\n                    \n                    {showClientDropdown && (\n                      <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto\">\n                        {/* Existing Clients */}\n                        {clients.length > 0 ? (\n                          <div className=\"p-2\">\n                            <div className=\"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1\">\n                              Existing Clients\n                            </div>\n                            {clients.map((client) => (\n                              <button\n                                key={client.id}\n                                onClick={() => handleClientSelect(client)}\n                                className=\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md flex items-center gap-2\"\n                              >\n                                <UserIcon className=\"h-4 w-4 text-gray-400\" />\n                                <div>\n                                  <div className=\"font-medium text-gray-900\">{client.name}</div>\n                                  <div className=\"text-sm text-gray-500\">{client.email}</div>\n                                </div>\n                              </button>\n                            ))}\n                          </div>\n                        ) : (\n                          <div className=\"p-2\">\n                            <div className=\"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 py-1\">\n                              No clients yet\n                            </div>\n                            <div className=\"px-3 py-2 text-sm text-gray-500\">\n                              Create your first client below\n                            </div>\n                          </div>\n                        )}\n                        \n                        {/* Add New Client Button */}\n                        <div className=\"border-t border-gray-200 p-2\">\n                          <button\n                            onClick={() => {\n                              setShowNewClientForm(true);\n                              setShowClientDropdown(false);\n                            }}\n                            className=\"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-md flex items-center gap-2 text-purple-600\"\n                          >\n                            <PlusIcon className=\"h-4 w-4\" />\n                            <span className=\"font-medium\">Add New Client</span>\n                          </button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* New Client Form */}\n                {showNewClientForm && (\n                  <div className=\"border border-purple-200 rounded-lg p-4 bg-purple-50\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h4 className=\"font-medium text-purple-900\">Add New Client</h4>\n                      <button\n                        onClick={() => setShowNewClientForm(false)}\n                        className=\"text-purple-600 hover:text-purple-800\"\n                      >\n                        Ã—\n                      </button>\n                    </div>\n                    \n                    <div className=\"space-y-3\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Client Name <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"text\"\n                          placeholder=\"Enter client's full name\"\n                          value={newClientName}\n                          onChange={(e) => setNewClientName(e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                          disabled={creatingClient}\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Email Address <span className=\"text-red-500\">*</span>\n                        </label>\n                        <input\n                          type=\"email\"\n                          placeholder=\"client@example.com\"\n                          value={newClientEmail}\n                          onChange={(e) => setNewClientEmail(e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                          disabled={creatingClient}\n                        />\n                      </div>\n                      \n                      <button\n                        onClick={handleCreateClient}\n                        disabled={creatingClient || !newClientName.trim() || !newClientEmail.trim()}\n                        className=\"w-full px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                      >\n                        {creatingClient ? (\n                          <>\n                            <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-white\"></div>\n                            Creating...\n                          </>\n                        ) : (\n                          <>\n                            <PlusIcon className=\"h-3 w-3\" />\n                            Create Client\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                )}\n\n                {/* Manual Input Fields (when no client selected) */}\n                {!selectedClientId && !showNewClientForm && (\n                  <>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Client Name <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Enter client's full name\"\n                        value={clientName}\n                        onChange={(e) => setClientName(e.target.value)}\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                        disabled={sending}\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Email Address <span className=\"text-red-500\">*</span>\n                      </label>\n                      <input\n                        type=\"email\"\n                        placeholder=\"recipient@example.com\"\n                        value={recipientEmail}\n                        onChange={(e) => setRecipientEmail(e.target.value)}\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                        disabled={sending}\n                      />\n                    </div>\n                  </>\n                )}\n              </div>\n              \n              {sendError && (\n                <p className=\"text-red-500 text-sm mt-2\">{sendError}</p>\n              )}\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowSendModal(false)}\n                className=\"flex-1 px-4 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition\"\n                disabled={sending}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSendProposal}\n                disabled={sending || !recipientEmail.trim() || !clientName.trim()}\n                className=\"flex-1 px-4 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n              >\n                {sending ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                    Sending...\n                  </>\n                ) : (\n                  <>\n                    <PaperAirplaneIcon className=\"h-4 w-4\" />\n                    Send\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}